!function(e,o){o.Photo={scrollEventTriggered:!1,exec:function(){e(document).ready(e.proxy(this.onDomReady,this)),e(document).on("fcx:template-loader:finished-loading:photo-meta",e.proxy(this.onDomReady,this)),e(document).on("fcx:photo-list-page:show",e.proxy(this.backToList,this)),e(document).on("fcx:template-loader:finished-loading:photo-page",e.proxy(this.initRightClickBarrier,this)),e(document).on("fcx:template-loader:finished-loading:photo-page",e.proxy(this.initLightbox,this)),e(document).on("fcx:photo-page:scroll-to-comments",e.proxy(this.scrollToComments,this)),(new WOW).init()},onDomReady:function(){this.init(),this.bindEvents(),this.reorderInfoAreaElements(),this.setupTooltips(),this.positionScrollDetectElement()},backToList:function(){this.scrollEventTriggered=!0},init:function(){this.$tooltips=e(".btn-group [title]"),this.$likeBtn=e(".fcx-like"),this.$favoriteBtns=e(".fcx-favorite").find(".dropdown-menu a"),this.$reportPhotoModal=e("#fcx-modal-report-photo"),this.$reportCommentModal=e("#fcx-modal-report-comment"),this.$embedPhotoModal=e("#fcx-modal-embed-photo"),this.$commentScrollTo=e(".fcx-scroll-to-photo-comments"),this.$awardsScrollTo=e(".fcx-scroll-to-photo-awards"),this.scrollDetectElement=e("#fcx-scroll-position-detect"),this.initPhotoFilter(),this.initRightClickBarrier(),this.initLightbox(),this.initPreviousNextNavigation()},initPreviousNextNavigation:function(){if(0!==e(".fcx-photo-fallback").length){var t=e(".fcx-photo-fallback a.previous-photo"),o=e(".fcx-photo-fallback a.next-photo");0<t.attr("href").length&&(t.show(),t.css("cursor","pointer")),0<o.attr("href").length&&(o.show(),o.css("cursor","pointer"))}},initPhotoFilter:function(){this.photoFilter=new o.PhotoFilter,this.photoFilter.init()},initRightClickBarrier:function(){var t=e("#fcx-photo-wrapper");this.PhotoRightClickBarrier=new o.PhotoRightClickBarrier(t),this.PhotoRightClickBarrier.init()},initLightbox:function(){this.lightbox=new o.LightboxImage(e("[data-lightbox]"))},bindEvents:function(){e(window).resize(e.proxy(this.onResize,this)),this.$favoriteBtns.on("click",e.proxy(this.favorite,this)),this.bindReportCommentEvents(),this.$reportPhotoModal.on("shown.bs.modal",e.proxy(this.initReportPhotoModalValidation,this)),this.$reportCommentModal.on("shown.bs.modal",e.proxy(this.initReportCommentModalValidation,this)),this.$embedPhotoModal.on("shown.bs.modal",e.proxy(this.initEmbedPhotoModal,this)),this.$commentScrollTo.on("click",e.proxy(this.scrollToComments,this)),this.$awardsScrollTo.on("click",e.proxy(this.scrollToAwards,this)),e(window).on("scroll",e.proxy(this.triggerScrollRangeEvent,this)),e("#fcx-feedback-welcome__toggle").on("change",e.proxy(this.onToggleFeedbackWelcome,this))},onToggleFeedbackWelcome:function(t){e.ajax(e(t.target).attr("data-url"),{method:"POST"})},bindReportCommentEvents:function(){e(".fcx-report-comment").on("click",function(){e('#fcx-modal-report-comment input[name="report-comment-id"]').val(e(this).parents(".fcx-comment").data("comment-id"))})},bindHideCommentEvents:function(){e(".fcx-hide-comment").on("click",function(t){var o=e(this).parents(".fcx-comment");o.data("comment-id");e(this).tooltip("hide"),o.addClass("fcx-hidden"),t.preventDefault()}),e(".fcx-unhide-comment").on("click",function(t){var o=e(this).parents(".fcx-comment");o.data("comment-id");e(this).tooltip("hide"),o.removeClass("fcx-hidden"),t.preventDefault()})},initReportPhotoModalValidation:function(){e("#fcx-report-photo").formValidation({locale:"de_DE",framework:"bootstrap",icon:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{"photo_report[reportPhotoReason]":{validators:{notEmpty:{},blank:{}}}}}).on("err.field.fv",function(t,o){o.element.data("fv.messages").find('.help-block[data-fv-for="'+o.field+'"]').hide()})},initReportCommentModalValidation:function(){e("#fcx-report-comment").formValidation({locale:"de_DE",framework:"bootstrap",icon:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{"photo_comment_report[reportCommentReason]":{validators:{notEmpty:{},blank:{}}}}}).on("err.field.fv",function(t,o){o.element.data("fv.messages").find('.help-block[data-fv-for="'+o.field+'"]').hide()})},setupTooltips:function(){this.$tooltips.each(function(t,o){e(o).hasClass("suppress-tooltip")||e(o).tooltip({container:"body"})})},like:function(t){this.$likeBtn.toggleClass("fcx-btn-active")},favorite:function(t){var o=e(t.target);o.hasClass("fcx-active-menu-item")?(o.removeClass("fcx-active-menu-item"),e(".fcx-favorite button").removeClass("fcx-btn-active")):(e(".fcx-favorite .dropdown-menu a").each(function(){e(this).removeClass("fcx-active-menu-item")}),o.addClass("fcx-active-menu-item"),e(".fcx-favorite button").addClass("fcx-btn-active")),t.preventDefault()},toggleAngleIcon:function(t){e(t.target).parent().find("i.icon").toggleClass("far fa-angle-down far fa-angle-up")},initEmbedPhotoModal:function(t){document.queryCommandSupported("copy")?e("#fcx-copy-embed-code-btn").fadeIn("fast").on("click",e.proxy(this.copyEmbedCodeToClipboard,this)):e("#fcx-copy-embed-code-alternative").fadeIn("fast")},copyEmbedCodeToClipboard:function(t){e("#fcx-copy-embed-code-input").select(),document.execCommand("copy"),e("#fcx-copy-embed-code-notice").fadeIn().delay(1e3).fadeOut()},onResize:function(){this.reorderInfoAreaElements(),this.positionScrollDetectElement()},positionScrollDetectElement:function(){this.scrollEventTriggered=!1;var t=e(window).height();this.scrollDetectElement.css("top",1.5*t).css("position","absolute")},triggerScrollRangeEvent:function(){if(!this.scrollEventTriggered&&this.isElementInViewport(this.scrollDetectElement)){var t=this.scrollDetectElement.data("ua-label");t=t.replace("#vph#",e(window).height()),e(document).trigger("custom-submit",[t]),this.scrollEventTriggered=!0}},isElementInViewport:function(t){if(!(t instanceof jQuery)||void 0===t[0])return!1;var o=t[0].getBoundingClientRect();return 0<=o.top&&o.bottom<=(e(window).height()||document.documentElement.clientHeight)},reorderInfoAreaElements:function(){var t="xs"==o.Base.getView()||"sm"==o.Base.getView()?e("#info-description"):e("#info-photographer");t.prependTo(t.parent())},scrollToComments:function(t){t.preventDefault(),e("html, body").animate({scrollTop:e(".fcx-comments-container-scroll-to").offset().top-60},1e3)},scrollToAwards:function(t){t.preventDefault(),e("html, body").animate({scrollTop:e("#fcx-info-awards").offset().top-60},1e3)}},o.Photo.exec()}(jQuery,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{});