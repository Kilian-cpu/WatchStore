!function s(a,r,l){function c(e,t){if(!r[e]){if(!a[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(d)return d(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var n=r[e]={exports:{}};a[e][0].call(n.exports,function(t){return c(a[e][1][t]||t)},n,n.exports,s,a,r,l)}return r[e].exports}for(var d="function"==typeof require&&require,t=0;t<l.length;t++)c(l[t]);return c}({1:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvents()},n.prototype.bindEvents=function(){$(document).on("fcx:adjust-scroll-state:request-adjustment",$.proxy(this.adjust,this))},n.prototype.adjust=function(t,e){this.scrollState.adjust(e.height,e.positive)},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.scrollState=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.AdjustableScrollState=o,e.exports=i.default},{}],2:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n=o(t("./LazyElement")),s=o(t("./StickyElement")),a=(r.prototype.execute=function(){this.init(),this.initCustomAds(),this.initInitialAds(),this.initLazyAds(),this.bindEvents()},r.prototype.init=function(){this.adInitialUnits={},this.lazyEnabled=!0,this.exludedAds="#fc_dfp_leaderboard, #fc_dfp_skyscraper",this.zone="",this.category="",void 0!==$(".fcx-search-result").data("zone")&&(this.zone="section"===$(".fcx-search-result").data("zone")?"search":""),googletag.cmd.push($.proxy(function(){googletag.pubads().disableInitialLoad(),googletag.pubads().collapseEmptyDivs(!0,!0),googletag.enableServices(),googletag.pubads().addEventListener("slotRenderEnded",$.proxy(function(t){var e=t.slot.getSlotElementId(),i=$("#"+e);t.isEmpty?this.slotRenderEndHide(e,i):this.slotRenderEndView(e,i)},this))},this)),this.$contentObject=$("#fcx-main")},r.prototype.slotRenderEndView=function(t,e){"fc_dfp_oop"===t&&this.hideAds(),"fc_dfp_leaderboard"===t&&e.nextAll(".ad__addon").show(),"fc_dfp_sticky_mobile"===t&&$("#ad_footer_sticky").show(),"fc_dfp_fishbowl_mobile"===t&&this.setUpFishbowl(),"fc_dfp_fishbowl_mobile"!==t&&"fc_dfp_leaderboard_photolist"!==t&&"fc_dfp_leaderboard_photolist_2"!==t&&e.show(),"fc_dfp_leaderboard_photolist"===t&&this.enablePhotolistAd(t),e.hasClass("fcx-ad-sticky")&&this.initStickyAd(e),!0===e.data("ad-show-parent")&&e.parent().removeClass("hidden")},r.prototype.slotRenderEndHide=function(t,e){"fc_dfp_sticky_mobile"===t&&$("#ad_footer_sticky").hide(),"fc_dfp_leaderboard"===t&&e.nextAll(".ad__addon").hide(),"fc_dfp_fishbowl_mobile"===t&&$(".fishbowl_wrapper").hide(),"fc_dfp_oop"!==t&&"fc_dfp_oop_forum"!==t||this.initExcludedAds()},r.prototype.setUpFishbowl=function(){var t=$(".fcx-gallery").first(),e=t.find(".fcx-gallery__item").length,i=t.attr("id")+"_1";4<e&&(t.after(function(){return $('<div class="ads_background"></div>').append($('<div class="fcx-gallery with-fishbowl"></div>').attr("id",i).append($(this).find(".fcx-gallery__item").eq(3).nextAll()))}).find(".fcx-gallery__item").eq(3).nextAll().remove().end().parent().append($('<div class="fcx-gallery__filler"></div>')).after($('<div class="fishbowl_wrapper"></div>')),t.wrap('<div class="ads_background"></div>'),t.addClass("with-fishbowl"),$(window).on("scroll",$.proxy(this.fixedFishBowl,this)))},r.prototype.initCustomAds=function(){var t={};this.isMobile()||(0<(t=$(".google-ad-inline").filter(".fcx-ad-oop")).length?this.prepareOopAds(t):this.initExcludedAds())},r.prototype.initExcludedAds=function(){this.removeOop();var t={};this.isMobile()||(t=$(".google-ad-inline").filter(this.exludedAds).not(".hidden-ad"),this.prepareAds(t))},r.prototype.initInitialAds=function(){var t=$(".google-ad-inline").not(".hidden-ad, .fcx-ad-lazy, .fcx-ad-oop").not(this.exludedAds);t=this.isMobile()?t.filter(".fcx-ad-mobile, .fcx-ad-all-devices"):t.not(".fcx-ad-mobile"),"display"===this.zone&&(t=t.not("#fc_dfp_leaderboard_photolist, #fc_dfp_leaderboard_photolist_2")),this.prepareAds(t)},r.prototype.reinitSpecificAds=function(){var t=$(".google-ad-inline").not(".hidden-ad, .fcx-ad-all-devices, .fcx-ad-lazy, .fcx-ad-oop").not(this.exludedAds);t=this.isMobile()?t.filter(".fcx-ad-mobile"):t.not(".fcx-ad-mobile"),this.prepareAds(t)},r.prototype.prepareOopAds=function(t){if(!1===this.isAdvertisementAllowed())return!1;$(t).each($.proxy(function(t,e){var i=$(e),o=i.data("ad-slot"),n=i.prop("id");this.enableOopAd(o,n)},this))},r.prototype.prepareAds=function(t){if(!1===this.isAdvertisementAllowed())return $(".google-ad-inline").not(".fcx-ad-lazy, #fc_dfp_oop").parent().hide(),!1;$(t).each($.proxy(function(t,e){var i=$(e),o=i.data("ad-slot"),n=i.prop("id"),s=i.data("ad-size");this.enableAd(o,n,s)},this))},r.prototype.enableOopAd=function(t,e){googletag.cmd.push($.proxy(function(){void 0===this.adInitialUnits[e]&&(this.adInitialUnits[e]=this.getOopSlot(t,e)),googletag.display(e),googletag.pubads().refresh([this.adInitialUnits[e]])},this))},r.prototype.enableAd=function(t,e,i){return("fc_dfp_leaderboard"!==e||"search"!==this.zone||!1!==this.checkTagVisibilty())&&!(-1<$.inArray(e,["fc_dfp_skyscraper","fc_dfp_leaderboard","fc_dfp_billboard_footer","fc_dfp_profile_mc_160_a","fc_dfp_profile_mc_160_b"])&&0===(i=this.getSizesAccepted(e,i)).length)&&("fc_dfp_leaderboard_photolist"!==e&&"fc_dfp_leaderboard_photolist_2"!==e||0!==(i=this.getContentSizesAccepted(i)).length)&&void googletag.cmd.push($.proxy(function(){void 0===this.adInitialUnits[e]&&(this.adInitialUnits[e]=this.getSlot(t,e,i)),googletag.display(e),googletag.pubads().refresh([this.adInitialUnits[e]])},this))},r.prototype.getOopSlot=function(t,e){return googletag.defineOutOfPageSlot(t,e).addService(googletag.pubads()).setCollapseEmptyDiv(!0,!0)},r.prototype.getSlot=function(t,e,i){return"fc_dfp_profile_and_community"===e?googletag.defineSlot(t,i,e).defineSizeMapping(googletag.sizeMapping().addSize([0,0],[]).addSize([1630,800],[1140,50]).addSize([1452,600],[962,50]).addSize([1208,400],[718,50]).addSize([600,200],[450,50]).build()).addService(googletag.pubads()).setCollapseEmptyDiv(!0,!0):googletag.defineSlot(t,i,e).addService(googletag.pubads()).setCollapseEmptyDiv(!0,!0)},r.prototype.bindEvents=function(){$(document).on("fcx:advertisement:request-reload",$.proxy(this.onRequestReload,this)),$(document).on("fcx:lazy-element:ad:loaded",$.proxy(this.onLazyAdLoaded,this)),$(document).on("fcx:advertisement:lazy-enabled",$.proxy(this.setLazyEnabled,this)),$(document).on("fcx:photo-list-page:loaded",$.proxy(this.requestReload,this,{zone:"search"})),$(document).on("fcx:template-loader:finished-loading:photo-list",$.proxy(this.requestReload,this,{zone:"search"})),$(document).on("fcx:template-loader:finished-loading:photo-page",$.proxy(this.requestReload,this,{zone:"display"})),$(document).on("fcx:template-loader:finished-loading:photo-edit-page",$.proxy(this.requestReload,this,{zone:"edit-page"}))},r.prototype.requestReload=function(t){"display"===t.zone&&(this.adjustScrollPosition(),this.hideAds()),"edit-page"===t.zone&&this.hideAds(),"edit-page"!==t.zone&&this.reloadAds(t.zone)},r.prototype.adjustScrollPosition=function(){if(0<$("#fc_dfp_leaderboard:visible").length){var t=$("#fc_dfp_leaderboard").height()+30;$(document).trigger("fcx:adjust-scroll-state:request-adjustment",{height:t,positive:!1})}},r.prototype.fixedFishBowl=function(){var t=$(".fishbowl_wrapper"),e=$(window).scrollTop()+50,i=e+$(window).height(),o=t.offset().top;e<t.height()+o&&o<i?($("#fc_dfp_fishbowl_mobile").css("display","block"),$("#ad_footer_sticky").addClass("temporary--hidden")):($("#fc_dfp_fishbowl_mobile").css("display","none"),$("#ad_footer_sticky").removeClass("temporary--hidden"))},r.prototype.onLazyAdLoaded=function(t,e){var i=e.item;if(1===(i=this.isMobile()?i.filter(".fcx-ad-mobile").not(".hidden-ad"):i.not(".fcx-ad-mobile, .hidden-ad")).length)if(!0===this.lazyEnabled&&this.onSearchDisplayPage()&&"isPay"!==$(".user-status").attr("data-attr")||!0===this.lazyEnabled&&!this.onSearchDisplayPage()){var o=i.data("ad-slot"),n=i.prop("id"),s=i.data("ad-size");this.enableAd(o,n,s)}else i.removeAttr("data-loaded").html("")},r.prototype.onSearchDisplayPage=function(){return $(".fcx-search-detail").is(":visible")},r.prototype.onRequestReload=function(t,e){e=$.extend({zone:"",category:""},e),this.reloadAds(e.zone,e.category)},r.prototype.checkTagVisibilty=function(){var t=$(".fcx-search-result");return $(window).scrollTop()<400&&"none"!==t.css("display")},r.prototype.getAvailableWidth=function(){return 1===$("#fcx-main").length?this.$contentObject=$("#fcx-main"):1===$(".theme-fc-content").length?this.$contentObject=$(".theme-fc-content"):1===$("#container2").length?this.$contentObject=$("#outer"):1===$("#content").length&&(this.$contentObject=$("#content")),this.getRealDisplayWidth()-this.$contentObject.width()-this.$contentObject.offset().left},r.prototype.getMarginForSkyscraper=function(){var t=this.getAvailableWidth();return t<300?t:300},r.prototype.getSizesCompared=function(i,o){var n=[];return $.each(o,function(t,e){if($.isArray(e)&&e[0]<=i)n.push(e);else if(!$.isArray(e)&&0===t&&e<i)return n=o}),n},r.prototype.getSizesAccepted=function(t,e){var i=this.getRealDisplayWidth();return"fc_dfp_skyscraper"===t&&(i=this.getAvailableWidth()),this.getSizesCompared(i,e)},r.prototype.getContentSizesAccepted=function(t){var e=$(".fcx-search-result").width();return null!==e?this.getSizesCompared(e,t):[]},r.prototype.isAdvertisementAllowed=function(){return!(0<$(".is_nude").length||0<$(".no_ads").length)},r.prototype.isMobile=function(){return this.getRealDisplayWidth()<728},r.prototype.getRealDisplayWidth=function(){return $(document).width()},r.prototype.reloadAds=function(t){this.preparePage(t),"display"===this.zone?"isPay"!==$(".user-status").attr("data-attr")?($("#ad_skyscraper").find(".google-ad-inline").addClass("hidden-ad"),$("#ad_footer_sticky").show(),this.initInitialAds(),this.initExcludedAds()):$("#ad_footer_sticky").hide():"search"===this.zone||"section"===this.zone?(this.hideAds(),"nude"!==this.category&&"akt"!==this.category&&($("#ad_skyscraper").find(".google-ad-inline").removeClass("hidden-ad"),this.initCustomAds(),this.initInitialAds(),this.removeLazyAttributes())):"persoenlicher_bereich"===this.zone&&"notifications"===this.category?(this.initCustomAds(),this.initInitialAds()):""!==this.zone&&(this.initCustomAds(),this.reinitSpecificAds(),this.removeLazyAttributes())},r.prototype.preparePage=function(t){var e=$(".fcx-search-result");""===t&&1===e.length?(this.zone=e.attr("data-zone"),this.category=e.attr("data-category")):(this.zone=t,this.category=""),$("BODY").addClass("with-advertisement"),"display"===t?this.prepareForDisplayPage():this.removeCSSForDisplayPage()},r.prototype.prepareForDisplayPage=function(){$("#ad_superbanner").addClass("on-display-page"),$("#page-wrapper").removeClass().addClass("on-detail-page"),$("#ad_footerbillboard").find(".google-ad-inline").addClass("hidden-ad"),$("#fc_dfp_oop").find(".google-ad-inline").addClass("hidden-ad"),this.hideAds()},r.prototype.removeCSSForDisplayPage=function(){$("#page-wrapper").removeClass("on-detail-page").removeClass("on-display-page"),$("#ad_superbanner").removeClass("on-display-page"),$("#ad_footerbillboard").find(".google-ad-inline").removeClass("hidden-ad"),$("#fc_dfp_oop").find(".google-ad-inline").removeClass("hidden-ad"),$("#ad_skyscraper").removeClass("hidden-ad")},r.prototype.hideAds=function(){$(".google-ad-inline").not(".fcx-ad-all-devices, .fcx-ad-lazy, #fc_dfp_leaderboard_photolist, #fc_dfp_leaderboard_photolist_2").hide(),$("#ad_superbanner").find(".ad__addon").hide(),this.removeLazyAttributes()},r.prototype.initLazyAds=function(){if(!1===this.isAdvertisementAllowed())return!1;this.lazyElement=new n.default(".fcx-ad-lazy","ad"),this.lazyElement.execute()},r.prototype.removeLazyAttributes=function(){$(".google-ad-inline").not(".hidden-ad").filter(".fcx-ad-lazy").removeAttr("data-loaded").html("")},r.prototype.setLazyEnabled=function(t,e){this.lazyEnabled=e},r.prototype.initStickyAd=function(t){this.stickyElement=new s.default(t),this.stickyElement.execute()},r.prototype.enablePhotolistAd=function(t){this.movePhotolistAd($("#"+t),3),this.movePhotolistAd($("#"+t+"_2"),6,!0)},r.prototype.movePhotolistAd=function(t,e,i){for(var o=!(arguments.length<=2||void 0===i)&&i,n=t.parent(),s=$(".fcx-gallery__item"),a=0,r=0,l=1;l<s.length;l++)if(10<Math.abs(s.eq(l).position().top-s.eq(l-1).position().top)&&(a++,!0===o&&3===a&&(r=l),a===e)){s.slice(r,l).insertBefore(n),n.show();break}},r.prototype.removeOop=function(){$("#fc_dfp_oop").removeClass("is-wallpaper"),$("#page-wrapper").removeClass("has-wallpaper wallpaper-250 wallpaper-90")},r);function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r)}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Advertisement=a,e.exports=i.default},{"./LazyElement":46,"./StickyElement":138}],3:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){if(this.defaultOptions={expires:"Thu, 01 Jan 2050 00:00:00 UTC",closeSelector:".close"},this.options.hasOwnProperty("expiresInSeconds")){var t=new Date;t.setTime(t.getTime()+1e3*this.options.expiresInSeconds),this.options.expires=t.toGMTString()}this.options=$.extend({},this.defaultOptions,this.options),this.bindEvent()},n.prototype.bindEvent=function(){this.$container.on("click",this.options.closeSelector,$.proxy(this.hide,this))},n.prototype.isCookieSet=function(){var t=document.cookie.split(";"),i="cookie-"+this.$container.data("cookie")+"=",o=!1;return $(t).each(function(t,e){if(0===$.trim(e).indexOf(i))return!(o=!0)}),o},n.prototype.setCookie=function(){var t=this.$container.data("cookie");document.cookie="cookie-"+t+"=1; expires="+this.options.expires+"; path=/"},n.prototype.show=function(){if(this.isCookieSet())return!1;this.$container.removeClass("hidden")},n.prototype.hide=function(){this.$container.addClass("hidden"),this.setCookie()},n.prototype.hideWithoutCookie=function(){this.$container.addClass("hidden")},n);function n(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.options=e,this.init()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.AlertBox=o,e.exports=i.default},{}],4:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(t){var e=arguments.length<=0||void 0===t?"":t;this.bindEvent(),0<e.length&&this.setup(e)},n.prototype.bindEvent=function(){window.DocumentEvent.on("fcx:auto-size:setup",this.onSetup,this),window.DocumentEvent.on("fcx:auto-size:update",this.onSetup,this)},n.prototype.onSetup=function(t,e){this.setup(e.elements)},n.prototype.setup=function(t){this.autoSize.destroy(t),this.autoSize(t)},n.prototype.onUpdate=function(t,e){this.update(e.elements)},n.prototype.update=function(t){this.autoSize.update(t)},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.autoSize=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.AutoSize=o,e.exports=i.default},{}],5:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.allowExitAlert=!0,this.bindEvents()},n.prototype.allow=function(){this.allowExitAlert=!0},n.prototype.disallow=function(){this.allowExitAlert=!1},n.prototype.bindEvents=function(){$(window).on("beforeunload",$.proxy(this.onExitState,this))},n.prototype.onExitState=function(t){if(this.isPageDirty()&&this.allowExitAlert){var e=this.message;return(t=t||window.event)&&(t.returnValue=e),e}},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.isPageDirty=t,this.message=e,this.init()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.BrowserExitAlert=o,e.exports=i.default},{}],6:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.parameterBag={},this.navigationHistory=[],this.lastActiveUrl="",this.setupBaseUrl(),this.bindEvents()},n.prototype.stopScrollTopOnPopState=function(){"scrollRestoration"in history&&(history.scrollRestoration="manual")},n.prototype.setupBaseUrl=function(){this.initalUrl=this.getLocationHref(),this.navigationHistory.push(this.initalUrl),this.parameterBag[this.initalUrl]=this.options.initialParameterBag},n.prototype.getLocationHref=function(){var t,e,i;if(this.options.isPathAbsolute){if(history.emulate&&location.hash){t=location.href,e=location.hash,i=location.pathname,e=e.replace(/^\#/,"");var o=t.replace(location.hash,"").replace(i,e);return o!==t?o:location.href}return $(location).attr("href")}return history.emulate&&location.hash?(e=location.hash).replace(/^\#/,""):location.pathname+location.search},n.prototype.bindEvents=function(){$(window).on("popstate",$.proxy(this.onPopState,this))},n.prototype.addUrl=function(t,e){var i=arguments.length<=1||void 0===e?{}:e;this.parameterBag[t]=i,this.pushUrl({},"",t)},n.prototype.pushUrl=function(t,e,i){var o=arguments.length<=0||void 0===t?{}:t,n=arguments.length<=1||void 0===e?"":e,s=arguments.length<=2||void 0===i?"":i;this.lastActiveUrl=s,this.navigationHistory.push(s),history.pushState(o,n,s)},n.prototype.changeUrl=function(t){this.replaceUrl({},"",t)},n.prototype.replaceUrl=function(t,e,i){var o=arguments.length<=0||void 0===t?{}:t,n=arguments.length<=1||void 0===e?"":e,s=arguments.length<=2||void 0===i?"":i;history.replaceState(o,n,s)},n.prototype.isInitialUrl=function(t){return t===this.initalUrl},n.prototype.onPopState=function(t){var e,i=this.getLocationHref(),o="forward";this.navigationHistory.indexOf(i)<this.navigationHistory.indexOf(this.lastActiveUrl)&&(o="backward"),e={url:this.lastActiveUrl=i,direction:o,originalEvent:t,parameters:this.parameterBag[i]},$(document).trigger("fcx:browser-navigation:popstate",e),t.preventDefault()},n);function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.defaultOptions={isPathAbsolute:!0,initialParameterBag:{}},this.options=$.extend(this.defaultOptions,t),this.init()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.BrowserNavigation=o,e.exports=i.default},{}],7:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvents()},n.prototype.bindEvents=function(){this.$naviButtons.on("click",$.proxy(this.onNaviButtonClick,this)),this.hammertime.on("swipeleft",$.proxy(this.onSwipe,this,"left")),this.hammertime.on("swiperight",$.proxy(this.onSwipe,this,"right"))},n.prototype.onSwipe=function(t){this.slide(t)},n.prototype.onNaviButtonClick=function(t){t.preventDefault(),this.slide($(t.currentTarget).data("direction"))},n.prototype.slide=function(t){var e="left"===t?"sliding-left":"sliding-right";this.$container.one(this.TRANSITION_END_EVENTS,$.proxy(function(){this.$container.off(this.TRANSITION_END_EVENTS),this.$container.addClass("reordering"),this.reorder(t),this.$container.removeClass(e).removeClass("reordering")},this)),this.$container.addClass(e)},n.prototype.reorder=function(t){"left"===t?this.$container.find("li:first-child").insertAfter(this.$container.find("li:last-child")):this.$container.find("li:last-child").insertBefore(this.$container.find("li:first-child"))},n);function n(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.TRANSITION_END_EVENTS="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",this.$container=t,this.$naviButtons=e,this.hammertime=i}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.CardCarousel=o,e.exports=i.default},{}],8:[function(t,e,i){"use strict";i.__esModule=!0;var o,n=t("./CategoryDrilldown"),s=(o=n)&&o.__esModule?o:{default:o},a=(r.prototype.execute=function(){this.init(),this.bindEvents()},r.prototype.init=function(){this.drilldown=new s.default($(".fcx-drilldown__container")),this.drilldown.execute(),this.drilldown.addCallback("item-selected",$.proxy(this.onDrilldownItemSelected,this)),this.classWatcher()},r.prototype.bindEvents=function(){$(document).on("mousedown",".fcx-btn-drilldown",$.proxy(this.onClickBtnDrilldown,this))},r.prototype.onDrilldownItemSelected=function(t){location.href=t},r.prototype.onClickBtnDrilldown=function(t){t.preventDefault(),this.drilldown.toggle(),$(t.currentTarget).blur()},r.prototype.classWatcher=function(){window.setInterval($.proxy(function(){$(".fcx-btn-drilldown").toggleClass("active",this.drilldown.isOpen())},this),100)},r);function r(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.options=t}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Category=a,e.exports=i.default},{"./CategoryDrilldown":9}],9:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n,s=o(t("./Drilldown/Drilldown")),a=o(t("./Sluggifier")),r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=s.default),l.prototype.itemSelected=function(t,e){this.hide();var i=this.callbacks["item-selected"];if("function"==typeof i){var o=a.default.sluggify(e.shortname);"root"!==e.parent_id&&(o=a.default.sluggify(this.sections["c"+e.channel_id].shortname)+"/"+o+"/"+e.section_id),i(this.$container.data("relpath-to-root")+o)}},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.CategoryDrilldown=r,e.exports=i.default},{"./Drilldown/Drilldown":21,"./Sluggifier":137}],10:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.execute=function(){this.bindEvents()},n.prototype.bindEvents=function(){$(document).on("click","#view-close",$.proxy(this.toggleView,this)),$(document).on("click","#view-toggle",$.proxy(this.toggleView,this))},n.prototype.toggleView=function(t){t.preventDefault(),$("#sections-thumbnail-view").toggleClass("hidden"),$("#sections-list-view").toggleClass("hidden"),$(".fcx-photos-container").toggleClass("hidden")},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.CategoryViewToggler=o,e.exports=i.default},{}],11:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n=o(t("./PaginationPicker.js")),s=o(t("./BrowserNavigation.js")),a=o(t("./Advertisement.js")),r=(l.prototype.init=function(){this.loadingAnimation=!1,this.xhrPool=[],this.browserNavigation=new s.default({isPathAbsolute:!1}),this.paginationPicker=new n.default($(".fcx-search-detail"),this),this.paginationPicker.init(),this.isBrowserBack=!1,this.page=null,this.search=null,this.sort=null,this.isOnlineFilter=null,this.$searchInput=$("#fcx-friends-search-input"),this.$tagsInputs=$(".fcx-tags-input"),this.tagSanitizeUrl=$("#search-result").data("tag-sanitize-url"),this.tagRemoveUrl=$("#search-result").data("tag-remove-url"),this.tagSubmitUrl=$("#search-result").data("tag-submit-url"),this.tagSuggestionsUrl=$("#search-result").data("tag-suggestions-url"),this.tags=$("#search-result").data("tags"),this.filteredTags=$("#search-result").data("filtered-tags"),this.activeBuddyRelation=$(".fcx-section-header-tabs .nav-tabs li.active a").attr("data-id"),this.buddiesUrl=$(".fcx-section-header-tabs").attr("data-buddies-url"),this.removeTagByClick=!1,this.enabledCloseByEsc=!0,this.enabladCloseByBlur=!0,this.setInputTagsOptions(),this.updateTagCloud(),this.updateAnonymousFollowersDifference(),this.initAdvertisement(),this.getBuddies(),this.bindEvents()},l.prototype.bindEvents=function(){$(document).on("click",".nav-tabs li a",$.proxy(this.onTabSelect,this)),$(document).on("click",".fcx-pagination .fcx-paginiation-button",$.proxy(this.onPagination,this)),$(document).on("fcx:browser-navigation:popstate",$.proxy(this.onPopState,this)),$(document).on("submit","form.fcx-friend-search",$.proxy(this.onSearchSubmit,this)),$(document).on("change",'select[name="sort[]"]',$.proxy(this.onSortChange,this)),$(document).on("change",'input[name="is_online"]',$.proxy(this.onOnlineFilterChange,this)),$(document).on("click",".card--user button.card__tags",$.proxy(this.onEditTagsClick,this)),$(document).on("click",".tags .tag, .tag-cloud-result .tag",$.proxy(this.onTagClick,this)),$(document).on("click",".bootstrap-tagsinput span.tag",$.proxy(this.onRemovableTagClick,this)),$(document).on("click",".tags__view__container .btn-close",$.proxy(this.onEditTagsCloseClick,this)),$(document).on("typeahead:render",".card--user form input.tt-input",$.proxy(this.enableEscExit,this,"render")),$(document).on("typeahead:open",".card--user form input.tt-input",$.proxy(this.enableEscExit,this,"open")),$(document).on("typeahead:close",".card--user form input.tt-input",$.proxy(this.enableEscExit,this,"close")),$(document).on("typeahead:idle",".card--user form input.tt-input",$.proxy(this.enableEscExit,this,"idle")),$(document).on("keyup",".card--user form input.tt-input",$.proxy(this.closeTagsEditBox,this)),$(document).on("blur",".card__tags__container.active",$.proxy(this.onEditTagsCloseBlur,this)),$(document).on("mousedown touchstart",".card__tags__container.active",$.proxy(this.disableCloseBlur,this)),$(document).on("click",".fcx-results-location-name",$.proxy(this.onLocationClick,this)),$(document).on("keyup","#fcx-friends-search-input",$.proxy(this.onKeyupEnter,this)),$(document).on("typeahead:select","#fcx-friends-search-input",$.proxy(this.submitSearch,this)),$(document).on("click","#fcx-more-tags",$.proxy(this.toggleHiddenTags,this)),$(document).on("fcx:pagination:paginate",$.proxy(this.onPaginationSelect,this)),this.setTagsEvents()},l.prototype.onKeyupEnter=function(t){13===t.keyCode&&this.submitSearch()},l.prototype.submitSearch=function(){$("#fcx-friends-search-input .tt-menu").removeClass("tt-open").hide(),$("#fcx-friends-search-input").blur().focus().blur(),$("form.fcx-friend-search").trigger("submit")},l.prototype.getBuddies=function(){var e=this;this.ajax(this.buddiesUrl).done($.proxy(function(t){e.buddies=t,e.initializeBuddiesTypeahead()},this))},l.prototype.ajax=function(t,e,i){var o=arguments.length<=1||void 0===e?{}:e,n=arguments.length<=2||void 0===i?"POST":i;return $.ajax(t,{type:n,data:o,dataType:"json"})},l.prototype.initializeBuddiesTypeahead=function(){$("#fcx-friends-search-input").typeahead("destroy").typeahead({hint:!1,highlight:!1,cache:!1,minLength:1},{async:!0,source:this.getBuddiesSource()})},l.prototype.getBuddiesSource=function(){return $.proxy(function(t,e){var i=[],o=new RegExp("(^|\\s)+"+t,"i"),n=this.buddies[this.activeBuddyRelation];$.each(n,function(t,e){o.test(e)&&i.push(e)}),e(i)},this)},l.prototype.setTagsEvents=function(){this.$tagsInputs.on("beforeItemAdd",$.proxy(this.sanitizeTag,this)),this.$tagsInputs.on("itemAdded",$.proxy(this.saveTag,this)),this.$tagsInputs.on("beforeItemRemove",$.proxy(this.removeTag,this))},l.prototype.enableEscExit=function(t,e){e.preventDefault(),"close"===t?setTimeout($.proxy(function(){this.enabledCloseByEsc=!0},this),150):"open"===t&&!1===$(e.currentTarget).nextAll(".tt-menu").is(":visible")?this.enabledCloseByEsc=!0:this.enabledCloseByEsc=!1},l.prototype.closeTagsEditBox=function(t){27===t.keyCode&&!0===this.enabledCloseByEsc&&$(t.currentTarget).parents(".card__tags__container").removeClass("active")},l.prototype.setInputTagsOptions=function(){this.$tagsInputs.tagsinput({tagClass:"btn btn-primary btn-sm fcx-tag",typeaheadjs:[{minLength:1,hint:!1,highlight:!0,cache:!1,limit:10},{async:!0,source:this.getSource()}]})},l.prototype.toggleHiddenTags=function(t){t.preventDefault(),$("#tag-cloud-result").toggleClass("opened"),$(t.currentTarget).blur()},l.prototype.updateTagCloud=function(t){if(arguments.length<=0||void 0===t||!t||(this.filteredTags=$("#search-result").data("filtered-tags")),void 0!==this.filteredTags){$("#fcx-more-tags").toggle(10<this.filteredTags.length);var i=$(".fcx-tag-template").find("span"),e=this.filteredTags.slice(0,10),o=this.filteredTags.slice(10),n=$(".tag-cloud-result");n.html(""),$(e).each($.proxy(function(t,e){n.append($(i).clone().text(e))},this)),0<o.length&&(n.append('<span class="hidden-tags" />'),$(o).each($.proxy(function(t,e){n.find(".hidden-tags").append($(i).clone().text(e))},this))),n.find(".fcx-tag").each(function(t,e){var i=$(e).text().trim().toLowerCase(),o=$("#fcx-friends-search-input").val().toLowerCase();$(e).removeClass("btn-primary").html("").text(i),i===o&&$(e).addClass("btn-primary").html(i+$(".fcx-tag-template-remove").html().trim())})}},l.prototype.getSource=function(){return $.proxy(function(t,e){var i=[],o=new RegExp(t,"i"),n=this.tags,s=$(".card__tags__container.active .fcx-tags-input").val().split(",");$.each(n,function(t,e){$.inArray(e,s)<0&&o.test(e)&&i.push(e)}),e(i)},this)},l.prototype.refreshTagsOptions=function(){this.$tagsInputs=$(".fcx-tags-input"),this.setInputTagsOptions(),this.setTagsEvents()},l.prototype.sanitizeTag=function(t){var e=$(t.currentTarget),i=t.item;e.tagsinput("input").typeahead("close"),e.tagsinput("input").typeahead("val",""),t.options&&t.options.preventPost||(t.cancel=!0,this.sanitizeTagAjax(i).done($.proxy(function(t){""!==t.tag&&e.tagsinput("add",t.tag,{preventPost:!0})},this)))},l.prototype.sanitizeTagAjax=function(t){return $.ajax(this.tagSanitizeUrl,{type:"POST",data:{tag:t}})},l.prototype.saveTag=function(t){var e=$(t.currentTarget),i=e.data("buddy"),o=t.item;$.inArray(o,this.tags)<0&&this.tags.push(o),$.inArray(o,this.filteredTags)<0&&(this.filteredTags.push(o),this.updateTagCloud()),this.saveTagAjax(o,i).done($.proxy(function(t){!1===t.success?e.tagsinput("remove",t.tag,{preventPost:!0}):this.updateTagsView(e)},this))},l.prototype.saveTagAjax=function(t,e){return $.ajax(this.tagSubmitUrl,{type:"POST",data:{tag:t,buddy:e}})},l.prototype.updateTagsView=function(t){var i=t.parents(".tags__view__container").find(".tags"),e=t.val().split(",");i.html(""),$(e).each(function(t,e){""!==(e=e.trim())&&i.append('<span class="tag btn btn-primary btn-sm fcx-tag">'+e+"</span>")})},l.prototype.removeTag=function(t){t.preventDefault();var e=$(t.currentTarget),i=e.data("buddy"),o=t.item;t.options&&t.options.preventPost||(t.cancel=!0)===this.removeTagByClick&&(this.removeTagByClick=!1,this.removeTagAjax(o,i).done($.proxy(function(t){!0===t.success&&(e.tagsinput("remove",o,{preventPost:!0}),this.updateTagsView(e))},this)))},l.prototype.removeTagAjax=function(t,e){return $.ajax(this.tagRemoveUrl,{type:"POST",data:{tag:t,buddy:e}})},l.prototype.getClassName=function(){return"ContactsResult"},l.prototype.onEditTagsClick=function(t){t.preventDefault(),$(".card__tags__container").removeClass("active"),$(t.currentTarget).parents(".card--user").find(".card__tags__container").addClass("active").find("input.tt-input").focus()},l.prototype.onEditTagsCloseClick=function(t){t.preventDefault(),$(t.currentTarget).parents(".card__tags__container").removeClass("active")},l.prototype.disableCloseBlur=function(){this.enabladCloseByBlur=!1},l.prototype.onEditTagsCloseBlur=function(){!0===this.enabladCloseByBlur&&$(".card__tags__container").removeClass("active"),this.enabladCloseByBlur=!0,setTimeout($.proxy(function(){$(".card__tags__container.active input.tt-input").focus()}),250)},l.prototype.onTagClick=function(t){t.preventDefault();var e=$(t.currentTarget).text();0<$(t.currentTarget).find('[data-role="remove"]').length&&(e=""),this.$searchInput.val(e),$("form.fcx-friend-search").trigger("submit")},l.prototype.onLocationClick=function(t){t.preventDefault();var e=$(t.currentTarget).text();this.$searchInput.val($.trim(e)),$("form.fcx-friend-search").trigger("submit")},l.prototype.onRemovableTagClick=function(t){t.preventDefault(),"remove"===$(t.target).data("role")?(this.removeTagByClick=!0,$(t.currentTarget).parents("form").find("input.fcx-tags-input").tagsinput("remove",$(t.currentTarget).text())):this.onTagClick(t)},l.prototype.onTabSelect=function(t){t.preventDefault();var e=$(t.currentTarget).attr("href");$(".nav-tabs li").removeClass("active"),$(t.currentTarget).blur().parent("li").addClass("active");var i=$("form.fcx-friend-search");i.find("input").val(""),i.find('select[name="sort[]"]').val("contacts_desc"),i.find('input[name="is_online"]').prop("checked",!1),$("#fcx-friends-search-input").val(""),this.activeBuddyRelation=$(".fcx-section-header-tabs .nav-tabs li.active a").attr("data-id"),this.initializeBuddiesTypeahead(),this.setPage(null),this.setSearch(null),this.onButtonClick(null,e)},l.prototype.onSearchSubmit=function(t){t.preventDefault();var e=location.pathname,i=$(t.currentTarget).find("input#fcx-friends-search-input").val(),o=$(t.currentTarget).find("option:selected").attr("value"),n=$(t.currentTarget).find("input.fcx-friends-online").is(":checked");this.setSearch(i),this.onFilterChange(e,i,o,n)},l.prototype.onSortChange=function(t){t.preventDefault();var e=location.pathname,i=$(t.currentTarget).parents("form").find("input#fcx-friends-search-input").val(),o=$(t.currentTarget).find("option:selected").attr("value"),n=$(t.currentTarget).parents("form").find("input.fcx-friends-online").is(":checked");this.setSort(o),this.onFilterChange(e,i,o,n)},l.prototype.onOnlineFilterChange=function(t){var e=location.pathname,i=$(t.currentTarget).parents("form").find("input#fcx-friends-search-input").val(),o=$(t.currentTarget).parents("form").find("option:selected").attr("value"),n=$(t.currentTarget).is(":checked");this.onFilterChange(e,i,o,n)},l.prototype.onFilterChange=function(e,t,i,o){""!==t?e=e+"?search="+t+"&sort="+i:""!==i&&(e=e+"?sort="+i),!0!==o||""===t&&""===i?!0===o&&(e+="?is_online=online"):e+="&is_online=online",this.processRequest(e).done($.proxy(function(t){this.onAjaxDone(t,e,!0)},this))},l.prototype.setActiveTabByUrl=function(t){var e="friends";-1!==t.indexOf("contacts/follows")&&(e="follow"),-1!==t.indexOf("contacts/followers")&&(e="followers"),-1!==t.indexOf("contacts/ignores")&&(e="ignores"),$(".nav-tabs li").removeClass("active"),$(".nav-tabs").find('a[data-id="'+e+'"]').parent("li").addClass("active")},l.prototype.onPopState=function(t,e){t.preventDefault(),this.setActiveTabByUrl(e.url);var i=new RegExp("[\\?&]page=([^&#]*)").exec(e.url);this.setPage(i);var o=new RegExp("[\\?&]search=([^&#]*)").exec(e.url);this.setSearch(o);var n=new RegExp("[\\?&]sort=([^&#]*)").exec(e.url);this.setSort(n);var s=new RegExp("[\\?&]is_online=([^&#]*)").exec(e.url);this.setOnlineFilter(s);var a=$("form.fcx-friend-search");a.find("input").val(this.search),a.find('select[name="sort[]"]').val(null===this.sort?"contacts_desc":this.sort),null===this.isOnlineFilter?a.find('input[name="is_online"]').prop("checked",!1):a.find('input[name="is_online"]').prop("checked",!0),this.onButtonClick(null,void 0,!1)},l.prototype.onPaginationSelect=function(t,e){var i=["",e.page];this.setPage(i),this.onButtonClick(null)},l.prototype.onPagination=function(t){if(t.preventDefault(),!$(t.target).parents("li").hasClass("disabled")){this.disablePagination();var e=new RegExp("[\\?&]page=([^&#]*)").exec($(t.currentTarget).attr("href"));this.setPage(e);var i=new RegExp("[\\?&]search=([^&#]*)").exec($(t.currentTarget).attr("href"));this.setSearch(i);var o=new RegExp("[\\?&]sort=([^&#]*)").exec($(t.currentTarget).attr("href"));this.setSort(o);var n=new RegExp("[\\?&]is_online=([^&#]*)").exec($(t.currentTarget).attr("href"));this.setOnlineFilter(n),this.onButtonClick(null)}},l.prototype.disablePagination=function(){$(".fcx-pagination .pagination li").addClass("disabled")},l.prototype.setPage=function(t){null!==t&&$.isArray(t)&&(t=parseInt(t[1],10)),isNaN(t)&&(t=1),this.page=t},l.prototype.setSearch=function(t){null!==t&&$.isArray(t)&&(t=t[1]),this.search=t},l.prototype.setSort=function(t){null!==t&&$.isArray(t)&&(t=t[1]),this.sort=t},l.prototype.setOnlineFilter=function(t){this.isOnlineFilter=t},l.prototype.onButtonClick=function(t,e,i){var o=arguments.length<=2||void 0===i||i,n=location.pathname;t&&(t.preventDefault(),t.stopPropagation()),void 0!==e&&(n=e),1<this.page&&null!==this.search&&null!==this.sort?n=n+"?page="+this.page+"&search="+this.search+"&sort="+this.sort:1<this.page&&null!==this.search?n=n+"?page="+this.page+"&search="+this.search:1<this.page&&null!==this.sort?n=n+"?page="+this.page+"&sort="+this.sort:1<this.page?n=n+"?page="+this.page:null!==this.search&&null!==this.sort?n=n+"?search="+this.search+"&sort="+this.sort:null!==this.sort&&(n=n+"?sort="+this.sort),null!==this.isOnlineFilter&&(1<this.page||null!==this.search||this.sort)?n+="&is_online=online":null!==this.isOnlineFilter&&(n+="?is_online=online"),this.processRequest(n).done($.proxy(function(t){this.onAjaxDone(t,n,o)},this))},l.prototype.processRequest=function(t){for(this.addLoadingAnimation();0<this.xhrPool.length;)this.xhrPool.pop().abort();var e=$.ajax(t,{type:"GET"});return this.xhrPool.push(e),e},l.prototype.onAjaxDone=function(t,e,i){var o=arguments.length<=2||void 0===i||i;$("#search-result").replaceWith(t),this.removeLoadingAnimation(),o&&this.updateUrl(e),0<$(".selectpicker").length&&$(".selectpicker").selectpicker("refresh"),this.refreshTagsOptions(),this.updateTagCloud(!0),this.updateAnonymousFollowersDifference(),this.reloadAds()},l.prototype.reloadAds=function(){this.advertisement.reloadAds("persoenlicher_bereich")},l.prototype.updateAnonymousFollowersDifference=function(){if("followers"===this.activeBuddyRelation){var t=parseInt($("#fcx-user-count-followers").text().replace(/\D/,""),10)-parseInt($("#search-result").attr("data-result-total"),10);if(0<t){var e=$("#fcx-anonymous-followers-difference"),i=$(".fcx-template",e).find(1==t?".singular":".plural").text().replace("%count%",t);$(".fcx-text",e).text(i),e.removeClass("hidden")}}},l.prototype.updateUrl=function(t){this.browserNavigation.addUrl(t)},l.prototype.addLoadingAnimation=function(){$("body,html").scrollTop(0),!1===this.loadingAnimation&&($("#search-result").addClass("hidden"),$(".fcx-load-placeholder").addClass("fcx-min-height").append($('<div class="fcx-spinner"/>').append("<div/>")),this.loadingAnimation=!0)},l.prototype.removeLoadingAnimation=function(){$(".fcx-load-placeholder").removeClass("fcx-min-height").html(""),this.loadingAnimation=!1},l.prototype.initAdvertisement=function(){"object"==typeof this.fc.advertisement?this.advertisement=this.fc.advertisement:"function"==typeof this.fc.Advertisement&&(this.advertisement=new a.default)},l);function l(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),this.fc=t}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Contacts=r,e.exports=i.default},{"./Advertisement.js":2,"./BrowserNavigation.js":6,"./PaginationPicker.js":58}],12:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n=o(t("../ImageDropper.js")),s=o(t("./ContestUploadCompleter.js")),a=o(t("./ContestUploadSettings.js")),r=o(t("../Upload/UsageBar.js")),l=o(t("../BrowserExitAlert.js")),c=(d.prototype.execute=function(){$("#fcx-uploader").length&&(this.init(),this.bindEvents(),this.usageBar.update(),this.usageBar.setupInfoTooltip(),this.$container.focus())},d.prototype.init=function(){this.enableTimeout=!1,this.xhrPool=[],this.$uploader=$("#fcx-uploader"),this.$selectImagesBtn=$("#fcx-select-images-btn"),this.$deleteImagesBtn=$("#fcx-delete-images-btn"),this.$uploadToFolderSelect=$('select[name="folder"]',"#fileupload"),this.$uploadToFolderBtn=$("+ .bootstrap-select > button",this.$uploadToFolderSelect),this.$finishUploadBtn=$("#fcx-finish-upload"),this.$finishUploadBtnBottom=$("#fcx-finish-upload-bottom"),this.$uploadAddButton=$(".fileinput-button"),this.$limitOverallExceeded=$(".fcx-limit-overall-exceeded",this.$uploader),this.$remainingCurrentWeekExceeded=$(".fcx-remaining_current_week-exceeded",this.$uploader),this.$uploadToFolderBtn.removeAttr("title").tooltip({placement:"top",container:"body"}),this.limitOverall="unlimited"!==this.$uploader.data("limit_overall")&&parseInt(this.$uploader.data("limit_overall"),10),this.remainingOverall="unlimited"!==this.$uploader.data("remaining_overall")&&parseInt(this.$uploader.data("remaining_overall"),10),this.maxFiles=!1===this.remainingOverall?this.MAX_FILES_PER_UPLOAD:Math.min(this.MAX_FILES_PER_UPLOAD,this.remainingOverall),this.remainingCurrentWeek=parseInt(this.$uploader.data("remaining_current_week"),10),this.browserExitAlert=new l.default($.proxy(this.isPageDirty,this),$("#fcx-settings").data("exit-alert-message")),this.uploadSettings=new a.default($("#fcx-settings")),this.imageDropper=new n.default($("#fileupload"),{maxNumberOfFiles:this.maxFiles}),this.uploadCompleter=new s.default(this.imageDropper),this.usageBar=new r.default($("#fcx-options-bar .progress"),this.imageDropper,this.remainingCurrentWeek),this.usageBar.setupInfoTooltip(),this.uploadSettings.injectImageDropper(this.imageDropper,this.uploadCompleter),1===parseInt(this.MAX_FILES_PER_UPLOAD,10)&&$("#fileupload").off("click","#fcx-files .dz-success")},d.prototype.bindEvents=function(){this.$deleteImagesBtn.on("click",$.proxy(this.deleteImages,this)),this.$finishUploadBtn.on("click",$.proxy(this.finishUpload,this)),this.$finishUploadBtnBottom.on("click",$.proxy(this.finishUpload,this)),$(document).on("fcx:upload-settings:publish-state-changed",$.proxy(this.updatePublishState,this)),$(document).on("fcx:image-dropper:demand-update-settings",$.proxy(this.updateSettings,this)),$(document).on("fcx:image-dropper:demand-update-settings",$.proxy(this.showUpgradeNotice,this)),$(document).on("fcx:image-dropper:number-of-images-changed",$.proxy(this.onNumberOfImagesChanged,this)),$(document).on("fcx:image-dropper:file-added",$.proxy(this.enable,this)),$(document).on("fcx:image-completer:usagebar-require-update",$.proxy(this.updateQuotaLimits,this)),$(document).on("fcx:image-dropper:upload-image-process-failed",$.proxy(this.onUploadImageProcessFailed,this)),$(document).on("fcx:photo-upload-contest-completer:demand-show-errors",$.proxy(function(){this.browserExitAlert.allow()},this))},d.prototype.isPageDirty=function(){return this.$uploader.hasClass("active")},d.prototype.updateQuotaLimits=function(t,e){this.limitOverall="unlimited"!==e.quota.limit_overall&&parseInt(e.quota.limit_overall,10),this.remainingOverall="unlimited"!==e.quota.remaining_overall&&parseInt(e.quota.remaining_overall,10),this.maxFiles=!1===this.remainingOverall?this.MAX_FILES_PER_UPLOAD:Math.min(this.MAX_FILES_PER_UPLOAD,this.remainingOverall),this.remainingCurrentWeek=parseInt(e.quota.remaining_current_week,10),this.usageBar.setQuota(e),this.updateSettings()},d.prototype.onUploadImageProcessFailed=function(){this.uploadCompleter.showModal("fail-upload")},d.prototype.onNumberOfImagesChanged=function(){var t=this.imageDropper.numberOfImages,e=this.imageDropper.numberOfAllImages;!1!==this.remainingOverall&&this.remainingOverall<=t&&this.remainingOverall<=this.MAX_FILES_PER_UPLOAD?(this.$limitOverallExceeded.fadeIn(500),this.$uploadAddButton.addClass("disabled")):(this.$limitOverallExceeded.fadeOut(500),this.$uploadAddButton.removeClass("disabled")),t===parseInt(this.MAX_FILES_PER_UPLOAD,10)?this.$uploadAddButton.addClass("disabled"):this.$uploadAddButton.removeClass("disabled"),this.updateSettings(),0===e?this.disable():this.enable(),0<t&&(this.$finishUploadBtn.removeAttr("disabled"),this.$finishUploadBtnBottom.removeAttr("disabled"))},d.prototype.enable=function(){this.$uploader.hasClass("inactive")&&(window.clearTimeout(this.enableTimeout),this.enableTimeout=window.setTimeout($.proxy(function(){this.$uploader.removeClass("inactive").addClass("active").find("#fcx-settings, #fcx-options-bar").fadeIn(300,$.proxy(function(){this.uploadSettings.loadTagSuggestions(),this.$uploader.addClass("active")},this))},this),200))},d.prototype.disable=function(){window.clearTimeout(this.enableTimeout),this.$uploader.hasClass("inactive")||(this.$finishUploadBtn.attr("disabled","disabled"),this.$finishUploadBtnBottom.attr("disabled","disabled"),this.$uploader.removeClass("active").addClass("inactive").find("#fcx-settings, #fcx-options-bar").hide())},d.prototype.finishUpload=function(){this.browserExitAlert.disallow(),this.uploadSettings.resetErrors(),this.uploadCompleter.execute()},d.prototype.deleteImages=function(t){if(t.preventDefault(),!$(t.target).hasClass("disabled")){var e=1===this.imageDropper.numberOfSelectedImages?$(t.target).attr("data-confirm-text-single"):$(t.target).attr("data-confirm-text");this.imageDropper.showConfirmModal(e).done($.proxy(function(){this.imageDropper.getSelectedImages().remove(),this.onNumberOfImagesChanged(),this.$limitOverallExceeded.hide(),this.$remainingCurrentWeekExceeded.hide(),0===this.imageDropper.numberOfImages&&(this.imageDropper.selectedFirstImage=!0)},this))}},d.prototype.showUpgradeNotice=function(){var t=this.imageDropper.numberOfSelectedImages,e=this.imageDropper.numberOfPublishedImages,i=this.imageDropper.numberOfNotSelectedPublishedImages,o=this.imageDropper.numberOfSelectedPublishedImages;t>this.remainingCurrentWeek||i>=this.remainingCurrentWeek||e-i+(t-o)>this.remainingCurrentWeek||t-o+e>this.remainingCurrentWeek?$(".fcx-weekly-limits label.fcx-checkbox").fadeOut(250,$.proxy(function(){this.$remainingCurrentWeekExceeded.fadeIn(250)},this)):this.$remainingCurrentWeekExceeded.fadeOut(250,function(){$(".fcx-weekly-limits label.fcx-checkbox").fadeIn(250)})},d.prototype.updatePublishState=function(t,e){var i=this.imageDropper.numberOfSelectedImages,o=this.imageDropper.numberOfNotSelectedPublishedImages;(!1===e||!0===e&&o+i<=this.remainingCurrentWeek)&&(this.imageDropper.setSelectedImagesMetaData("publish",e?"1":"0"),e&&this.imageDropper.getPublishImagesIcons().tooltip())},d.prototype.updateSettings=function(){var t=this.imageDropper.getSelectedImages(),e=this.imageDropper.getImages();this.uploadSettings.showErrors(),0===t.length?(this.uploadSettings.disableContent(),this.uploadSettings.clearContent(),this.$deleteImagesBtn.addClass("disabled").attr("data-original-title",this.$deleteImagesBtn.attr("data-title-disabled")),this.$uploadToFolderBtn.addClass("disabled").removeAttr("title").attr("data-original-title",this.$uploadToFolderSelect.attr("data-title-disabled"))):(this.uploadSettings.enableContent(),this.uploadSettings.updateContent(),this.$deleteImagesBtn.removeClass("disabled").attr("data-original-title",this.$deleteImagesBtn.attr("data-title-enabled")),this.$uploadToFolderBtn.removeClass("disabled").removeAttr("title").attr("data-original-title",this.$uploadToFolderSelect.attr("data-title-enabled"))),0===e.length?this.$selectImagesBtn.addClass("disabled").find("i").removeClass("fa-check-square").addClass("fa-square"):this.$selectImagesBtn.removeClass("disabled").find("i").toggleClass("fa-check-square",t.length===e.length).toggleClass("fa-square",t.length!==e.length)},d);function d(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),this.MAX_FILES_PER_UPLOAD=$("#fcx-uploader").data("contest_uploads_remaining"),this.$container=t}i.default=c,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.ContestUpload=c,e.exports=i.default},{"../BrowserExitAlert.js":5,"../ImageDropper.js":39,"../Upload/UsageBar.js":149,"./ContestUploadCompleter.js":13,"./ContestUploadSettings.js":14}],13:[function(t,e,i){"use strict";i.__esModule=!0;var o,n=t("../UniversalAnalyticsEvents.js"),s=(o=n)&&o.__esModule?o:{default:o},a=(r.prototype.init=function(){this.maxTagsPerPhoto=$("#fcx-uploader").data("max-tags-per-photo"),this.savemetaPath=$("#fcx-uploader").data("savemeta-path"),this.validatemetaPath=$("#fcx-uploader").data("validatemeta-path"),this.quotaLimitsPath=$("#fcx-uploader").data("quotalimits-path"),this.errorMessages=$("#fcx-settings").data("error-messages"),this.redirectPath=$("#fcx-uploader").data("redirect-path"),this.postUploadPath=$("#fcx-uploader").data("post-upload-path"),this.modal=$("#fcx-modal-upload"),this.universalAnalyticsEvents=new s.default},r.prototype.execute=function(){this.step1()},r.prototype.step1=function(){this.validateImages($.proxy(this.validateImageClientSide,this)).done($.proxy(function(){0===this.imageDropper.numberOfMetaErrorImages?this.step2():this.someImagesFailed("fail-meta")},this))},r.prototype.step2=function(){this.showModal("init"),this.validateImages($.proxy(this.validateImageServerSide,this)).done($.proxy(function(){0===this.imageDropper.numberOfMetaErrorImages?this.step3():this.someImagesFailed("fail-meta")},this))},r.prototype.step3=function(){this.showModal("init"),this.validateImages($.proxy(this.validateImageServerSideAndSaveData,this),this.onDoneStep3,this.onFailStep3).done($.proxy(function(){0===this.imageDropper.numberOfUploadErrorImages?this.allImagesDone():this.someImagesFailed("fail-common"),this.postUpload()},this))},r.prototype.allImagesDone=function(){this.triggerUniversalAnaylticsEvent(),this.showModal("done"),window.setTimeout($.proxy(function(){location.href=this.redirectPath},this),3e3)},r.prototype.triggerUniversalAnaylticsEvent=function(){var t=!1;1<this.imageDropper.numberOfUploadSuccessImages?t="Aktivitäten;Multiupload;;"+this.imageDropper.numberOfUploadSuccessImages:1===this.imageDropper.numberOfUploadSuccessImages&&(t="Aktivitäten;Upload;"+this.imageDropper.getUploadSuccessImages().eq(0).attr("data-tags").replace(/^(\[(.+?)\])?.*/,"$2")+";1"),!1!==t&&this.universalAnalyticsEvents.triggerEvent(t)},r.prototype.someImagesFailed=function(t){$("#fcx-upload").focus(),this.imageDropper.unselectImages(),this.imageDropper.getMetaErrorImages().eq(0).addClass("selected"),this.updateQuotaLimits(),this.showModal(t),$(document).trigger("fcx:image-dropper:number-of-images-changed"),$(document).trigger("fcx:photo-upload-contest-completer:demand-show-errors")},r.prototype.validateImages=function(n,s,a){var r=[];return this.imageDropper.getImages().removeClass("dz-meta-error selected").attr("data-has-meta-error","0").attr("data-meta-errors",""),this.imageDropper.getImages().each($.proxy(function(t,e){var i=$(e).attr("data-uuid");if(36===i.length){var o=n(this.getImageMetaData($(e)),i);o.done($.proxy(this.onDone,this,i)).fail($.proxy(this.onFail,this,i)),"function"==typeof s&&o.done($.proxy(s,this,i)),"function"==typeof a&&o.fail($.proxy(a,this,i)),r.push(o)}},this)),$.when.apply($,$.map(r,function(t){return t.then(null,function(){return $.Deferred().resolve()})}))},r.prototype.onDone=function(t){var e=this.imageDropper.getImageByUuid(t);!1!==e&&e.attr("data-touched","1").attr("data-has-meta-error","0").attr("data-meta-errors","").removeClass("dz-meta-error")},r.prototype.onFail=function(t,e){var i=this.imageDropper.getImageByUuid(t);!1!==i&&(i.attr("data-touched","1").attr("data-has-meta-error","1").attr("data-meta-errors","").addClass("dz-meta-error"),void 0!==e.responseJSON&&i.attr("data-meta-errors",JSON.stringify(e.responseJSON)))},r.prototype.onDoneStep3=function(t){var e=this.imageDropper.getImageByUuid(t);!1!==e&&e.removeClass("dz-success").addClass("dz-done dz-upload-success")},r.prototype.onFailStep3=function(t){var e=this.imageDropper.getImageByUuid(t);!1!==e&&e.removeClass("dz-success dz-meta-error").addClass("dz-done dz-upload-error")},r.prototype.validateImageClientSide=function(t,e){var i={};t.title=t.title.trim(),t.description=t.description.trim();var o=$('#fcx-settings-form input[name="title"]').val().trim(),n=$('#fcx-settings-form textarea[name="description"]').val().trim(),s=this.imageDropper.getImageByUuid(e);return""===t.category&&(i.category=this.errorMessages.categoryEmpty),""===t.section&&(i.section="section missing"),""===t.title&&(i.title=this.errorMessages.uploadTitleNotBlank),""!==t.title&&t.title.length<2&&(i.title=this.errorMessages.uploadLengthMin),""!==t.title&&100<t.title.length&&(i.title=this.errorMessages.uploadLengthMax),""!==o&&o!==this.stripTags(o)&&(i.title=this.errorMessages.uploadHtmlOrJs),""!==n&&n!==this.stripTags(n)&&(i.description=this.errorMessages.uploadHtmlOrJs),this.imageDropper.getNumberOfTags(s)>this.maxTagsPerPhoto&&(i.tags=this.errorMessages.tooManyTags),t.mime_type&&"image/jpeg"!==t.mime_type&&(i.mimeType=!0,s.remove(),$(document).trigger("fcx:image-dropper:number-of-images-changed"),0<this.imageDropper.numberOfAllImages&&this.imageDropper.selectFirstImage()),$.Deferred(function(t){$.isEmptyObject(i)?t.resolve({uuid:e},"ok",{status:200}):t.reject({status:400,responseJSON:{errors:i}})}).promise()},r.prototype.validateImageServerSide=function(t,e){return this.sendMeta(this.validatemetaPath+"/"+e,t)},r.prototype.validateImageServerSideAndSaveData=function(t,e){return this.sendMeta(this.savemetaPath+"/"+e,t)},r.prototype.sendMeta=function(t,e){return $.ajax(t,{type:"post",dataType:"json",processData:!1,contentType:"application/json",data:JSON.stringify(e)})},r.prototype.postUpload=function(){$.ajax({url:this.postUploadPath,method:"POST"})},r.prototype.getImageMetaData=function(t){var e={};""!==t.attr("data-exif")&&(e=$.parseJSON(t.attr("data-exif")));var i=[];return""!==t.attr("data-tags")&&(i=t.attr("data-tags").match(/([^\[\]]+)/g)),{title:t.find(".title").html(),description:t.attr("data-description"),category:t.attr("data-category"),folder_id:t.attr("data-folder"),exif:e,width:parseInt(t.attr("data-width"),10),height:parseInt(t.attr("data-height"),10),section:t.attr("data-section"),tags:i,mime_type:t.attr("data-mime-type"),options:{publish:t.attr("data-publish"),license:t.attr("data-license"),exif_allowed:t.attr("data-exif-allowed"),location_allowed:t.attr("data-location-allowed")}}},r.prototype.updateQuotaLimits=function(){this.getQuotaLimits().done($.proxy(this.updateUsageBar,this))},r.prototype.getQuotaLimits=function(){return $.ajax(this.quotaLimitsPath,{type:"get",dataType:"json"})},r.prototype.updateUsageBar=function(t){$(document).trigger("fcx:image-completer:usagebar-require-update",t)},r.prototype.showModal=function(t){this.modal.find(".modal-content").html(this.modal.find(".fcx-modal-body-template-"+t).html()),this.modal.hasClass("in")||this.modal.modal("show")},r.prototype.stripTags=function(t){return t.replace(/[<>]/gi,"")},r);function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.imageDropper=t,this.init()}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.ContestUploadCompleter=a,e.exports=i.default},{"../UniversalAnalyticsEvents.js":144}],14:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.xhrState=!1,this.$settings=$("#fcx-settings"),this.$settingsOverlay=$(".fcx-settings-overlay"),this.$settingsForm=$("#fcx-settings-form"),this.$tagsInput=$("#fcx-tags-input"),this.$tagsSuggestionTitle=$("#fcx-tags-suggestions-title"),this.$tagsSuggestionContainer=$("#fcx-tags-suggestions"),this.$tagsLatestTitle=$("#fcx-tags-latest-title"),this.$tagsLatestContainer=$("#fcx-tags-latest"),this.$callapsableDivs=$("div.collapse"),this.tagsSuggestionsUrl=this.$tagsSuggestionContainer.data("url"),this.tagSanitizeUrl=this.$tagsInput.data("sanitize-url"),this.preventReloadingTags=!1,this.latestUserTags=[],this.loadLatestTags(),this.setInputTagsOptions()},n.prototype.injectImageDropper=function(t,e){this.imageDropper=t,this.uploadCompleter=e},n.prototype.bindEvents=function(){$(document).on("click","#fcx-tags-suggestions label.btn",$.proxy(this.moveSuggestionTag,this)),$(document).on("click","#fcx-tags-latest label.btn",$.proxy(this.moveLatestTag,this)),this.$callapsableDivs.on("shown.bs.collapse hidden.bs.collapse",$.proxy(this.toggleAngleIcon,this)),$('select[name="category"]',this.$settings).on("change",$.proxy(this.onSelectPickerChange,this,"category")),$('select[name="folder"]',"#fileupload").on("change",$.proxy(this.onSelectPickerChange,this,"folder")),$('select[name="category"]',this.$settings).on("change",$.proxy(this.loadTagSuggestions,this)),$('select[name="license"]',this.$settings).on("change",$.proxy(this.onSelectPickerChange,this,"license")),$('select[name="sale"]',this.$settings).on("change",$.proxy(this.onSelectPickerChange,this,"sale")),$('input[name="title"]',this.$settings).on("change",$.proxy(this.onInputKeyup,this,"title")),$('textarea[name="description"]',this.$settings).on("keyup",$.proxy(this.onInputKeyup,this,"description")),$('input[name="exif_allowed"]',this.$settings).on("change",$.proxy(this.onCheckboxChange,this,"exif-allowed")),$('input[name="location_allowed"]',this.$settings).on("change",$.proxy(this.onCheckboxChange,this,"location-allowed")),$(document).on("fcx:upload-settings:data-changed",$.proxy(this.onDataChanged,this)),$(document).on("fcx:image-dropper:upload-queue-complete",$.proxy(this.validate,this)),$(document).on("fcx:upload-completer:step-1-failed",$.proxy(this.onStep1Failed,this)),$(document).on("fcx:image-dropper:selection-changed",$.proxy(this.onStep1Failed,this)),$('input[name="publish"]',this.$settings).on("change",function(t){$(document).trigger("fcx:upload-settings:publish-state-changed",$(t.currentTarget).is(":checked"))}),this.$tagsInput.on("beforeItemAdd",$.proxy(this.sanitizeTag,this)),this.$tagsInput.on("itemAdded",$.proxy(this.addTag,this)),this.$tagsInput.on("itemRemoved",$.proxy(this.removeTag,this))},n.prototype.onDataChanged=function(){this.validate(),this.markSelectedErrorImages(),this.showErrors()},n.prototype.onStep1Failed=function(){this.markSelectedErrorImages(),this.showErrors()},n.prototype.onSelectPickerChange=function(t,e){$(e.currentTarget).siblings(".bootstrap-select").find("button").blur(),this.imageDropper.setSelectedImagesMetaData(t,$(e.currentTarget).find("option:selected").val()),$(document).trigger("fcx:upload-settings:data-changed")},n.prototype.onInputKeyup=function(t,e){this.imageDropper.setSelectedImagesMetaData(t,$(e.currentTarget).val()),$(document).trigger("fcx:upload-settings:data-changed")},n.prototype.onCheckboxChange=function(t,e){this.imageDropper.setSelectedImagesMetaData(t,$(e.currentTarget).is(":checked")?"1":"0")},n.prototype.setInputTagsOptions=function(){this.$tagsInput.tagsinput({onTagExists:$.proxy(this.onTagExists,this),tagClass:"btn btn-primary btn-sm fcx-tag"})},n.prototype.onTagExists=function(t){this.preventReloadingTags=!0;var e={item:t};this.addTag(e),this.updateContent()},n.prototype.moveTag=function(t){t.preventDefault();var e=$(t.target),i=e.text().trim();this.$tagsInput.tagsinput("add",i,{preventPost:!0}),e.remove()},n.prototype.moveLatestTag=function(t){this.preventReloadingTags=!0,this.moveTag(t),0===this.$tagsLatestContainer.children().length&&this.toggleTagLatest(!1)},n.prototype.moveSuggestionTag=function(t){var e=this.imageDropper.getSelectedImages(),s=$(t.target).text().trim();e.each($.proxy(function(t,e){var i=$(e).attr("data-suggestions-tags");if(this.isJsonString(i)){var o=JSON.parse(i),n=o.indexOf(s);-1<n&&o.splice(n,1),$(e).attr("data-suggestions-tags",JSON.stringify(o))}},this)),this.preventReloadingTags=!0,this.moveTag(t),0===this.$tagsSuggestionContainer.children().length&&(this.toggleTagSuggestions(!1),this.loadTagSuggestions())},n.prototype.sanitizeTag=function(t){var e=t.item;t.options&&t.options.preventPost||$.ajax(this.tagSanitizeUrl,{type:"POST",data:{tag:e}}).done($.proxy(function(t){this.$tagsInput.tagsinput("remove",e,{preventPost:!0}),""!==t.tag&&this.$tagsInput.tagsinput("add",t.tag,{preventPost:!0})},this))},n.prototype.addTag=function(e){var t=this.imageDropper.getSelectedImages();e.options&&e.options.preventDataUpdate||(t.each(function(){var t="["+e.item+"]";$(this).attr("data-tags").indexOf(t)<0&&$(this).attr("data-tags",$(this).attr("data-tags")+t)}),!1===this.preventReloadingTags&&this.loadTagSuggestions(),this.preventReloadingTags=!1),$(document).trigger("fcx:upload-settings:data-changed")},n.prototype.removeTag=function(t){this.imageDropper.getSelectedImages().each(function(){$(this).attr("data-tags",$(this).attr("data-tags").replace("["+t.item+"]",""))}),$(document).trigger("fcx:upload-settings:data-changed")},n.prototype.loadLatestTags=function(){this.checkXhrState(),this.xhrState=$.ajax(this.tagsSuggestionsUrl,{type:"GET",context:this}).done(function(t){""!==t&&t.success&&(this.latestUserTags=t.tagSuggestions,this.toggleTagLatest(!0),this.displayTags(this.$tagsLatestContainer,t.tagSuggestions))})},n.prototype.loadTagSuggestions=function(){var e=this.imageDropper.getSelectedImages();if(this.checkXhrState(),0===this.imageDropper.numberOfSelectedImages)return!1;this.xhrState=$.ajax(this.tagsSuggestionsUrl+"?"+this.$tagsInput.serialize(),{type:"GET",context:this,data:{category:e.attr("data-category")}}).done(function(t){""!==t&&t.success&&(e.attr("data-suggestions-tags",JSON.stringify(t.tagSuggestions)),this.toggleTagSuggestions(!0),this.displayTags(this.$tagsSuggestionContainer,t.tagSuggestions,!0))})},n.prototype.displayTags=function(o,t,e){arguments.length<=2||void 0===e||!e||o.html(""),$(t).each($.proxy(function(t,e){var i=$("<label/>").addClass("btn btn-primary btn-sm fcx-tag").append("<input/>").prop("type","checkbox").prop("checked",!0).text(e);o.append(i)},this))},n.prototype.checkXhrState=function(){this.xhrState&&(this.xhrState.abort(),this.xhrState=null)},n.prototype.toggleTagSuggestions=function(t){this.$tagsSuggestionTitle.toggle(t),this.$tagsSuggestionContainer.toggle(t)},n.prototype.toggleTagLatest=function(t){this.$tagsLatestTitle.toggle(t),this.$tagsLatestContainer.toggle(t)},n.prototype.updateContent=function(){var i={},o=null,n=[];$('input[name="title"]',this.$settings).val(this.imageDropper.getSelectedImagesCumulatedMetaTitle()),$('textarea[name="description"]',this.$settings).val(this.imageDropper.getSelectedImagesCumulatedMetaData("description","")),$('select[name="category"]',this.$settings).selectpicker("val",this.imageDropper.getSelectedImagesCumulatedMetaData("category",null)),$('input[name="publish"]',this.$settings).prop("checked","1"===this.imageDropper.getSelectedImagesCumulatedMetaData("publish",0)),$('select[name="folder"]',"#fileupload").selectpicker("val",this.imageDropper.getSelectedImagesCumulatedMetaData("folder","")),$('select[name="license"]',this.$settings).selectpicker("val",this.imageDropper.getSelectedImagesCumulatedMetaData("license",null)),$('select[name="sale"]',this.$settings).selectpicker("val",this.imageDropper.getSelectedImagesCumulatedMetaData("sale",null)),this.setCheckboxState($('input[name="exif_allowed"]',this.$settings),"exif-allowed"),this.setCheckboxState($('input[name="location_allowed"]',this.$settings),"location-allowed"),this.imageDropper.getSelectedImages().each(function(t,e){null!==(o=$(e).attr("data-tags").match(/([^\[\]]+)/g))&&$(o).each(function(t,e){i.hasOwnProperty(e)||(i[e]=0),i[e]+=1})}),this.$tagsInput.tagsinput("removeAll"),$.each(i,$.proxy(function(t,e){this.$tagsInput.tagsinput("add",t,{preventDataUpdate:!0,preventPost:!0}),e!==this.imageDropper.numberOfSelectedImages&&($(".fcx-add-tag-filter .tag",this.$settings).filter(function(){return $(this).text()===t}).addClass("partial"),n.push(t))},this)),this.renderTagsBySelectedImages(n)},n.prototype.setCheckboxState=function(t,e){var i=this.imageDropper.getSelectedImagesCumulatedMetaData(e,"mixed");t.prop("checked","1"===i).prop("indeterminate","mixed"===i)},n.prototype.showErrors=function(){this.resetErrors(),this.imageDropper.getSelectedImages().filter('[data-has-meta-error="1"]').filter('[data-touched="1"]').filter(".dz-meta-error").each($.proxy(function(t,e){var i=$(e).attr("data-meta-errors");if(""!==i){var o=$.parseJSON(i);void 0!==o.errors&&$.each(o.errors,$.proxy(function(t,e){var i=$("#fcx-settings-form .fcx-settings-field").filter('[data-field="'+t+'"]'),o=e.split("~");o.length<2&&o.push(o[0]),1<this.imageDropper.numberOfSelectedImages?i.find(".fcx-settings-errormessage span.fcx-message").text(o[1]):i.find(".fcx-settings-errormessage span.fcx-message").text(o[0]),i.addClass("fcx-settings-error")},this))}},this))},n.prototype.markSelectedErrorImages=function(){this.imageDropper.getSelectedImages().removeClass("dz-meta-error").filter('[data-has-meta-error="1"]').addClass("dz-meta-error")},n.prototype.resetErrors=function(){$("#fcx-settings-form .fcx-settings-field").removeClass("fcx-settings-error")},n.prototype.validate=function(){this.imageDropper.getImages().attr("data-has-meta-error","0").attr("data-meta-errors",""),this.imageDropper.getImages().each($.proxy(function(t,e){var i=$(e).attr("data-uuid"),o=$(e);if(o.attr("data-has-meta-error","0").attr("data-meta-errors",""),36===i.length){var n=this.uploadCompleter.getImageMetaData(o);this.uploadCompleter.validateImageClientSide(n,i).fail($.proxy(function(t){o.attr("data-has-meta-error","1"),void 0!==t.responseJSON&&o.attr("data-meta-errors",JSON.stringify(t.responseJSON))},this))}},this))},n.prototype.clearContent=function(){this.$tagsInput.tagsinput("removeAll"),this.$settingsForm.trigger("reset"),$('input[name="title"]',this.$settings).attr("placeholder","Titel"),$('textarea[name="description"]',this.$settings).attr("placeholder","Beschreibung"),$(".btn-group label",this.$settingsForm).removeClass("active"),$(".selectpicker",this.$settingsForm).val(null).selectpicker("refresh")},n.prototype.toggleAngleIcon=function(t){$(t.target).parent().find('a[data-toggle="collapse"] i.icon').toggleClass("fas fa-caret-right fas fa-caret-down")},n.prototype.disableContent=function(){this.resetErrors(),this.$settingsOverlay.removeClass("hidden"),this.$settingsForm.addClass("hidden"),this.toggleTagSuggestions(!1),this.toggleTagLatest(!1)},n.prototype.enableContent=function(){this.showErrors(),this.$settingsForm.removeClass("hidden"),this.$settingsOverlay.addClass("hidden"),this.toggleTagSuggestions(!0),this.toggleTagLatest(!0)},n.prototype.renderTagsBySelectedImages=function(t){var i=arguments.length<=0||void 0===t?[]:t,e=this.imageDropper.getSelectedImages(),o=this.$tagsInput.tagsinput("items"),n=[];if(1===e.length){var s=e.attr("data-suggestions-tags");this.isJsonString(s)?this.displayTags(this.$tagsSuggestionContainer,JSON.parse(s),!0):this.toggleTagSuggestions(!1)}else{var a=[],r=[];e.each($.proxy(function(t,e){var i=$(e).attr("data-suggestions-tags");this.isJsonString(i)&&(i=JSON.parse(i),$(i).each($.proxy(function(t,e){-1===$.inArray(e,a)?a.push(e):-1===$.inArray(e,r)&&r.push(e)},this)))},this)),$(i).each($.proxy(function(t,e){-1===$.inArray(e,r)&&-1===$.inArray(e,this.latestUserTags)&&r.length<=15&&r.push(e)},this)),0<r.length?this.displayTags(this.$tagsSuggestionContainer,r,!0):this.toggleTagSuggestions(!1)}$(this.latestUserTags).each($.proxy(function(t,e){(-1<$.inArray(e,i)||-1===$.inArray(e,o))&&n.push(e)},this)),0<n.length?this.displayTags(this.$tagsLatestContainer,n,!0):this.toggleTagLatest(!1)},n.prototype.isJsonString=function(t){try{JSON.parse(t)}catch(t){return!1}return!0},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.init(),this.bindEvents()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.ContestUploadSettings=o,e.exports=i.default},{}],15:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.setOptions=function(t){var e=arguments.length<=0||void 0===t?{}:t;this.defaultOptions={axis:"x",theme:"dark-thin",autoExpandScrollbar:!0,autoHideScrollbar:!1,mouseWheel:{preventDefault:!0},scrollButtons:{enable:!1},advanced:{autoExpandHorizontalScroll:!0}},this.options=$.extend(this.defaultOptions,e)},n.prototype.init=function(){this.bindEvent(),this.load()},n.prototype.bindEvent=function(){$(document).on("fcx:custom-scrollbar:reload",$.proxy(this.load,this))},n.prototype.load=function(){this.$container.find(this.$element).mCustomScrollbar(this.options)},n);function n(t,e){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.$element=e,this.setOptions(i)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.CustomScrollBar=o,e.exports=i.default},{}],16:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){var t={autoclose:!0,clearBtn:!0,endDate:"0d",language:$("html").attr("lang")||"de",minViewMode:"months",orientation:"bottom right",toggleActive:!0,format:"mm.yyyy"};this.isUpdating=!1,this.options=$.extend(t,this.options),this.dates=[!1,!1],this.$buttons=[this.$container.find(".fcx-datepicker-start"),this.$container.find(".fcx-datepicker-end")],this.$buttons[0].datepicker(this.options).on("changeDate",$.proxy(this.onChange,this)),this.$buttons[1].datepicker(this.options).on("changeDate",$.proxy(this.onChange,this))},n.prototype.initFromMarkup=function(){this.update([this.$buttons[0].data("isodate"),this.$buttons[1].data("isodate")])},n.prototype.update=function(t){var e,i;for(this.isUpdating=!0,e=0;e<2;e++)this.dates[e]=!!this.isDate(t[e])&&new Date(t[e]);for(this.$buttons[0].datepicker("setStartDate",!1),this.$buttons[1].datepicker("setStartDate",this.dates[0]),this.$buttons[0].datepicker("setEndDate",this.getFirstOfTheCurrentMonth()),this.$buttons[1].datepicker("setEndDate",this.getFirstOfTheCurrentMonth()),!1!==this.dates[1]&&((i=new Date(this.dates[1])).setDate(i.getDate()+1),this.$buttons[0].datepicker("setEndDate",i)),e=0;e<2;e++)this.$buttons[e].datepicker("setDate",this.dates[e]),!1===this.dates[e]?this.$buttons[e].find(".caption").html(this.$buttons[e].data("not-selected")):this.$buttons[e].find(".caption").html(this.$buttons[e].datepicker("getFormattedDate"));this.$container.find('input[name="date"]').val(this.getUrlParam()),this.isUpdating=!1},n.prototype.onChange=function(){this.isUpdating||(this.update([this.getIsoString(this.$buttons[0].datepicker("getDate")),this.getIsoString(this.$buttons[1].datepicker("getDate"))]),$(document).trigger("fcx-datepicker-changed"))},n.prototype.getFirstOfTheCurrentMonth=function(){var t=new Date;return t.setDate(2),t},n.prototype.addUrlParamToArray=function(t){return this.isSet()&&(t.date=this.getUrlParam()),t},n.prototype.getUrlParam=function(){var t=this.getOutputString(this.dates[0]);return!1!==this.dates[1]&&(t+=","+this.getOutputString(this.dates[1])),t},n.prototype.getOutputString=function(t){var e="";return this.isDate(t)&&(e=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).substr(-2)),e},n.prototype.getIsoString=function(t){var e="";return this.isDate(t)&&(e=this.getOutputString(t)+"-"+("0"+t.getDate()).substr(-2)),e},n.prototype.clear=function(){this.update(["",""])},n.prototype.setDates=function(t){this.update(t)},n.prototype.isDate=function(t){return!isNaN(Date.parse(t))},n.prototype.isSet=function(){return!1!==this.dates[0]||!1!==this.dates[1]},n);function n(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.options=e,this.init()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.DatePicker=o,e.exports=i.default},{}],17:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){return this.mergeOptions(),this.$input.datepicker(this.options),this},n.prototype.mergeOptions=function(){var t={weekStart:1,language:String($("html").attr("lang")||"de").toLocaleLowerCase(),autoclose:!0};this.options=$.extend({},t,this.options),this.options.language=this.options.language.replace(/^en$/,"en-GB")},n);function n(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$input=t,this.options=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.SingleDatePicker=o,e.exports=i.default},{}],18:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.execute=function(){this.init(),this.bindEvents()},n.prototype.init=function(){this.original=this.$container.html(),this.$container.append('<button class="btn btn-none btn-lg fcx-btn-description-toggler fcx-btn-more"><i class="far fa-angle-down"></i></button>'),this.$container.dotdotdot({ellipsis:" ...",height:100,after:"button.btn",callback:$.proxy(this.truncated,this)}),this.$container.removeClass("pre-truncated")},n.prototype.truncated=function(t){!1===t&&this.$container.find(".fcx-btn-more").remove()},n.prototype.bindEvents=function(){$(document).on("click",".fcx-btn-more",$.proxy(this.expand,this)),$(document).on("click",".fcx-btn-less",$.proxy(this.collapse,this))},n.prototype.expand=function(){this.$container.trigger("destroy.dot"),this.$container.find(".fcx-btn-description-toggler").remove(),this.$container.append('<button class="btn btn-none btn-lg fcx-btn-description-toggler fcx-btn-less"><i class="far fa-angle-up"></i></button>')},n.prototype.collapse=function(){this.$container.find(".fcx-btn-description-toggler").remove(),this.init()},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.DescriptionToggler=o,e.exports=i.default},{}],19:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n,s=o(t("../PhotoList/PhotoSearch")),a=o(t("../InputTypes/Select")),r=o(t("../FormSerializer.js")),l=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,n=s.default),c.prototype.init=function(){n.prototype.init.call(this),this.persistUrl()},c.prototype.addElements=function(){this.sort=new a.default('form.user-folder-form select[name="sort"]',{$parent:this.$container,name:"sort",event:"change",onEvent:$.proxy(this.onFormChange,this)})},c.prototype.onFormChange=function(){this.persistUrl(),$(document).trigger("fcx:pagination:reset"),this.onChange()},c.prototype.persistUrl=function(){var t=new r.default(this.$container,"form.user-folder-form");this.urlPersister.persist({name:"form",value:t.get()})},c);function c(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),n.apply(this,arguments)}i.default=l,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.DiscussionPhotosForm=l,e.exports=i.default},{"../FormSerializer.js":34,"../InputTypes/Select":43,"../PhotoList/PhotoSearch":103}],20:[function(t,e,i){"use strict";var o=(n.prototype.on=function(t,e,i){this.off(t,e),$(document).on(t,$.proxy(e,i))},n.prototype.off=function(t,e){void 0===t&&void 0===e?$(document).off():$(document).off(t,e)},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}window.DocumentEvent=new o},{}],21:[function(t,e,i){"use strict";i.__esModule=!0;var o,n=t("../SectionProvider/SectionProvider"),s=(o=n)&&o.__esModule?o:{default:o},a=(r.prototype.execute=function(){this.init(),this.bindEvents()},r.prototype.init=function(){this.MAX_LEVEL=10,this.MAX_MATCHES=20,this.$typehead=this.$container.find(".fcx-drilldown__typeahead"),this.$noMatchInfo=this.$typehead.find(".fcx-drilldown__no-match-info"),this.$lastUsedSections=this.$noMatchInfo.find(".fcx-drilldown__last-used-sections"),this.$matches=this.$typehead.find(".fcx-drilldown__matches"),this.isTyping=!1,this.isBlurEnabled=!0,this.lastUsedSections=this.$container.data("last-used-sections"),this.translations=this.$container.data("translations"),this.callbacks={},this.initCustomScrollBar(),(new s.default).getPromise().done($.proxy(this.setup,this))},r.prototype.bindEvents=function(){this.$container.on("mousedown",$.proxy(this.onMousedown,this)),this.$container.on("mouseup",$.proxy(this.onMouseup,this)),$(document).on("focusout",".fcx-drilldown__container.fcx-drilldown--open",$.proxy(this.onBlur,this)),this.$container.on("click",".fcx-drilldown__item .fcx_drilldown__nav-right",$.proxy(this.onClickRight,this)),this.$container.on("click",".fcx-drilldown__nav-back span",$.proxy(this.onClickBack,this)),this.$container.on("mousedown",".fcx-drilldown__link, .fcx-drilldown__match",$.proxy(this.onItemSelect,this)),this.$container.on("mouseover",".fcx-drilldown__match",$.proxy(this.onItemHover,this)),this.$container.on("click",".fcx-drilldown__header input",$.proxy(this.onInputClick,this)),this.$container.on("click",".fcx-drilldown__header .fa-search",$.proxy(this.onInputClick,this)),this.$container.on("focus",".fcx-drilldown__header input",$.proxy(this.onInputFocus,this)),this.$container.on("blur",".fcx-drilldown__header input",$.proxy(this.onInputBlur,this)),this.$container.on("keydown",".fcx-drilldown__header input",$.proxy(this.onInputKeydown,this)),this.$container.on("keyup",".fcx-drilldown__header input",$.proxy(this.onInputKeyup,this))},r.prototype.setup=function(t){this.sections=$.extend(!0,{},t),this.prepareSectionData(),this.initFilling(),$(document).trigger("fcx:drilldown:ready")},r.prototype.addCallback=function(t,e){this.callbacks[t]=e},r.prototype.onItemSelect=function(t){t.preventDefault();var e=$(t.currentTarget).attr("data-id");this.isset(e)&&this.itemSelected(t,this.sections[e])},r.prototype.itemSelected=function(t){this.onClickRight(t)},r.prototype.show=function(){this.$container.addClass("fcx-drilldown--open").focus()},r.prototype.hide=function(){this.$container.removeClass("fcx-drilldown--open"),this.isBlurEnabled=!0,this.switchToDrilldownmode(),this.initFilling()},r.prototype.toggle=function(){this.$container.hasClass("fcx-drilldown--open")?this.hide():this.show()},r.prototype.onClickBack=function(t){t.preventDefault(),this.switchToDrilldownmode();var e=parseInt($(t.currentTarget).parents(".fcx-drilldown__level").attr("data-level"),10)-1;1<=e&&this.$container.attr("data-level",e)},r.prototype.onClickRight=function(t){t.preventDefault(),this.switchToDrilldownmode();var e=parseInt($(t.currentTarget).parents(".fcx-drilldown__level").attr("data-level"),10)+1;if(e<=this.MAX_LEVEL){var i=$(t.currentTarget).parent().find(".fcx-drilldown__link").attr("data-id");this.fillOneLevel(i,e),this.$container.attr("data-level",e)}},r.prototype.onItemHover=function(){this.$matches.find(".fcx-drilldown__match").removeClass("focus")},r.prototype.switchToDrilldownmode=function(){this.$container.removeClass("fcx-drilldown--mode-typeahead"),this.resetTypeahead()},r.prototype.resetTypeahead=function(){this.$container.removeClass("fcx-drilldown--mode-typing"),this.clearTypeahead()},r.prototype.clearTypeahead=function(){this.$noMatchInfo.addClass("hidden").find(".fcx-drilldown__intro span").text(),this.$lastUsedSections.addClass("hidden"),this.$matches.empty()},r.prototype.onInputClick=function(t){this.isBlurEnabled=!1,this.$container.addClass("fcx-drilldown--mode-typeahead"),$(t.currentTarget).parents(".fcx-drilldown__level").find(".fcx-drilldown__header input").focus(),this.isBlurEnabled=!0},r.prototype.onInputKeydown=function(t){var e=$(t.currentTarget);if(13!==t.keyCode){if(!(-1<$.inArray(t.keyCode,[40,38,27,8])))return this.isTyping?void 0:(this.isTyping=!0,this.$container.addClass("fcx-drilldown--mode-typing"),void e.val(""))}else this.typeaheadKeyboardSelection(t)},r.prototype.onInputKeyup=function(t){var e=$(t.currentTarget);if(13!==t.keyCode){if(40!==t.keyCode&&38!==t.keyCode)return 27===t.keyCode?(e.val(e.attr("data-original-value")),this.isTyping=!1,this.resetTypeahead(),void this.setCursorAtStart(e.get(0))):""===e.val().trim()?(this.isTyping=!1,void this.resetTypeahead()):void this.showTypeaheadResults(e.val().trim());this.startTypeaheadNavigation(t)}},r.prototype.typeaheadKeyboardSelection=function(){var t=this.$matches.find(".fcx-drilldown__match.focus");if(0<t.length){var e=t.attr("data-id");this.isset(e)&&this.itemSelected(null,this.sections[e])}},r.prototype.startTypeaheadNavigation=function(t){var e=40===t.keyCode?"down":"up",i=this.$matches.find(".fcx-drilldown__match"),o=0,n=i.filter(".focus");o=0<=i.index(n)?(i.index(n)+("down"==e?1:-1))%i.length:"down"==e?0:i.length-1,i.removeClass("focus"),(n=i.eq(o)).addClass("focus");var s=n.position().top,a=n.outerHeight(!1),r=-1*parseInt(this.$typehead.find(".mCSB_container").css("top"),10),l=parseInt(Math.min(s,r)+Math.max(0,s+a-(r+this.$typehead.height())),10);this.$typehead.mCustomScrollbar("scrollTo",l)},r.prototype.onInputFocus=function(t){var e=t.currentTarget;this.setCursorAtStart(e)},r.prototype.onInputBlur=function(t){var e=$(t.currentTarget);this.isTyping=!1,this.switchToDrilldownmode(),e.val(e.attr("data-original-value"))},r.prototype.showTypeaheadResults=function(t){this.clearTypeahead();var e=this.getTypeaheadResults(t);"fallback"===e.resultsType&&(0<e.matches.length&&this.$lastUsedSections.removeClass("hidden"),this.$noMatchInfo.find(".fcx-drilldown__intro span").text('"'+t+'"'),this.$noMatchInfo.removeClass("hidden"));var i=e.matches,o=Array.isArray(i),n=0;for(i=o?i:i[Symbol.iterator]();;){var s;if(o){if(n>=i.length)break;s=i[n++]}else{if((n=i.next()).done)break;s=n.value}var a=s;this.$matches.append(this.getFormattedMatch(a,t))}},r.prototype.getTypeaheadResults=function(t){var e=[],i="default";if(""!==t){for(var o in this.sections)if(this.sections.hasOwnProperty(o)&&"root"!==o&&this.showInTypeahead(t,this.sections[o])&&(e.push(o),e.length===this.MAX_MATCHES))break;0===e.length&&(i="fallback",e=this.getTypeaheadFallbackResults())}return{resultsType:i,matches:e}},r.prototype.showInTypeahead=function(t,e){return new RegExp("((?:^|\\s)+)("+t+")","i").test(e.shortname)},r.prototype.getTypeaheadFallbackResults=function(){var t=[],e=this.lastUsedSections,i=Array.isArray(e),o=0;for(e=i?e:e[Symbol.iterator]();;){var n;if(i){if(o>=e.length)break;n=e[o++]}else{if((o=e.next()).done)break;n=o.value}var s=n;this.isset(s)&&t.push(s)}return t},r.prototype.getFormattedMatch=function(t,e){var i=this.$container.find(".fcx-drilldown__match-template > div").clone(),o=this.sections[t],n=new RegExp("((?:^|\\s)+)("+e+")","i");"root"===o.parent_id&&i.find(".parents").text(this.translations.mainsection);for(var s=0;s<10&&void 0!==o&&-1!==o.parent_id;s+=1)0===s?i.find(".section").html(o.shortname.replace(n,"$1<strong>$2</strong>")):1===s?i.find(".parents span").text(o.shortname):i.find(".parents").prepend(o.shortname+" / "),o=this.sections[o.parent_id];return i.find(".parents").dotdotdot({ellipsis:" ... ",after:"span",height:15,watch:!0}),i.attr("data-id",t),i},r.prototype.initFilling=function(){this.fill()},r.prototype.fillWithMainSections=function(){this.$container.attr("data-section-id",""),this.$container.attr("data-category-id",""),this.initFilling()},r.prototype.fill=function(t){var e=!(arguments.length<=0||void 0===t)&&t,i="root",o=null,n=1,s=this.$container.attr("data-section-id"),a=this.$container.attr("data-category-id");"2"!==s&&""!==s||!this.isset("c"+a)?"2"!==s&&""!==s&&this.isset("s"+s)&&(i="s"+s):i="c"+a,"root"!==i&&this.isset(i)&&e&&this.issetParent(this.sections[i].parent_id)&&(o=i,i=this.sections[o].parent_id),n=this.getLevelById(i),this.isset(i)&&("root"===i||this.issetParent(this.sections[i].parent_id))||(o=null,n=this.isset(i)&&this.isset("c"+this.sections[i].channel_id)?(i="c"+this.sections[i].channel_id,2):(i="root",1));for(var r=n;1<=r&&(this.fillOneLevel(i,r,o),this.issetParent(this.sections[i].parent_id));r-=1)i=this.sections[i].parent_id;this.$container.attr("data-level",n),e&&this.scrollActiveItemIntoView(n)},r.prototype.scrollActiveItemIntoView=function(t){var e=this.$container.find('.fcx-drilldown__level[data-level="'+t+'"]'),i=e.find(".fcx-drilldown__items"),o=i.find(".fcx-drilldown__item.active");if(1===o.length){var n=o.position().top,s=o.outerHeight(!1),a=-1*parseInt(e.find(".fcx-drilldown__items .mCSB_container").css("top"),10);if(n+s>i.height()){var r=parseInt(Math.min(n,a)+Math.max(0,n+s-(a+i.height())),10);i.mCustomScrollbar("scrollTo",r)}}},r.prototype.fillOneLevel=function(t,e,i){var o=arguments.length<=2||void 0===i?null:i,n=this.$container.find('.fcx-drilldown__level[data-level="'+e+'"]'),s=this.sections[t];if(n.find(".fcx-drilldown__item").addClass("hidden"),n.find("input").val(s.shortname).attr("data-original-value",s.shortname),this.issetParent(t)){var a=0,r=this.parentsIndex[t],l=Array.isArray(r),c=0;for(r=l?r:r[Symbol.iterator]();;){var d;if(l){if(c>=r.length)break;d=r[c++]}else{if((c=r.next()).done)break;d=c.value}var p=d;if(this.isInDrilldown(p)){var h=n.find(".fcx-drilldown__item").eq(a);0===h.length&&(h=this.$container.find(".fcx-drilldown__item-template > div").clone(),n.find(".fcx-drilldown__items .mCSB_container").append(h));var u=this.sections[p].shortname;-1<$.inArray(p,["c8","c51","c104","c406","c506"])&&(u+=' <i class="far fa-fw fa-sm fa-gem"></i>'),h.find(".fcx-drilldown__link").html(u).attr("data-id",p),h.toggleClass("has-children",this.hasChildren(p)).toggleClass("active",p===o).toggleClass("not-uploadable",0===this.sections[p].uploadable||1===this.sections[p].hidden).toggleClass("fcx-drilldown__item--nude",this.isNude(p)).toggleClass("fcx-drilldown__item--non-nude",!this.isNude(p)).removeClass("hidden"),a+=1}}}},r.prototype.getLevelById=function(t){for(var e=1;this.isset(t)&&-1!==this.sections[t].parent_id&&e<=this.MAX_LEVEL;)e+=1,t=this.sections[t].parent_id;return e},r.prototype.showInDrilldown=function(t){return this.isVisible(t.id)},r.prototype.prepareSectionData=function(t){this.parentsIndex={},this.setupRootSection(),this.prepareParentsIndex(),this.markDrilldownVisibilty()},r.prototype.setupRootSection=function(){this.sections.root={id:"root",section_id:0,channel_id:0,parent_id:-1,shortname:this.translations.allMainsections,uploadable:0,hidden:0,nude:0,show_in_drilldown:1}},r.prototype.prepareParentsIndex=function(){for(var t in this.sections)if(this.sections.hasOwnProperty(t)&&"root"!==t){var e=this.sections[t].parent_id;this.issetParent(e)||(this.parentsIndex[e]=[]),this.parentsIndex[e].push(t)}for(var t in this.parentsIndex)this.sections.hasOwnProperty(t)&&this.parentsIndex[t].sort($.proxy(function(t,e){return this.sections[t].shortname<this.sections[e].shortname?-1:1},this))},r.prototype.markDrilldownVisibilty=function(){for(var t in this.sections)this.sections.hasOwnProperty(t)&&"root"!==t&&(this.sections[t].show_in_drilldown=this.showInDrilldown(this.sections[t])?1:0)},r.prototype.onMousedown=function(){this.isBlurEnabled=!1,setTimeout($.proxy(function(){this.isBlurEnabled=!0},this),50)},r.prototype.onMouseup=function(){this.isBlurEnabled=!0},r.prototype.onBlur=function(t){t.preventDefault(),this.isBlurEnabled&&this.hide()},r.prototype.isset=function(t){return void 0!==this.sections[t]},r.prototype.issetParent=function(t){return void 0!==this.parentsIndex[t]},r.prototype.isVisible=function(t){return this.isset(t)&&0===this.sections[t].hidden},r.prototype.isUploadable=function(t){return this.isset(t)&&1===this.sections[t].uploadable},r.prototype.isNude=function(t){return this.isset(t)&&1===this.sections[t].nude},r.prototype.isInDrilldown=function(t){return this.isset(t)&&1===this.sections[t].show_in_drilldown},r.prototype.hasChildren=function(t){return this.issetParent(t)},r.prototype.isOpen=function(){return this.$container.hasClass("fcx-drilldown--open")},r.prototype.setCursorAtStart=function(t){t.setSelectionRange?setTimeout(function(){t.setSelectionRange(0,0)},20):$(t).val($(t).val())},r.prototype.initCustomScrollBar=function(){$(".fcx-drilldown__items,.fcx-drilldown__typeahead").mCustomScrollbar({axis:"y",theme:"light-thick",autoExpandScrollbar:!1,autoHideScrollbar:!1,scrollInertia:0,mouseWheel:{preventDefault:!0},scrollButtons:{enable:!1},advanced:{autoExpandHorizontalScroll:!0}})},r);function r(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.$container=t,this.options=e}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Drilldown=a,e.exports=i.default},{"../SectionProvider/SectionProvider":124}],22:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){return this.isBlurEnabled=!0,this.bindEvents(),this},n.prototype.bindEvents=function(){this.$body.on("mousedown",$.proxy(this.onMousedown,this)),this.$body.on("mouseup",$.proxy(this.onMouseup,this)),$(document).on("focusout",this.selector+".fcx-dropdown--open .fcx-dropdown__body",$.proxy(this.onFocusOut,this)),$(document).on("keyup",this.selector+".fcx-dropdown--open .fcx-dropdown__body",$.proxy(this.onKeyUp,this)),$(document).on("mousedown",this.selector+" .fcx-dropdown__header-item",$.proxy(this.onHeaderItemClick,this)),this.$container.on("click",".fcx-dropdown__body-item",$.proxy(this.onItemClick,this))},n.prototype.onHeaderItemClick=function(t){t.preventDefault(),this.toggle(),$(t.currentTarget).blur()},n.prototype.onItemClick=function(t){var e=$(t.currentTarget);if(!e.hasClass("disabled")){this.hide();var i=e.index(),o=this.$container.find(".fcx-dropdown__header-item").eq(i);e.attr("data-selected","1"),e.siblings().attr("data-selected","0"),o.show(),o.siblings().hide(),this.$container.trigger("fcx:dropdown-item-selected",{value:e.data("option-value")})}},n.prototype.selectItem=function(t){var e=this.$container.find(".fcx-dropdown__body-item"),i=e.filter('[data-option-value="'+t+'"]');e.attr("data-selected",0),i.attr("data-selected",1);var o=this.$container.find(".fcx-dropdown__header-item"),n=o.eq(i.index());o.hide(),n.show()},n.prototype.onMousedown=function(){this.isBlurEnabled=!1,setTimeout($.proxy(function(){this.isBlurEnabled=!0},this),50)},n.prototype.onMouseup=function(){this.isBlurEnabled=!0},n.prototype.onFocusOut=function(t){t.preventDefault(),this.isBlurEnabled&&this.hide()},n.prototype.onKeyUp=function(t){t.preventDefault(),27===t.keyCode&&this.isBlurEnabled&&this.hide()},n.prototype.show=function(){this.$container.addClass("fcx-dropdown--open"),this.$body.focus()},n.prototype.hide=function(){this.$container.removeClass("fcx-dropdown--open"),this.isBlurEnabled=!0},n.prototype.toggle=function(){this.$container.hasClass("fcx-dropdown--open")?this.hide():this.show()},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.selector=t,this.$container=$(t),this.$body=this.$container.find(".fcx-dropdown__body")}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Dropdown=o,e.exports=i.default},{}],23:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){this.$container.on("click",".js-submit",$.proxy(this.onSubmit,this)),this.$container.on("click",".js-cancel",$.proxy(this.onCancel,this))},n.prototype.enable=function(t,e){this.$textElement=t,this.$textElement.hide(),this.$container.removeClass("hidden"),this.$container.insertAfter(this.$textElement),this.$container.find("TEXTAREA").val(e).focus(),this.$container.find("TEXTAREA").hasClass("js-mention")&&$(document).trigger("fcx:mention-textarea:enabled",{container:this.$container,text:e})},n.prototype.onSubmit=function(t){t.preventDefault(),$(document).trigger("fcx:"+this.eventPrefix+":editable-text:submitted",{text:this.$container.find("TEXTAREA").val(),html:this.$container.find(".js-mentionable").html()}),this.remove()},n.prototype.onCancel=function(t){t.preventDefault(),$(document).trigger("fcx:"+this.eventPrefix+":editable-text:canceled"),this.remove()},n.prototype.remove=function(){this.$textElement.show(),this.$container.remove()},n);function n(t){var e=arguments.length<=1||void 0===arguments[1]?"photo":arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t.first().clone(),this.eventPrefix=e,this.init()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.EditableText=o,e.exports=i.default},{}],24:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){window.DocumentEvent.on("fcx:endless-scrolling:"+this.options.name+":reinitialize",this.setup,this)},n.prototype.setup=function(){$(this.options.ias.container).length<=0||(this.options.reinit?this.reinitIas():this.initIas())},n.prototype.reinitIas=function(){$.ias().destroy(),this.ias=$.ias(this.options.ias),this.addExtensions(),this.ias.on("rendered",$.proxy(this.onRendered,this)),this.ias.reinitialize()},n.prototype.initIas=function(){this.ias=$(this.options.container).ias(this.options.ias),this.addExtensions(),this.ias.on("rendered",$.proxy(this.onRendered,this))},n.prototype.setExtension=function(t){this.extensions.push(t)},n.prototype.addExtensions=function(){$.each(this.extensions,$.proxy(function(t,e){var i=e.object;this.ias.extension(new i(e.options))},this))},n.prototype.onRendered=function(){$(document).trigger("fcx:base:setup-tooltips"),$(document).trigger("fcx:endless-scrolling:"+this.options.name+":rendered")},n);function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.defaultOptions={ias:{container:".photo-comment-list",item:".js-comment-parent",pagination:".fcx-comments-pagination .pagination",next:".fcx-comments-pagination .next a"},container:"",name:"photo-comment",reinit:!0},this.options=$.extend(this.defaultOptions,t),this.extensions=[],this.init()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.EndlessScrolling=o,e.exports=i.default},{}],25:[function(t,e,i){"use strict";i.__esModule=!0;var o=(s.prototype.init=function(){this.bindEvent()},s.prototype.bindEvent=function(){this.$container.on("click",this.eventClass,$.proxy(this.loadModal,this)),window.DocumentEvent.on("fcx:template-loader:finished-loading:"+this.name,this.openModal,this)},s.prototype.loadModal=function(t){t.preventDefault();var e=$(t.currentTarget).attr("href");this.templateLoader.setOptions({template:e,name:this.name,type:"GET",load:"append",target:this.$container}),this.templateLoader.load()},s.prototype.openModal=function(){this.$container.find(this.modal).modal("show"),this.$container.find(this.modal).on("shown.bs.modal",$.proxy(this.onShowModal,this)),this.$container.find(this.modal).on("hidden.bs.modal",$.proxy(this.removeModal,this))},s.prototype.onShowModal=function(){$(document).trigger("fcx:endless-scrolling:"+this.name+":reinitialize")},s.prototype.removeModal=function(){this.$container.find(this.modal).remove()},s);function s(t,e,i,o,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),this.$container=t,this.templateLoader=e,this.eventClass=i,this.modal=o,this.name=n}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.EndlessScrollingModal=o,e.exports=i.default},{}],26:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.execute=function(){this.init(),this.bindEvents(),this.cleanEmptyImages()},n.prototype.init=function(){this.smallImgPath="/assets/images/section/fallback-113x75.png",this.bigImgPath="/assets/images/section/fallback-400x280.png"},n.prototype.bindEvents=function(){$(".fallback-image, .fallback-image-big").on("error",$.proxy(this.setFallbackImage,this))},n.prototype.cleanEmptyImages=function(){$(".fallback-image, .fallback-image-big").filter('[src=""]').each($.proxy(function(t,e){this.setFallbackImage({currentTarget:e})},this))},n.prototype.setFallbackImage=function(t){var e=$(t.currentTarget),i=e.hasClass("fallback-image")?this.smallImgPath:this.bigImgPath;e.prop("src",i)},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.FallbackImage=o,e.exports=i.default},{}],27:[function(t,e,i){"use strict";i.__esModule=!0;var o,n=t("../InputTypes/Select"),s=(o=n)&&o.__esModule?o:{default:o},a=(r.prototype.init=function(){this.addElements()},r.prototype.addElements=function(){this.favorites=new s.default('form.fcx-favorites-form select[name="favorites[]"]',{$parent:this.$container,name:"sort",event:"change",onEvent:$.proxy(this.onFormChange,this)})},r.prototype.onFormChange=function(){var t=this.favorites.getValue();$(document).trigger("fcx:browser-navigation-list:add",{url:t[0]}),location.reload(t[0])},r);function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r)}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.FavoritesPhotosForm=a,e.exports=i.default},{"../InputTypes/Select":43}],28:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.execute=function(){this.init(),this.bindEvents()},n.prototype.init=function(){this.$overlayContainer="",this.$flashMessage=$("#flashmessage-signup"),this.$changeEmailTarget=$("#change-email-link"),this.$changeEmailLink=this.$changeEmailTarget.attr("data-ajax-target")},n.prototype.bindEvents=function(){this.$flashMessage.on("click","#change-email-link",$.proxy(this.openOverlay,this)),this.$flashMessage.on("click",".notification-global .button-ui .close",$.proxy(this.closeOverlay,this)),this.$flashMessage.on("click",".close-overlay",$.proxy(this.closeOverlay,this)),this.$flashMessage.on("submit","form#change-email-data",$.proxy(this.submitCallback,this)),this.$flashMessage.on("focus","#signup-login",$.proxy(this.onInputFocus,this))},n.prototype.openOverlay=function(t){t.preventDefault(),t.stopPropagation(),this.closeOverlay(t),this.$flashMessage.append('<div id="overlayContainer" class="modal"></div>'),this.$overlayContainer=$("#overlayContainer"),this.$overlayContainer.load(this.$changeEmailLink,$.proxy(this.loadCallBack,this))},n.prototype.closeOverlay=function(t){t.preventDefault(),this.$overlayContainer.length&&this.$overlayContainer.hide().empty().remove()},n.prototype.onInputFocus=function(){this.$form.find(".error-msg").remove(),this.$formInput.removeClass("error")},n.prototype.loadCallBack=function(t,e,i){200===i.status&&(this.$form=$("#change-email-data"),this.$formInput=$("#signup-login"),this.$overlayContainer.show())},n.prototype.submitCallback=function(t){t.preventDefault();var e=encodeURIComponent(this.$formInput.attr("name"))+"="+encodeURIComponent(this.$formInput.val());$.post(this.$changeEmailLink,e,$.proxy(this.postCallback,this))},n.prototype.postCallback=function(t,e,i){if(204!==i.status)return this.$form.find(".error-msg").remove(),this.$form.append(i.responseText),void this.$formInput.addClass("error");this.$overlayContainer.empty().hide(),location.reload()},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.FlashmessageSignup=o,e.exports=i.default},{}],29:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.execute=function(){this.bindEvents(),this.showStatusFlashMessage()},n.prototype.bindEvents=function(){$(document).on("click",".fcx-flashmessage-cancel",$.proxy(this.snooze,this)),$(document).on("click",".fcx-flashmessage-confirm",$.proxy(this.confirm,this)),$(document).on("click",'*[data-name="status"] > .close',$.proxy(this.setNoStatusFlashMessageCookie,this))},n.prototype.snooze=function(t){t.preventDefault();var e=$(t.currentTarget).parents(".fcx-js-flashmessage"),i=e.data("name"),o=e.data("ttl");if(0<o){var n=new Date;n.setDate(n.getDate()+o),document.cookie="fm-"+i+"=1; expires="+n.toGMTString()+"; path=/"}e.hide()},n.prototype.confirm=function(t){t.preventDefault();var e=$(t.currentTarget).parents(".fcx-js-flashmessage"),i=$(t.currentTarget).attr("data-confirmation-url");void 0!==i&&$.post(i),e.hide()},n.prototype.showStatusFlashMessage=function(){var t=document.querySelector('*[data-name="status"]'),e=document.cookie.match(new RegExp("(^| )nostatusmessage=([^;]+)"));t&&!e&&t.classList.remove("hide")},n.prototype.setNoStatusFlashMessageCookie=function(){var t=new Date;t.setTime(t.getTime()+432e5);var e="expires="+t.toGMTString();document.cookie="nostatusmessage=1;"+e+";path=/"},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Flashmessages=o,e.exports=i.default},{}],30:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.execute=function(){this.init(),this.bindEvents()},n.prototype.init=function(){this.detectTimeout=null,this.detectIntervall=null,this.initLazyLoading()},n.prototype.bindEvents=function(){},n.prototype.initLazyLoading=function(){this.initBlazy(),this.detectTimeout=window.setTimeout($.proxy(this.detectNewImages,this),3e3)},n.prototype.detectNewImages=function(){null!==this.detectTimeout&&(window.clearTimeout(this.detectTimeout),this.detectTimeout=null),null===this.detectIntervall&&(this.detectIntervall=window.setInterval($.proxy(function(){0<$(".fcx-gallery .fcx-gallery__item").filter(":not(.fcx-gallery__item--loaded)").filter(":not(.fcx-gallery__item--error)").length&&(window.clearInterval(this.detectIntervall),(this.detectIntervall=null)===this.detectTimeout&&(this.detectTimeout=window.setTimeout($.proxy(this.detectNewImages,this),3e3)),this.blazy.revalidate())},this),250))},n.prototype.initBlazy=function(){this.blazy=new Blazy({selector:".fcx-gallery .fcx-gallery__item img",offset:500,success:$.proxy(this.onLazySuccess,this),error:$.proxy(this.onLazyError,this)})},n.prototype.onLazyError=function(t){var e=$(t).parents(".fcx-gallery__item");e.hasClass("fcx-gallery__item--error")||e.addClass("fcx-gallery__item--error fcx-gallery__item--done")},n.prototype.onLazySuccess=function(t){var e=$(t),i=e.parents(".fcx-gallery__item"),o=i.parents(".fcx-gallery");i.hasClass("fcx-gallery__item--loaded")||(this.replaceObjectFit(e),0<i.filter('[class*="fcx-flex-"]').length?i.addClass("fcx-gallery__item--loaded"):(this.checkFlush(o),i.addClass(this.getItemClass(t)),i.attr("data-format",this.getFormat(t)),i.addClass("fcx-gallery__item--loaded"),o.hasClass("fcx-gallery__flush")&&this.flush(o)))},n.prototype.getItemClass=function(t){var e=90*(1-1/(this.getAspectRatio(t)+1));return"fcx-flex-"+Math.max(1,Math.min(80,Math.round(e)))},n.prototype.getFormat=function(t){var e=this.getAspectRatio(t);return.98<e&&e<1.02?"square":2.5<=e?"panorama":1<e?"landscape":"portrait"},n.prototype.replaceObjectFit=function(t){if(!t.hasClass("blur-nudes")&&!$("html").hasClass("object-fit")&&$("html").hasClass("backgroundsize")){var e=t.attr("src");""===e&&(e=t.attr("data-src")),""!==e&&(t.parents(".fcx-gallery__photo").addClass("fcx-gallery__background"),t.parents(".fcx-gallery__photo").css("background-image",'url("'+e+'")'))}},n.prototype.checkFlush=function(t){if(void 0===t.attr("data-flush-checked")){t.attr("data-flush-checked","1");var e=Math.max(1,t.find(".fcx-gallery__item").length);t.find('.fcx-gallery__item[class*="fcx-flex-"]').length/e<.8&&t.addClass("fcx-gallery__flush")}},n.prototype.flush=function(t){var e=t.find(".fcx-gallery__item:not(.fcx-gallery__item--done)"),i=0,o=void 0;for(o=0;o<e.length&&(e.eq(o).hasClass("fcx-gallery__item--loaded")||e.eq(o).hasClass("fcx-gallery__item--error"));o+=1)0<o&&10<Math.abs(e.eq(o).position().top-e.eq(o-1).position().top)&&(i=o);o===e.length&&(i=o),e.slice(0,i).addClass("fcx-gallery__item--done")},n.prototype.getAspectRatio=function(t){var e=!(arguments.length<=0||void 0===t)&&t;return 0<parseInt(e.naturalWidth,10)&&0<parseInt(e.naturalHeight,10)?e.naturalWidth/e.naturalHeight:0<parseInt(e.width,10)&&0<parseInt(e.height,10)?e.width/e.height:1},n);function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.options=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.FlexGallery=o,e.exports=i.default},{}],31:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.fields=[]},n.prototype.bindChangeEvents=function(){},n.prototype.onFieldFocus=function(t){var e=t.field;this.resetError(e)},n.prototype.onFieldBlur=function(i){var o=this;setTimeout($.proxy(function(){var t=i.field,e=t.val().trim();""!==e?o.validateField(t,e):o.resetError(t),void 0!==i.event&&$(document).trigger(i.event)},this),100)},n.prototype.validateField=function(){},n.prototype.validate=function(){},n.prototype.isValid=function(){var t=this.fields,e=Array.isArray(t),i=0;for(t=e?t:t[Symbol.iterator]();;){var o;if(e){if(i>=t.length)break;o=t[i++]}else{if((i=t.next()).done)break;o=i.value}if(o.field.parents(".form-group").hasClass("has-error"))return!1}return!0},n.prototype.setError=function(t,e){var i=t.parents(".form-group");i.find(".help-block").html(e),i.addClass("has-error")},n.prototype.resetError=function(t){t.parents(".form-group").removeClass("has-error")},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.AbstractFormHelper=o,e.exports=i.default},{}],32:[function(t,e,i){"use strict";i.__esModule=!0;var o,a,n=t("./AbstractFormHelper"),s=(o=n)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,a=s.default),l.prototype.init=function(t){this.fields=t,this.$form=t[0].field.parents("form"),this.errorRequired=this.$form.data("error-required"),this.errorMinlength=this.$form.data("error-minlength")},l.prototype.bindChangeEvents=function(){a.prototype.bindChangeEvents.call(this);var t=this.fields,e=Array.isArray(t),i=0;for(t=e?t:t[Symbol.iterator]();;){var o;if(e){if(i>=t.length)break;o=t[i++]}else{if((i=t.next()).done)break;o=i.value}var n=o;n.field.on("hidden.bs.select",$.proxy(this.onFieldBlur,this,n)),n.field.on("focus",$.proxy(this.onFieldFocus,this,n)),n.field.on("blur",$.proxy(this.onFieldBlur,this,n))}},l.prototype.validateField=function(t,e){a.prototype.validateField.call(this);var i=t.attr("minlength"),o=t.attr("pattern");if(void 0!==i&&e.length<parseInt(i,10))this.setError(t,this.errorMinlength);else{if(void 0!==o){var n=new RegExp(o,"i"),s=t.attr("data-error");if(!n.test(e))return void this.setError(t,s)}this.resetError(t)}},l.prototype.validate=function(){a.prototype.validate.call(this);var t=this.fields,e=Array.isArray(t),i=0;for(t=e?t:t[Symbol.iterator]();;){var o;if(e){if(i>=t.length)break;o=t[i++]}else{if((i=t.next()).done)break;o=i.value}var n=o.field,s=n.val().trim();""===s&&void 0!==n.attr("required")?this.setError(n,this.errorRequired):""!==s&&this.validateField(n,s)}},l.prototype.setServerErrors=function(t,e){var i=arguments.length<=1||void 0===e?"":e;for(var o in t)t.hasOwnProperty(o)&&this.setServerErrorsFromResponse(t,o,i)},l.prototype.setServerErrorsFromResponse=function(t,e,i){var o=t[e],n="["+e+"]";if(o.hasOwnProperty("error")){var s=i+n;this.setError($('[name$="'+s+'"]'),o.error)}else"object"==typeof o?this.setServerErrors(o,n):this.setError($('[name="'+e+'"]'),o)},l.prototype.resetError=function(t){t.parents(".form-group").removeClass("has-error")},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.FormHelper=r,e.exports=i.default},{"./AbstractFormHelper":31}],33:[function(t,e,i){"use strict";i.__esModule=!0;var o,r,n=t("./AbstractFormHelper"),s=(o=n)&&o.__esModule?o:{default:o},a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,r=s.default),l.prototype.init=function(){var o=this;return this.options=this.getOptions(this.$form),this.fields=[],this.$form.find("input,textarea,select").each(function(t,e){var i=$(e);o.fields.push({field:i,type:i.prop("tagName").toLowerCase(),options:$.extend({},o.options,o.getOptions(i)),event:i.attr("data-formhelper-event")||!1}),i.attr("data-formhelper-index",o.fields.length-1)}),this.bindChangeEvents(),this},l.prototype.bindChangeEvents=function(){r.prototype.bindChangeEvents.call(this);var t=this.fields,e=Array.isArray(t),i=0;for(t=e?t:t[Symbol.iterator]();;){var o;if(e){if(i>=t.length)break;o=t[i++]}else{if((i=t.next()).done)break;o=i.value}var n=o,s="focus",a="blur";"select"===n.type&&(s="shown.bs.select",a="hidden.bs.select"),n.field.on(s,$.proxy(this.onFieldFocus,this,n)),n.field.on(a,$.proxy(this.onFieldBlur,this,n))}},l.prototype.onFieldBlur=function(e){var i=this;setTimeout($.proxy(function(){var t=e.field;""!==t.val().trim()?i.validateField(e):i.resetError(t),!1!==e.event&&$(document).trigger(e.event+":field-blur")},this),100)},l.prototype.validateField=function(t){r.prototype.validateField.call(this),this.minlenghtValid(t)&&this.patternValid(t)&&this.resetError(t.field)},l.prototype.minlenghtValid=function(t){var e=t.field,i=e.val().trim(),o=e.attr("minlength");return!(void 0!==o&&i.length<parseInt(o,10)&&(this.setError(e,t.options.errorMinlength.replace("%count%",parseInt(o,10))),1))},l.prototype.patternValid=function(t){var e=t.field,i=e.val().trim(),o=e.attr("pattern");return!(void 0!==o&&!new RegExp(o,"i").test(i))||(this.setError(e,this.options.errorPattern),!1)},l.prototype.validate=function(){r.prototype.validate.call(this);var t=this.fields,e=Array.isArray(t),i=0;for(t=e?t:t[Symbol.iterator]();;){var o;if(e){if(i>=t.length)break;o=t[i++]}else{if((i=t.next()).done)break;o=i.value}var n=o,s=n.field;""!==s.val().trim()?this.validateField(n):void 0!==s.attr("required")&&this.setError(s,this.options.errorRequired)}},l.prototype.getOptions=function(t){var e={};return void 0!==t.attr("data-error-required")&&(e.errorRequired=t.attr("data-error-required")),void 0!==t.attr("data-error-minlength")&&(e.errorMinlength=t.attr("data-error-minlength")),void 0!==t.attr("data-error-pattern")&&(e.errorPattern=t.attr("data-error-pattern")),e},l.prototype.setServerErrors=function(t,e){var i=arguments.length<=1||void 0===e?"":e;for(var o in t)t.hasOwnProperty(o)&&this.setServerErrorsFromResponse(t,o,i)},l.prototype.setServerErrorsFromResponse=function(t,e,i){var o=t[e],n="["+e+"]";if(o.hasOwnProperty("error")){var s=i+n;this.setError($('[name$="'+s+'"]'),o.error)}else"object"==typeof o?this.setServerErrors(o,n):this.setError($('[name="'+e+'"]'),o)},l);function l(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),r.call(this),this.$form=t}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.FormValidationHelper=a,e.exports=i.default},{"./AbstractFormHelper":31}],34:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.get=function(){var t=this.$container.find(this.formClass),o="",n="";return $.each(t,$.proxy(function(t,e){var i=this.clean($(e).serializeArray());$.each(i,$.proxy(function(t,e){o+=n+t+"="+encodeURIComponent(e),n="&"},this))},this)),o},n.prototype.clean=function(t){var o={};return $.each(t,$.proxy(function(t,e){if(0<e.value.length){var i=e.name.replace(/[^A-Za-z0-9\_\-]/gi,"");void 0!==o[i]?o[i]+=","+e.value:o[i]=e.value}},this)),o},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.formClass=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.FormSerializer=o,e.exports=i.default},{}],35:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){return this.initProperties(),this},n.prototype.initProperties=function(){var t={key:$("#fcx-google-api-key").data("key"),language:$("html").attr("lang")||"de",libraries:"places"};this.mapsApiUrl="https://maps.googleapis.com/maps/api/js?"+$.param(t),this.fields={}},n.prototype.loadApi=function(){void 0===n.googleMapsPromise&&(n.googleMapsPromise=$.getScript(this.mapsApiUrl)),n.googleMapsPromise.done(function(){return $(document).trigger("fcx:google-api:maps-loaded")})},n.prototype.onPlacesChanged=function(t){var e=this.fields[t].autocomplete.getPlace(),i=!1;void 0!==e&&"object"==typeof e.address_components&&(i=this.getAddressComponents(e)),this.fields[t].callback(i)},n.prototype.addFields=function(t){var i=this;$.each(t,function(t,e){i.addField(t,e),$(e.field.get(0)).on("keydown",$.proxy(i.onKeydown,i))})},n.prototype.addField=function(t,e){var i={types:(this.fields[t]=e).types,componentRestrictions:{country:e.country}};this.fields[t].autocomplete=new google.maps.places.Autocomplete(e.field.get(0),i),this.fields[t].autocomplete.addListener("place_changed",$.proxy(this.onPlacesChanged,this,t))},n.prototype.onKeydown=function(t){t.stopPropagation(),this.isEnter(t)&&0<$(".pac-item-selected").filter(":visible").length&&t.preventDefault()},n.prototype.isEnter=function(t){return"Enter"===(t.key||"")||13===(t.keyCode||0)},n.prototype.updateCountryRestriction=function(t){var i=this,o=arguments.length<=0||void 0===t?[]:t;$.each(this.fields,function(t,e){google.maps.event.clearInstanceListeners(e.autocomplete),google.maps.event.clearInstanceListeners(e.field.get(0)),e.country=o,i.addField(t,e)})},n.prototype.getAddressComponents=function(t){var e={street:this.getAddressComponent(["route","street_address"],t),number:this.getAddressComponent(["street_number"],t),zip:this.getAddressComponent(["postal_code"],t),city:this.getAddressComponent(["locality","postal_town","administrative_area_level_3","administrative_area_level_2","administrative_area_level_1"],t),country:this.getAddressComponent(["country"],t),formattedAddress:t.formatted_address||!1,location:!1};return e=this.addLatitudeLongitude(t,e),e=this.addformatedStreet(t,e)},n.prototype.addformatedStreet=function(t,e){return this.isStreetFormatted(t)||!1!==e.number&&(e.street+=" "+e.number),e},n.prototype.addLatitudeLongitude=function(t,e){return t.geometry&&t.geometry.location&&(e.location={latitude:t.geometry.location.lat(),longitude:t.geometry.location.lng()}),e},n.prototype.getAddressComponent=function(t,e){if(void 0!==e.types&&void 0!==e.name){var i=t,o=Array.isArray(i),n=0;for(i=o?i:i[Symbol.iterator]();;){var s;if(o){if(n>=i.length)break;s=i[n++]}else{if((n=i.next()).done)break;s=n.value}var a=s;if(-1<$.inArray(a,e.types))return e.name}}var r=t,l=Array.isArray(r),c=0;for(r=l?r:r[Symbol.iterator]();;){var d;if(l){if(c>=r.length)break;d=r[c++]}else{if((c=r.next()).done)break;d=c.value}a=d;for(var p=0;p<e.address_components.length;p++)if(-1<$.inArray(a,e.address_components[p].types))return e.address_components[p].long_name}return!1},n.prototype.isStreetFormatted=function(t){return void 0!==t.types&&void 0!==t.name&&(-1<$.inArray("route",t.types)||-1<$.inArray("street_address",t.types))},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Autocomplete=o,e.exports=i.default},{}],36:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){return this.initProperties(),this.bindEvents(),this},n.prototype.initProperties=function(){this.apiUrl="https://maps.googleapis.com/maps/api/geocode/json"},n.prototype.bindEvents=function(){$(document).on("fcx:template-loader:finished-loading:geocoding",$.proxy(this.onDone,this)),$(document).on("fcx:template-loader:failed-loading:geocoding",$.proxy(this.onFail,this))},n.prototype.fetchLocation=function(t){var e={key:$("#fcx-google-api-key").data("key"),address:t};this.templateLoader.setOptions({template:this.apiUrl,name:"geocoding",type:"GET",load:null,params:e}),this.templateLoader.load()},n.prototype.onDone=function(t,e){if("OK"===(e.data.status||"")&&e.data.results[0].geometry.location)return $(document).trigger("fcx-geocoding:done",e.data.results[0].geometry.location),!0;this.onFail()},n.prototype.onFail=function(){$(document).trigger("fcx-geocoding:fail")},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.templateLoader=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Geocoding=o,e.exports=i.default},{}],37:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.bindEvent=function(){this.$container.on("popstate",$.proxy(n.onHistoryBack,this))},n.onHistoryBack=function(){window.location.href=$(location).attr("href"),window.location.reload(!0)},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.HistoryFallback=o,e.exports=i.default},{}],38:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.historyState=!1,this.site=""},n.prototype.setNavigated=function(t){this.historyState=t},n.prototype.getNavigated=function(){var t=this.historyState;return this.historyState=!1,t},n.prototype.setCurrentSite=function(t){this.site=t},n.prototype.getCurrentSite=function(){return this.site},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.init()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.HistoryState=o,e.exports=i.default},{}],39:[function(t,e,i){"use strict";i.__esModule=!0;var o=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t};function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var s=(a.prototype.init=function(){this.fileIndex=1,this.isLeftCmdPressed=!1,this.isRightCmdPressed=!1,this.$previewArea=this.$container.find("#fcx-files"),this.$selectImagesBtn=$("#fcx-select-images-btn"),this.$deleteImagesBtn=$("#fcx-delete-images-btn"),this.selectedFirstImage=!0;var t={url:this.$container.data("upload-url"),xhrFields:{withCredentials:!1},paramName:"file",autoUpload:!0,dropZone:this.$container,pasteZone:this.$container,previewCrop:!0,previewMinWidth:160,previewMinHeight:160,previewMaxWidth:160,previewMaxHeight:160,maxNumberOfFiles:this.options.maxFiles,maxFileSize:3e7,loadImageMaxFileSize:3e7,acceptFileTypes:/(\.|\/)(jpe?g)$/i,uploadTemplateId:null,downloadTemplateId:null,uploadTemplate:$.proxy(this.uploadTemplate,this),downloadTemplate:$.proxy(this.downloadTemplate,this),processfail:$.proxy(this.onProcessFail,this)};this.$container.fileupload($.extend(t,this.options)),this.$container.fileupload("option","redirect",window.location.href.replace(/\/[^\/]*$/,this.$container.data("upload-redirect-url")))},a.prototype.bindEvents=function(){$(document.body).keydown($.proxy(this.onKey,this)),$(document.body).keyup($.proxy(this.onKey,this)),this.$container.on("fileuploadadd",$.proxy(function(){$(document).trigger("fcx:image-dropper:file-added")},this)),this.$container.on("fileuploaddone",$.proxy(function(t,e){e.result.files[0].fileIndex=e.files[0].fileIndex,e.result.files[0].size=e.files[0].size,e.result.files[0].title=e.files[0].name.replace(/\.[^/.]+$/,""),e.result.files[0].filename=e.files[0].name,e.result.files[0].preview=e.files[0].preview,!1===this.isValidResult(e.result)&&(e.result.files[0].valid=!1),$(document).trigger("fcx:image-dropper:number-of-images-changed")},this)),this.$container.on("fileuploadalways",$.proxy(function(){$(document).trigger("fcx:image-dropper:number-of-images-changed"),this.numberOfImages+this.numberOfErrorImages===this.numberOfAllImages&&(!0===this.selectedFirstImage&&this.selectFirstImage(),$(document).trigger("fcx:image-dropper:upload-queue-complete"))},this)),this.$selectImagesBtn.on("click",$.proxy(this.toggleImagesSelection,this)),this.$container.on("click","#fcx-files .dz-success",$.proxy(this.onImageClick,this)),$(document).on("click",".fcx-error-click-btn",$.proxy(this.onErrorIconClick,this)),$(document).on("click",".fcx-done-click-btn",$.proxy(this.onDoneIconClick,this))},a.prototype.onDoneIconClick=function(t){var e=$(t.currentTarget).parents(".dz-done"),i=this.$deleteImagesBtn.data("confirm-text-hide-single");this.showConfirmModal(i).done(function(){e.remove(),$(document).trigger("fcx:image-dropper:number-of-images-changed")})},a.prototype.onErrorIconClick=function(t){var e=$(t.currentTarget).parents(".dz-error"),i=this.$deleteImagesBtn.data("confirm-text-single");this.showConfirmModal(i).done(function(){e.remove(),$(document).trigger("fcx:image-dropper:number-of-images-changed")})},a.prototype.uploadTemplate=function(t){var e=this.$container.find(".previewTemplate .dz-preview").clone(),i=this.fileIndex++;return t.files[0].fileIndex=i,e.attr("data-file-index",i),e},a.prototype.downloadTemplate=function(t){var e=t.files[0],i=this.$container.find(".previewTemplate .dz-preview").clone();return i.attr("data-file-index",e.fileIndex),i.attr("data-uuid",e.uuid),i.attr("data-exif",e.exif),i.attr("data-width",e.width),i.attr("data-height",e.height),i.attr("data-mime-type",e.mime_type),i.find(".title").text(e.title),i.find(".dz-filename span").text(e.filename),i.find(".dz-size span").text(e.size),i.find("span.preview").html(e.preview),i.find("span.error").html(e.error),this.fileHasError(e)?i.addClass("dz-complete dz-error").find(".dz-edit-mode,.dz-publish-state").remove():i.addClass("dz-complete dz-success"),i},a.prototype.onProcessFail=function(t,e){var i=e.files[0].fileIndex;switch(this.getMessageKeyByValue(e.files[0].error,e)){case"maxNumberOfFiles":case"acceptFileTypes":case"maxFileSize":case"minFileSize":this.getPreviewContainerByFileIndex(i).remove();break;case"unknownError":case"uploadedBytes":default:this.getPreviewContainerByFileIndex(i).addClass("dz-complete dz-error")}$(document).trigger("fcx:image-dropper:number-of-images-changed"),$(document).trigger("fcx:image-dropper:upload-image-process-failed")},a.prototype.getMessageKeyByValue=function(i,t){var o=!1;return $.each(t.messages,function(t,e){e!==i||(o=t)}),o},a.prototype.onImageClick=function(t){t.preventDefault(),t.stopPropagation();var e=$(t.currentTarget),i=0===this.numberOfSelectedImages?0:this.getImages().filter('[data-focus="1"]').index(".dz-success"),o=e.index(".dz-success");t.ctrlKey||this.isLeftCmdPressed||this.isRightCmdPressed?e.toggleClass("selected"):t.shiftKey?this.getImages().removeClass("selected").slice(Math.min(i,o),Math.max(i,o)+1).toggleClass("selected"):(e.toggleClass("selected",!e.hasClass("selected")||e.hasClass("selected")&&1<this.numberOfSelectedImages),e.siblings().removeClass("selected")),this.getImages().attr("data-focus","0"),e.attr("data-focus","1"),this.markTouchedErrorImages(),this.getSelectedImages().attr("data-touched","1"),$(document).trigger("fcx:image-dropper:demand-update-settings")},a.prototype.markTouchedErrorImages=function(){this.getTouchedImages().removeClass("dz-meta-error").filter('[data-has-meta-error="1"]').addClass("dz-meta-error")},a.prototype.fileHasError=function(t){var e=!1;return!1===t.valid&&(e=!0),void 0!==t.error&&""!==t.error&&(e=!0),e},a.prototype.isValidResult=function(t){var e=!0,i=t.files[0];return void 0!==i.uuid&&""!==i.uuid||(e=!1),e},a.prototype.getPreviewContainerByFileIndex=function(t){return this.$previewArea.find('li[data-file-index="'+t+'"]')},a.prototype.toggleImagesSelection=function(t){t.preventDefault(),this.getImages().toggleClass("selected",$(t.currentTarget).find("i").hasClass("fa-square")),this.markTouchedErrorImages(),this.getSelectedImages().attr("data-touched","1"),$(document).trigger("fcx:image-dropper:demand-update-settings")},a.prototype.markSelectedImagesTouched=function(){this.getSelectedImages().attr("data-touched","1")},a.prototype.selectFirstImage=function(){var t=this.getImages().first();0!==t.length&&(t.attr("data-focus","1"),t.attr("data-touched","1"),t.addClass("selected"),this.selectedFirstImage=!1,$(document).trigger("fcx:image-dropper:demand-update-settings"))},a.prototype.getImageByUuid=function(t){if(36===t.length){var e=this.getImages().filter('[data-uuid="'+t+'"]');if(1===e.length)return e}return!1},a.prototype.getImageByPhotoId=function(t){var e=this.getImages().filter('[data-photoid="'+t+'"]');return 1===e.length&&e},a.prototype.getAllImages=function(){return this.$container.find("#fcx-files").find(".fcx-preview")},a.prototype.getImages=function(){return this.getAllImages().filter(".dz-success")},a.prototype.getSelectedImages=function(){return this.getImages().filter(".selected")},a.prototype.getPublishedImages=function(){return this.getImages().filter('[data-publish="1"]')},a.prototype.getNotPublishedImages=function(){return this.getImages().not('[data-publish="1"]')},a.prototype.getNotSelectedPublishedImages=function(){return this.getImages().filter(':not(.selected)[data-publish="1"]')},a.prototype.getMetaErrorImages=function(){return this.getImages().filter('[data-has-meta-error="1"]')},a.prototype.getUploadSuccessImages=function(){return this.getAllImages().filter(".dz-upload-success")},a.prototype.getUploadErrorImages=function(){return this.getAllImages().filter(".dz-upload-error")},a.prototype.getTouchedImages=function(){return this.getImages().filter('[data-touched="1"]')},a.prototype.getSelectedPublishedImages=function(){return this.getSelectedImages().filter('[data-publish="1"]')},a.prototype.getErrorImages=function(){return this.getAllImages().filter(".dz-error")},a.prototype.getPublishImagesIcons=function(){return this.getPublishedImages().find(".dz-publish-state")},a.prototype.selectImages=function(){this.getImages().addClass("selected")},a.prototype.unselectImages=function(){this.getImages().removeClass("selected")},a.prototype.setSelectedImagesMetaData=function(t,e){"title"===t?this.getSelectedImages().find(".title").html(e):this.getSelectedImages().attr("data-"+t,e)},a.prototype.setImagesMetaData=function(t,e){"title"===t?this.getImages().find(".title").html(e):this.getImages().attr("data-"+t,e)},a.prototype.getSelectedImagesCumulatedMetaData=function(i,o){var n;return this.getSelectedImages().each(function(t,e){if(0<t&&n!==$(e).attr("data-"+i))return n=o,!1;n=$(e).attr("data-"+i)}),n},a.prototype.getSelectedImagesCumulatedMetaTitle=function(){var i;return this.getSelectedImages().find(".title").each(function(t,e){if(0<t&&i!==$(e).html())return i="",!1;i=$(e).html()}),i},a.prototype.getNumberOfTags=function(t){if(0!==t.length){var e=t.attr("data-tags").match(/\s*\[.*?\]\s*/g);if(null!==e)return e.length}return 0},a.prototype.showConfirmModal=function(t){var i=$("#fcx-modal-confirm");return i.find(".fcx-message").text(t),i.modal("show"),$.Deferred(function(e){$(document).keyup(function(t){i.modal("hide"),13===t.keyCode&&e.reject()}),i.find(".fcx-feedback button").one("click",function(t){i.modal("hide"),"ok"===$(t.currentTarget).data("value")?e.resolve():e.reject()})}).promise()},a.prototype.onKey=function(t){switch(t.keyCode){case 91:"keydown"===t.type&&(this.isLeftCmdPressed=!0),"keyup"===t.type&&(this.isLeftCmdPressed=!1);break;case 93:"keydown"===t.type&&(this.isRightCmdPressed=!0),"keyup"===t.type&&(this.isRightCmdPressed=!1);break;case 224:"keydown"===t.type&&(this.isLeftCmdPressed=!0,this.isRightCmdPressed=!0),"keyup"===t.type&&(this.isLeftCmdPressed=!1,this.isRightCmdPressed=!1)}},o(a,[{key:"numberOfAllImages",get:function(){return this.getAllImages().length}},{key:"numberOfImages",get:function(){return this.getImages().length}},{key:"numberOfSelectedImages",get:function(){return this.getSelectedImages().length}},{key:"numberOfPublishedImages",get:function(){return this.getPublishedImages().length}},{key:"numberOfNotPublishedImages",get:function(){return this.getNotPublishedImages().length}},{key:"numberOfNotSelectedPublishedImages",get:function(){return this.getNotSelectedPublishedImages().length}},{key:"numberOfMetaErrorImages",get:function(){return this.getMetaErrorImages().length}},{key:"numberOfUploadSuccessImages",get:function(){return this.getUploadSuccessImages().length}},{key:"numberOfUploadErrorImages",get:function(){return this.getUploadErrorImages().length}},{key:"numberOfTouchedImages",get:function(){return this.getTouchedImages().length}},{key:"numberOfSelectedPublishedImages",get:function(){return this.getSelectedPublishedImages().length}},{key:"numberOfErrorImages",get:function(){return this.getErrorImages().length}}]),a);function a(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.$container=t,this.options=e,this.init(),this.bindEvents()}i.default=s,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.ImageDropper=s,e.exports=i.default},{}],40:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("./Input"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Button=r,e.exports=i.default},{"./Input":42}],41:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("./Input"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.getValue=function(){var i=[];return $.each($(this.$container),$.proxy(function(t,e){i.push($(e).prop("checked"))},this)),i},l.prototype.setValue=function(t){var i=t.replace(/\s+/g,"").split(",");$.each($(this.$container),$.proxy(function(t,e){0<=$.inArray($(e).val(),i)?$(e).prop("checked",!0):$(e).prop("checked",!1)},this))},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Checkbox=r,e.exports=i.default},{"./Input":42}],42:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){this.options.$parent.on(this.options.event,this.$container,this.options.onEvent),this.options.$parent.on(this.options.event,this.$container,$.proxy(this.triggerCustomEvent,this))},n.prototype.triggerCustomEvent=function(){$(document).trigger("fcx:input:"+this.options.name)},n.prototype.getValue=function(){var i=[];return $.each($(this.$container),$.proxy(function(t,e){i.push($(e).val())},this)),i},n.prototype.setValue=function(i){$.each($(this.$container),$.proxy(function(t,e){$(e).val(i)},this))},n.prototype.getElement=function(){return $(this.$container)},n);function n(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.defaultOptions={$parent:$(document),name:"",value:"",event:"click",onEvent:function(){}},this.options=$.extend(this.defaultOptions,e),this.init()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Input=o,e.exports=i.default},{}],43:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("./Input"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Select=r,e.exports=i.default},{"./Input":42}],44:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n,s=o(t("./Input")),a=o(t("../KeyboardHandler")),r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=s.default),l.prototype.init=function(){n.prototype.init.call(this),new a.default("input-text-focus-"+this.options.name).init()},l.prototype.bindEvent=function(){n.prototype.bindEvent.call(this),this.options.$parent.on("focus",this.$container,$.proxy(this.onTextFocus,this)),this.options.$parent.on("focusout",this.$container,$.proxy(this.onTextFocusOut,this));var t="fcx:keyboard:input-text-focus-"+this.options.name+":enter";$(document).on(t,this.options.onEvent)},l.prototype.onTextFocus=function(){$(document).trigger("fcx:keyboard:input-text-focus-"+this.options.name+":startObserve")},l.prototype.onTextFocusOut=function(){$(document).trigger("fcx:keyboard:input-text-focus-"+this.options.name+":stopObserve")},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Text=r,e.exports=i.default},{"../KeyboardHandler":45,"./Input":42}],45:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.keys={left:37,up:38,right:39,down:40,enter:13},this.bindEvent()},n.prototype.bindEvent=function(){$(document).on("fcx:keyboard:"+this.name+":startObserve",$.proxy(this.observeKeyboard,this,!0)),$(document).on("fcx:keyboard:"+this.name+":stopObserve",$.proxy(this.observeKeyboard,this,!1))},n.prototype.observeKeyboard=function(t){var e=this.event+"."+this.name;$(document).off(e),t&&$(document).on(e,$.proxy(this.onKey,this))},n.prototype.onKey=function(t){this.triggerKeyEvent(t)},n.prototype.triggerKeyEvent=function(t){var e=t.keyCode||t.which,i=this.getKeyName(e);0<i.length&&!this.ignoredElementActive()?$(document).trigger("fcx:keyboard:"+this.name+":"+i):this.ignoredElementActive()||$(document).trigger("fcx:keyboard:"+this.name)},n.prototype.getKeyName=function(i){var o="";return $.each(this.keys,$.proxy(function(t,e){i===e&&(o=t)},this)),o},n.prototype.ignoredElementActive=function(){var i=!1;return $.each(this.ignoredElements,$.proxy(function(t,e){return $(e).is(":focus")?!(i=!0):'[contenteditable="true"]'===e&&"true"===$(document.activeElement).attr("contenteditable")?!(i=!0):void 0},this)),i},n);function n(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],i=arguments.length<=2||void 0===arguments[2]?"keyup":arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.name=t,this.ignoredElements=e,this.event=i}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.KeyboardHandler=o,e.exports=i.default},{}],46:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.execute=function(){this.init()},n.prototype.init=function(){this.scrollMultiplier=1,this.setScrollMultiplier(),this.lazyLoad(),this.bindEvents()},n.prototype.bindEvents=function(){$(window).on("scroll",$.proxy(this.lazyLoad,this))},n.prototype.lazyLoad=function(){var s=$(window).scrollTop(),a=s+$(window).height()*this.scrollMultiplier;$(this.selector).each($.proxy(function(t,e){var i=void 0===$(e).data("lazy-gap")?50:$(e).data("lazy-gap"),o=$(e).offset().top-i,n=o+$(e).height()+i;!$(e).attr("data-loaded")&&s<=n&&o<=a&&"complete"===document.readyState&&($(e).attr("data-loaded",!0),$(document).trigger("fcx:lazy-element:"+this.identifier+":loaded",{item:$(e)}))},this))},n.prototype.setScrollMultiplier=function(){var t=$('meta[name="viewport"]'),e=new RegExp(/.*target-densitydpi=device-dpi$/i);void 0!==window.devicePixelRatio&&0<t.length&&e.test(t.attr("content"))&&(this.scrollMultiplier=window.devicePixelRatio)},n);function n(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.selector=t,this.identifier=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.LazyElement=o,e.exports=i.default},{}],47:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n=o(t("./Advertisement.js")),s=o(t("./UniversalAnalyticsEvents.js")),a=(r.prototype.init=function(){this.initialViewport=$('meta[name="viewport"]').attr("content"),this.$overlay=$(".pswp").get(0),this.imageSrc=this.$image.attr("src"),this.imageWidth=this.$image.width(),this.imageHeight=this.$image.height(),this.setRealImageDimensions(),this.bindEvents()},r.prototype.bindEvents=function(){this.$image.off("click"),this.$image.on("click",$.proxy(this.showOverlay,this)),$(document).on("fcx:lightbox-image:hide",$.proxy(this.hideOverlay,this))},r.prototype.setRealImageDimensions=function(){this.imageHeight=this.$image.get(0).naturalHeight,this.imageWidth=this.$image.get(0).naturalWidth},r.prototype.showOverlay=function(t){t.preventDefault(),$(document).trigger("fcx:keyboard:photo-page:stopObserve"),this.universalAnalyticsEvents.triggerPageView(),this.addHeaderViewport(),this.setRealImageDimensions(),$("body").addClass("fcx-overflow-hidden");var e=this.$overlay,i=[{src:this.imageSrc,w:this.imageWidth,h:this.imageHeight}],o=new PhotoSwipe(e,PhotoSwipeUI_Default,i,{history:!1,focus:!1,shareEl:!1,showAnimationDuration:0,hideAnimationDuration:0});o.init(),o.listen("close",$.proxy(this.hideOverlayAndStartObserveKeyboard,this))},r.prototype.hideOverlayAndStartObserveKeyboard=function(){this.hideOverlay(),$(document).trigger("fcx:keyboard:photo-page:startObserve")},r.prototype.hideOverlay=function(){$("body").removeClass("fcx-overflow-hidden"),this.removeHeaderViewport()},r.prototype.addHeaderViewport=function(){$('meta[name="viewport"]').attr("content","width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no")},r.prototype.removeHeaderViewport=function(){$('meta[name="viewport"]').attr("content",this.initialViewport)},r);function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),0<t.length&&(this.$image=t,this.init()),this.advertisement=new n.default,this.universalAnalyticsEvents=new s.default}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.LightboxImage=a,e.exports=i.default},{"./Advertisement.js":2,"./UniversalAnalyticsEvents.js":144}],48:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.setLoadStateElement=function(t){this.$container=t},n.prototype.showLayer=function(){this.$container.addClass("modal-backdrop in")},n.prototype.hideLayer=function(){this.$container.removeClass("modal-backdrop in")},n.prototype.addSpinner=function(){this.removeSpinner(),this.$container.addClass("fcx-min-height").append($('<div class="fcx-spinner"/>').append("<div/>"))},n.prototype.removeSpinner=function(){this.$container.removeClass("fcx-min-height").html("")},n.prototype.show=function(){this.$container.show()},n.prototype.hide=function(){this.$container.hide()},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.LoadState=o,e.exports=i.default},{}],49:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("./SocialLogin"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.bindEvent=function(){n.prototype.bindEvent.call(this),this.$container.on("click",".js-button-facebook:not(.disabled)",$.proxy(this.onButtonClick,this)),$(document).on("fcx:template-loader:finished-loading:login-facebook",$.proxy(this.onLoginSuccess,this)),$(document).on("fcx:template-loader:failed-loading:login-facebook",$.proxy(this.onLoginError,this))},l.prototype.initElements=function(){n.prototype.initElements.call(this),this.button=this.$container.find(".js-button-facebook")},l.prototype.onButtonClick=function(t){t.preventDefault(),FB.login($.proxy(this.onFacebookAuthResponse,this),{scope:"email",return_scopes:!0}),this.button.addClass("disabled")},l.prototype.onFacebookAuthResponse=function(t){switch(t.status){case"connected":FB.api("/me",{fields:"name,email,picture.width(512).height(512)"},$.proxy(this.onFacebookUserResponse,this));break;default:this.button.removeClass("disabled")}},l.prototype.onFacebookUserResponse=function(t){var e={id:t.id,email:t.email,name:t.name,image_url:t.picture.data.url,network_id:1};this.templateLoader.setOptions({template:this.button.data("href"),name:"login-facebook",type:"POST",load:null,hasRawParams:!0,retry:!1,params:{user:JSON.stringify(e)}}),this.templateLoader.load()},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.FacebookLogin=r,e.exports=i.default},{"./SocialLogin":52}],50:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("./SocialLogin"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.bindEvent=function(){n.prototype.bindEvent.call(this),$.getScript("https://apis.google.com/js/platform.js").done($.proxy(this.onGApiLoaded,this)),$(document).on("fcx:template-loader:finished-loading:google-get-people",$.proxy(this.onGoogleGetPeopleSuccess,this)),$(document).on("fcx:template-loader:finished-loading:login-google",$.proxy(this.onLoginSuccess,this)),$(document).on("fcx:template-loader:failed-loading:login-google",$.proxy(this.onLoginError,this))},l.prototype.initElements=function(){n.prototype.initElements.call(this),this.button=this.$container.find(".js-button-google")},l.prototype.activateButton=function(){},l.prototype.onGApiLoaded=function(){"function"==typeof gapi&&gapi.load("auth2",$.proxy(this.initSignIn,this))},l.prototype.initSignIn=function(){var t=this;gapi.auth2.init({client_id:"781616697406",fetch_basic_profile:!0,scope:"profile"}).attachClickHandler(this.button.attr("id"),{},$.proxy(this.onGoogleAuthorize,this)),this.button.removeAttr("disabled").removeAttr("title").removeClass("disabled").on("click",function(){t.button.attr("disabled","disabled").addClass("disabled")})},l.prototype.onGoogleAuthorize=function(t){if(this.profile=null,t&&"function"==typeof t.getAuthResponse){var e=t.getAuthResponse().id_token;this.profile=t.getBasicProfile(),this.templateLoader.setOptions({template:"https://oauth2.googleapis.com/tokeninfo",name:"google-get-people",type:"GET",load:null,params:{id_token:e}}),this.templateLoader.load()}},l.prototype.onGoogleGetPeopleSuccess=function(t,e){if(null!==this.profile){var i=this.profile.getImageUrl()+"?sz=512",o={id:this.profile.getId(),name:this.profile.getName(),email:this.profile.getEmail(),image_url:i,network_id:2};this.submit({user:JSON.stringify(o)})}},l.prototype.submit=function(t){this.templateLoader.setOptions({template:this.button.data("href"),name:"login-google",type:"POST",load:null,hasRawParams:!0,retry:!1,params:t}),this.templateLoader.load()},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.GoogleLogin=r,e.exports=i.default},{"./SocialLogin":52}],51:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent(),this.initElements()},n.prototype.initElements=function(){$("input").placeholder({customClass:"fcx-placeholder"}),this.mailInput=this.$container.find(".js-login-mail"),this.passwordInput=this.$container.find(".js-login-password"),this.mailContainer=this.$container.find(".js-validate-mail-container"),this.passwordContainer=this.$container.find(".js-validate-password-container"),this.mailButton=this.$container.find(".js-validate-mail"),this.passwordButton=this.$container.find(".js-btn-submit-login"),this.profileMail=this.$container.find(".js-profile-mail"),this.profileImage=this.$container.find(".js-profile-image"),this.errorPassword=this.$container.find(".js-error-password"),this.errorMail=this.$container.find(".js-error-mail"),this.step=1},n.prototype.bindEvent=function(){this.$container.on("submit","form",$.proxy(this.onSubmit,this)),this.$container.on("click",".js-back-to-mail",$.proxy(this.backToMail,this)),this.$container.on("focus","input",$.proxy(this.onFocusInput,this)),window.DocumentEvent.on("fcx:template-loader:finished-loading:login-validate-mail",$.proxy(this.onValidatedMail,this)),window.DocumentEvent.on("fcx:template-loader:failed-loading:login-validate-mail",$.proxy(this.onFailedValidatedMail,this)),window.DocumentEvent.on("fcx:template-loader:finished-loading:login-validate",$.proxy(this.onValidatedLogin,this)),window.DocumentEvent.on("fcx:template-loader:failed-loading:login-validate",$.proxy(this.onFailedLogin,this))},n.prototype.onSubmit=function(t){t.preventDefault(),1!==this.step?0<this.mailInput.val().length&&1<this.step&&this.validateLogin():this.validateMail()},n.prototype.validateMail=function(){this.templateLoader.setOptions({template:this.mailButton.data("href"),name:"login-validate-mail",type:"POST",load:null,retry:!1,params:{mail:this.mailInput.val()}}),this.templateLoader.load()},n.prototype.onValidatedMail=function(t,e){this.mailContainer.addClass("hidden"),this.passwordContainer.removeClass("hidden"),this.profileMail.html($.trim(e.options.params.mail)),this.profileImage.attr("src",e.data),this.passwordInput.focus(),this.step=2},n.prototype.onFailedValidatedMail=function(t,e){if(0<e.data.length)return this.errorMail.html($.trim(e.data)),void this.errorMail.removeClass("hidden");var i=this.$container.data("redirect");i=-1<i.indexOf("?")?i+"&mail="+encodeURIComponent(this.mailInput.val()):i+"?mail="+encodeURIComponent(this.mailInput.val()),location.assign(i)},n.prototype.validateLogin=function(){this.templateLoader.setOptions({template:this.passwordButton.data("href"),name:"login-validate",type:"POST",load:null,retry:!1,params:{"login[login]":this.mailInput.val(),"login[pass]":this.passwordInput.val()}}),this.templateLoader.load()},n.prototype.backToMail=function(t){t.preventDefault(),this.passwordContainer.addClass("hidden"),this.mailContainer.removeClass("hidden"),this.profileImage.attr("src",""),this.profileMail.html(""),this.mailInput.val(""),this.mailInput.focus(),this.passwordInput.val(""),this.step=1},n.prototype.onValidatedLogin=function(){this.$container.off("submit","form"),window.setTimeout($.proxy(function(){this.$container.find("form").submit()},this),100)},n.prototype.onFailedLogin=function(t,e){this.passwordInput.val(""),this.errorPassword.html($.trim(e.data)),this.errorPassword.removeClass("hidden")},n.prototype.onFocusInput=function(){this.errorPassword.html(""),this.errorPassword.addClass("hidden"),this.errorMail.html(""),this.errorMail.addClass("hidden")},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.templateLoader=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Login=o,e.exports=i.default},{}],52:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent(),this.initElements(),this.activateButton()},n.prototype.bindEvent=function(){},n.prototype.initElements=function(){},n.prototype.activateButton=function(){setTimeout($.proxy(function(){this.button.removeClass("disabled")},this),500)},n.prototype.onLoginSuccess=function(t,e){location.assign(e.data)},n.prototype.onLoginError=function(t,e){this.$container.find(".js-social-login-error").toggleClass("hidden").html(e.data)},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.templateLoader=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.SocialLogin=o,e.exports=i.default},{}],53:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.xhrPool=[],this.bindEvents()},n.prototype.bindEvents=function(){window.DocumentEvent.on("fcx:mention-textarea:enabled",this.enableEditable,this),$(document).on("focus",".js-mentionable",$.proxy(this.onFocusContenteditable,this)),$(document).on("blur",".js-mentionable",$.proxy(this.hideSuggestions,this)),$(document).on("fcx:comment:submitted",$.proxy(this.onCommentSubmitted,this)),$(document).on("fcx:mention:request-textarea-update",$.proxy(this.onRequestTextareaUpdate,this))},n.prototype.onRequestTextareaUpdate=function(t,e){this.copyPlainTextData(e.div,e.textarea)},n.prototype.onCommentSubmitted=function(t,e){0<$("<div>"+e.html+"</div>").find(".js-mention-tag").length&&$(document).trigger("custom-submit",[e.uaEventData])},n.prototype.onFocusContenteditable=function(t){var e=$(t.currentTarget),i=e.parents(".js-mentionable-wrapper").parent().find("textarea.js-mention");e.attr("data-tribute")||1===i.length&&this.attachPlugin(e,i)},n.prototype.hideSuggestions=function(){$(".tribute-container").hide()},n.prototype.attachPlugin=function(t,e){var i=this,o=new Tribute({trigger:"@",lookup:"term",allowSpaces:!0,values:$.proxy(this.getSuggestions,this,t),noMatchTemplate:function(){return""},menuItemTemplate:function(t){return i.getFilledTemplateHtml($(".js-mention-suggestion-template").html(),t.original)},selectTemplate:function(t){return i.getFilledTemplateHtml($(".js-mention-replace-template").html(),t.original)}});t.on("tribute-replaced",$.proxy(this.copyPlainTextData,this,t,e)),t.on("keyup copy cut mouseup",$.proxy(this.changedMention,this,t,e)),t.on("paste",$.proxy(this.pasteOnlyText,this,t,e)),o.attach(t.get(0))},n.prototype.getSuggestions=function(t,e,i){var o=this;if(5<=t.find(".js-mention-tag").length)i([]);else{for(;0<this.xhrPool.length;)this.xhrPool.pop().abort();var n=$.ajax(t.attr("data-suggest")+"?term="+e.replace(/\s+/g,"+")).done(function(t){return i(o.getEnrichedData(t,e))});this.xhrPool.push(n)}},n.prototype.getEnrichedData=function(t,e){var i=e.split(" ")||[];return $.each(t,function(t,n){n.term=e,n.string=n.username,$.each(i,function(t,e){if(""!==e){var i="("+e.trim().replace(/[-[\]{}()*+?.,\\^$|§\s]/g,"\\$&")+")",o=new RegExp(i,"gi");n.string=n.string.replace(o,"<span>$1</span>")}})}),t},n.prototype.copyPlainTextData=function(t,e){""===t.text().trim()&&t.html(""),e.val(this.getPlainTextData(t).trim())},n.prototype.getPlainTextData=function(t){var e=t.clone();return e.find("style").remove(),e.find("div, p").each(function(t,e){return $(e).after("\n").replaceWith($(e).text())}),e.find("br").replaceWith("\n"),e.find(".js-mention-tag").each(function(t,e){var i=$(e).attr("data-userid"),o=$(e).attr("data-username");$(e).replaceWith("@"+i+"|"+o+"|")}),e.text().trim()+" "},n.prototype.getFilledTemplateHtml=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t=t.replace(new RegExp("§"+i+"§","gi"),e[i]));return t.trim()},n.prototype.changedMention=function(t,e){var i=t.find(".js-mention-tag");$.each(i,function(t,e){var i=$(e);i.text().trim()!==i.data("username")&&i.replaceWith("")}),this.copyPlainTextData(t,e)},n.prototype.pasteOnlyText=function(t,e,i){i.stopPropagation(),i.preventDefault();var o=(i.clipboardData||window.clipboardData||i.originalEvent.clipboardData||window.event.clipboardData).getData("text"),n=document.queryCommandSupported("insertText")?"insertText":"paste";document.execCommand(n,!1,o),this.copyPlainTextData(t,e)},n.prototype.enableEditable=function(t,e){var i=this,o=e.container.find(".js-mentionable"),n=e.container.parent(".media-body").find(".js-comment-text"),s=String(e.text);s=s.replace(/\n/g,"<br>"),this.extractPlainTextTags(n,e.text).forEach(function(t){s=s.replace(t.find,i.getFilledTemplateHtml($(".js-mention-replace-template").html(),t)+"&nbsp;")}),o.html(s)},n.prototype.extractPlainTextTags=function(t,e){for(var i=void 0,o=[],n=/@(\d+)\|([äáàâãéèêíìîöóòôõüúùûßñ_\-.\s\w]+)\|/gi;null!==(i=n.exec(e));)i.index===n.lastIndex&&n.lastIndex++,3===i.length&&o.push({find:i[0],userid:i[1],username:i[2],thumb:t.find('[data-image-user="'+i[1]+'"]').attr("src")});return o},n);function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Mention=o,e.exports=i.default},{}],54:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){$(document).on("fcx:meta-information:update",$.proxy(this.updateMetaInformations,this))},n.prototype.updateMetaInformations=function(t,e){if(e.title.length<=0||e.description.length<=0)return!1;$("title").text(e.title.trim()),$('meta[name="description"]').attr("content",e.description.trim())},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.MetaInformationUpdater=o,e.exports=i.default},{}],55:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.resetClipboard(),this.$form=this.$container.find("form"),0!==this.$form.length&&this.bindEvents()},n.prototype.bindEvents=function(){this.$container.on("shown.bs.modal",$.proxy(this.onModalShown,this)),this.$container.on("hidden.bs.modal",$.proxy(this.onModalHidden,this))},n.prototype.onModalShown=function(){this.$form.find(":input:not(:checkbox)").each($.proxy(function(t,e){var i=$(e);i.prop("name")&&(this.clipboard[i.prop("name")]=i.val())},this)),this.$form.find(":input:checkbox").each($.proxy(function(t,e){var i=$(e);i.prop("id")&&(this.clipboard[i.prop("id")]=i.is(":checked"))},this))},n.prototype.onModalHidden=function(){this.$form.find(":input:not(:checkbox)").each($.proxy(function(t,e){var i=$(e),o=i.prop("name");this.clipboard.hasOwnProperty(o)&&i.val(this.clipboard[i.prop("name")])},this)),this.$form.find(":input:checkbox").each($.proxy(function(t,e){var i=$(e),o=i.prop("id");this.clipboard.hasOwnProperty(o)&&i.prop("checked",this.clipboard[i.prop("id")])},this)),this.resetClipboard()},n.prototype.onModalUpdate=function(){this.resetClipboard(),this.onModalShown()},n.prototype.resetClipboard=function(){this.clipboard={}},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.init()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.ModalFormResetter=o,e.exports=i.default},{}],56:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.execute=function(){this.init(),this.bindEvents()},n.prototype.init=function(){this.$label=$(".onboarding__avatar label"),this.$input=$('input[type="file"]',this.$label),this.$image=$("img",this.$label),this.$changeEmailTarget=$("#change-email-link"),this.$changeEmailLink=this.$changeEmailTarget.data("ajax-target"),this.$modalEmailEdit=$("#fcx-modal-edit-email"),this.$formEmailEdit=$("form#change-email-data"),this.$recommendationHint=$("#recommendation-hint")},n.prototype.bindEvents=function(){this.$input.on("change",$.proxy(this.onFileInputChange,this)),this.$changeEmailTarget.on("click",$.proxy(this.showModal,this)),$(document).on("submit","#change-email-data",$.proxy(this.onSubmit,this)),$(document).on("focus","#signup-login",$.proxy(this.onInputFocus,this)),$(document).on("click",".fcx-close-flash-message",$.proxy(this.closeFlashMeassage,this)),$(document).on("click",".fcx-select-all-user-to-follow",$.proxy(this.selectAllUserToFollow,this)),$(document).on("click",".fcx-deselect-all-user-to-follow",$.proxy(this.deselectAllUserToFollow,this)),$(document).on("change",".fcx-user-to-follow",$.proxy(this.onChangeUserToFollow,this))},n.prototype.onFileInputChange=function(t){var e=t.currentTarget;if(e.files&&e.files[0]){var i=e.files[0];if("image/jpeg"===i.type){$("#fcx-invalid-filetype").addClass("hidden");var o=new FileReader;o.onload=$.proxy(function(t){this.$image.attr("src",t.target.result)},this),o.readAsDataURL(i)}else $("#fcx-invalid-filetype").removeClass("hidden")}else this.$label.addClass("fcx-no-preview")},n.prototype.showModal=function(t){t.preventDefault(),this.ajax(this.$changeEmailLink).done($.proxy(function(t){void 0!==t.state&&"init"===t.state&&(this.$modalEmailEdit.find("#signup-login").parent().html(t.html),this.$modalEmailEdit.modal("show"))},this))},n.prototype.ajax=function(t,e){var i=arguments.length<=1||void 0===e?{}:e;return void 0!==this.cookieCode&&(t=t.replace(/(.*\/).*?$/i,"$1"+this.cookieCode)),$.ajax(t,{type:"post",dataType:"json",data:i})},n.prototype.onInputFocus=function(){this.$formEmailEdit.removeClass("error")},n.prototype.closeFlashMeassage=function(t){$(t.currentTarget).parents(".fcx-notification-global").addClass("hidden")},n.prototype.onSubmit=function(t){t.preventDefault();var e=encodeURIComponent(this.$modalEmailEdit.find("#signup-login").attr("name"))+"="+encodeURIComponent(this.$modalEmailEdit.find("#signup-login").val());this.ajax(this.$changeEmailLink,e).done($.proxy(this.handleSubmitResponse,this))},n.prototype.handleSubmitResponse=function(t){if(void 0!==t.state)switch(t.state){case"submit-success":document.cookie=t.cookie.name+"="+t.cookie.value+"; path=/";var e=$.parseJSON(t.cookie.value);this.cookieCode=e.code,this.$modalEmailEdit.modal("hide"),$("#email-edit-fash-message").removeClass("hidden");break;case"submit-error":this.$formEmailEdit.find(".error-msg").html(t.html),this.$formEmailEdit.addClass("error")}},n.prototype.selectAllUserToFollow=function(t){t.preventDefault(),this.setAllUserToFollow(!0),this.hideAllUserToFollowButton()},n.prototype.deselectAllUserToFollow=function(t){t.preventDefault(),this.setAllUserToFollow(!1),this.showAllUserToFollowButton()},n.prototype.setAllUserToFollow=function(t){var e=$(".fcx-user-to-follow"),i=e.parents(".card--user");e.prop("checked",t),i.toggleClass("not—selected",!t),e.trigger("change")},n.prototype.showAllUserToFollowButton=function(){$(".fcx-select-all-user-to-follow").removeClass("hidden"),$(".fcx-deselect-all-user-to-follow").addClass("hidden")},n.prototype.hideAllUserToFollowButton=function(){$(".fcx-select-all-user-to-follow").addClass("hidden"),$(".fcx-deselect-all-user-to-follow").removeClass("hidden")},n.prototype.onChangeUserToFollow=function(t){$(".fcx-user-to-follow:checked").length<=0?(this.$recommendationHint.modal("show"),this.showAllUserToFollowButton()):(this.$recommendationHint.modal("hide"),this.hideAllUserToFollowButton()),this.setIsNotSelectedUserCard(t)},n.prototype.setIsNotSelectedUserCard=function(t){var e=$(t.currentTarget),i=!e.is(":checked");e.parents(".card--user").toggleClass("not--selected",i)},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Onboarding=o,e.exports=i.default},{}],57:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvents(),this.blurInterval=null},n.prototype.bindEvents=function(){this.$container.on("mousedown",".js-onboarding-username-submit",$.proxy(this.onButtonMouseDown,this)),this.$container.on("keydown",".js-onboarding-username-input",$.proxy(this.onKeyboardDown,this)),this.$container.on("click",".js-onboarding-username-submit",$.proxy(this.onSubmit,this)),this.$container.on("click",".js-onboarding-username-edit-button",$.proxy(this.showForm,this)),this.$container.on("click",".js-onboarding-username-content",$.proxy(this.showForm,this)),this.$container.on("click",".js-onboarding-username-cancel",$.proxy(this.onButtonCancel,this)),window.DocumentEvent.on("fcx:template-loader:finished-loading:persist-onboarding-username",this.onLoaded,this)},n.prototype.onKeyboardDown=function(t){13===(t.keyCode||t.which)&&this.onSubmit(t)},n.prototype.onButtonMouseDown=function(){this.stopBlurWatcher(),this.$container.find(".js-onboarding-username-input").focus()},n.prototype.onSubmit=function(t){this.stopBlurWatcher(),t.preventDefault();var e={"onboarding_username[username]":this.$container.find(".js-onboarding-username-input").val()};this.templateLoader.setOptions({template:this.$container.find("form").attr("action"),name:"persist-onboarding-username",type:"POST",target:this.$container.find(".js-onboarding-username-form"),params:e}),this.templateLoader.load()},n.prototype.onButtonCancel=function(t){t.preventDefault(),this.hideForm()},n.prototype.onLoaded=function(){this.$container.find(".js-onboarding-errors ul").length<1?(this.$container.find(".js-onboarding-username-content").text(this.$container.find(".js-onboarding-username-input").val()),this.hideForm()):this.showForm()},n.prototype.showForm=function(){this.$container.find(".js-onboarding-username-form").removeClass("hidden"),this.$container.find(".js-onboarding-username-headline").addClass("hidden"),this.$container.find(".js-onboarding-username-input").focus(),this.startBlurWatcher()},n.prototype.hideForm=function(){this.stopBlurWatcher(),this.$container.find(".js-onboarding-username-form").addClass("hidden"),this.$container.find(".js-onboarding-username-headline").removeClass("hidden"),this.$container.find(".js-onboarding-username-input").val(this.$container.find(".js-onboarding-username-content").text())},n.prototype.startBlurWatcher=function(){var t=this.$container.find(".js-onboarding-username-input");this.blurInterval=setInterval($.proxy(function(){t.is(":focus")||this.hideForm()},this),100)},n.prototype.stopBlurWatcher=function(){clearInterval(this.blurInterval)},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.templateLoader=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.OnboardingUsername=o,e.exports=i.default},{}],58:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){this.$container.on("change",'select[name="pagination[]"]',$.proxy(this.onPagination,this)),this.$container.on("input propertychange",".fcx-pagination-selectpicker .bs-searchbox input",$.proxy(this.onLiveSearch,this))},n.prototype.onPagination=function(t){var e=$(t.currentTarget).find("option:selected").data("href"),i=new RegExp("[\\?&]page=([^&#]*)").exec(e);$(document).trigger("fcx:pagination:paginate",{page:parseInt(i[1],10),event:t})},n.prototype.onLiveSearch=function(t){var e=$(".fcx-pagination-selectpicker"),i=e.find(".pagination-option").parents("li"),o=e.find(".pagination-option-placeholder"),n=e.find(".pagination-option-placeholder").parents("li"),s=parseInt(e.find(".fcx-pagination-selectpicker-page-count").text(),10),a=parseInt($(t.currentTarget).val(),10);e.find(".no-results").hide(),$.isNumeric(a)&&0<a?a<=s&&(o.text(a),o.attr("data-href",this.buildUrl(a)),i.addClass("hidden"),o.show(),n.removeClass("hidden"),n.addClass("active")):(i.removeClass("hidden"),this.setActive(i),o.hide(),n.addClass("hidden"))},n.prototype.buildUrl=function(t){var e=$(".fcx-pagination-url").text(),i=new RegExp("[\\?&]page=([^&#]*)").exec(e),o=new RegExp("[\\?&]page=").exec(e),n=e.split(i[0]),s="",a=o[0]+t;return $(n).each(function(t,e){s+=e}),s+a},n.prototype.setActive=function(t){t.removeClass("active"),t.each(function(){$(this).hasClass("selected")&&$(this).addClass("active")})},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PaginationPicker=o,e.exports=i.default},{}],59:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.initElements(),this.bindEvent()},n.prototype.initElements=function(){$("input").placeholder({customClass:"fcx-placeholder"})},n.prototype.bindEvent=function(){this.$container.on("focus",".js-password-toggle",$.proxy(this.onFocus,this)),this.$container.on("blur",".js-password-toggle",$.proxy(this.checkLength,this))},n.prototype.onFocus=function(t){$(".text-danger",this.$container).html(""),$(t.currentTarget).parents(".form-group").removeClass("has-error")},n.prototype.checkLength=function(t){var e=$(t.currentTarget),i=e.parents(".form-group"),o=e.val().length;i.removeClass("has-error"),0<o&&o<5&&i.addClass("has-error")},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PasswordLengthChecker=o,e.exports=i.default},{}],60:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.initElements(),this.bindEvent()},n.prototype.initElements=function(){$("input").placeholder({customClass:"fcx-placeholder"}),this.passwordInput=this.$container.find(".js-password-toggle"),this.toggleButton=this.$container.find(".js-toggle-pass-button")},n.prototype.bindEvent=function(){this.$container.on("click",".js-toggle-pass",$.proxy(this.togglePass,this))},n.prototype.togglePass=function(){this.passwordInput.attr("type",function(t,e){return"password"===e?"text":"password"}),this.toggleButton.toggleClass("fa-eye fa-eye-slash")},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PasswordVisibilityToggler=o,e.exports=i.default},{}],61:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.getCleanedNumber=function(t){return t.trim().replace(/[^0-9]/gi,"")},n.prototype.getFormattedNumber=function(t){return t.replace(/^(\d{4})(\d{4})(\d{4})(\d{4})$/,"$1 $2 $3 $4")},n.prototype.getCleanedValidDate=function(t){var e=t.trim().replace(/[^0-9\/]/gi,"").split("/");return 2!==e.length?"":String("00"+e[0]).substr(-2)+"/"+String("00"+e[1]).substr(-2)},n.prototype.getFormattedValidDate=function(t){return t.replace("/"," / ")},n.prototype.validateNumber=function(t){if(!/\d{16}/.test(t))return!1;var e=this.creditCardType(t);if(e.length<1)return!1;var i=e[0];return("visa"===i.type||"master-card"===i.type)&&!!new RegExp(i.exactPattern).test(t)&&i},n.prototype.validateValidDate=function(t){var e=t.replace(/^(\d{2})\/(\d{2})$/,"20$2-$1-01"),i=new Date(e),o=new Date;return!(isNaN(i.getTime())||i.getTime()<o.getTime())},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.creditCardType=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.CreditCard=o,e.exports=i.default},{}],62:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.initProperties(),this.bindEvents()},n.prototype.initProperties=function(){this.$geoTrust=$("#fcx-payment--geotrust")},n.prototype.bindEvents=function(){this.$geoTrust.on("click",$.proxy(this.onClickGeotrust,this))},n.prototype.onClickGeotrust=function(){this.showGeoTrustWindow()},n.prototype.showGeoTrustWindow=function(){var t=Math.min(400,$(window).width()),e=Math.min(600,$(window).height()),i=parseInt(($(window).width()-t)/2,10),o=parseInt(($(window).height()-e)/2,10),n=window.location.protocol+"//"+window.location.hostname,s="status=1, location=0, scrollbars=1, resizeable=yes, width="+t+", height="+e+", left="+i+", top="+o;window.open("https://smarticon.geotrust.com/smarticonprofile?Referer="+n,"GT__SIP",s)},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.GeoTrust=o,e.exports=i.default},{}],63:[function(t,e,i){"use strict";i.__esModule=!0;var o=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t};function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var s=(a.prototype.getCleanedIban=function(t){return t.trim().toUpperCase().replace(/[^a-z0-9]/gi,"")},a.prototype.getFormattedIban=function(t){return t.toUpperCase().replace(/^(.{4})(.{4})(.{4})(.{4})(.{4})(.{2})$/,"$1 $2 $3 $4 $5 $6")},a.prototype.validate=function(t){if(!/DE\d{20}/.test(t))return $.Deferred().resolve({success:!1}).promise();var e=t.substr(4)+t.substr(0,4);if(1!==this._txtMod97(this._replaceChars(e)))return $.Deferred().resolve({success:!1}).promise();var i=this._blzValidationUrl+"?blz="+t.substr(4,8);return $.ajax(i)},a.prototype._txtMod97=function(t){for(var e=0,i=0;i<t.length;i++)e=(10*e+parseInt(t[i],10))%97;return e},a.prototype._replaceChars=function(t){for(var e="",i=0;i<t.length;i++){var o=t.charCodeAt(i);65<=o&&o<=90?e+=(o-55).toString():97<=o&&o<=122?e+=(o-87).toString():48<=o&&o<=57&&(e+=t[i])}return e},o(a,[{key:"blzValidationUrl",set:function(t){this._blzValidationUrl=t},get:function(){return this._blzValidationUrl}}]),a);function a(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a)}i.default=s,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Iban=s,e.exports=i.default},{}],64:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){$("input").placeholder({customClass:"fcx-placeholder"}),this.$form=$("#fcx-payment__form"),this.$submit=$(".btn--submit"),this.address.init(),this.bindEvents()},n.prototype.bindEvents=function(){this.$submit.on("click",$.proxy(this.onSubmit,this))},n.prototype.onSubmit=function(t){t.preventDefault(),this.address.validate(),this.address.isValid()&&this.$form.submit()},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.address=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.InvoiceAddress=o,e.exports=i.default},{}],65:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){$("input").placeholder({customClass:"fcx-placeholder"}),this.initProperties(),this.bindEvents()},n.prototype.initProperties=function(){this.$form=$("#fcx-payment__form"),this.$submit=$(".btn--submit")},n.prototype.bindEvents=function(){1===this.$submit.length&&this.$submit.on("click",$.proxy(this.onSubmit,this))},n.prototype.onSubmit=function(t){t.preventDefault(),this.validate(),this.isValid()&&this.$form.submit()},n.prototype.validate=function(){this.addressForm.validate(),this.paymentForm&&this.paymentForm.validate()},n.prototype.isValid=function(){var t=this.addressForm.isValid();return this.paymentForm&&(t&=this.paymentForm.isValid()),t},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.paymentForm=t,this.addressForm=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Payment=o,e.exports=i.default},{}],66:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){return $("input").placeholder({customClass:"fcx-placeholder"}),this.initProperties(),this.bindEvents(),this.autocomplete.init(),this.autocomplete.loadApi(),this.formHelper.init([{field:this.$firstname},{field:this.$lastname},{field:this.$street},{field:this.$zip},{field:this.$city},{field:this.$country,event:"fcx-payment:address:country-change"}]),this.formHelper.bindChangeEvents(),this},n.prototype.initProperties=function(){this.$firstname=$("#fcx-payment__form-first-name"),this.$lastname=$("#fcx-payment__form-last-name"),this.$street=$("#fcx-payment__form-street"),this.$zip=$("#fcx-payment__form-zip"),this.$city=$("#fcx-payment__form-city"),this.$country=$("#fcx-payment__form-country"),this.$country.selectpicker(),this.isNameFieldsDirty=!1,this.googleApiKey=$("#fcx-google-api-key").data("key")},n.prototype.initAutocomplete=function(){var t=this.$country.val().toLowerCase();this.autocomplete.addFields({street:{field:this.$street,types:["address"],country:t,callback:$.proxy(this.onStreetChanged,this)},zip:{field:this.$zip,types:["(regions)"],country:t,callback:$.proxy(this.onZipChanged,this)},city:{field:this.$city,types:["(cities)"],country:t,callback:$.proxy(this.onCityChanged,this)}})},n.prototype.bindEvents=function(){this.$firstname.on("keyup",$.proxy(this.onNameFieldsKeyup,this)),this.$lastname.on("keyup",$.proxy(this.onNameFieldsKeyup,this)),$(document).on("fcx-payment:payment-form:account-owner-changed",$.proxy(this.onAccountOwnerChange,this)),$(document).on("fcx-payment:address:country-change",$.proxy(this.onCountryChange,this)),$(document).on("fcx:google-api:maps-loaded",$.proxy(this.initAutocomplete,this))},n.prototype.onStreetChanged=function(t){!1!==t&&(this.processCityAddressComponent(t),this.processZipAddressComponent(t),this.processStreetAddressComponent(t))},n.prototype.onZipChanged=function(t){!1!==t&&(this.processCityAddressComponent(t),this.processZipAddressComponent(t))},n.prototype.onCityChanged=function(t){!1!==t&&this.processCityAddressComponent(t)},n.prototype.onCountryChange=function(){this.autocomplete.updateCountryRestriction(this.$country.val().toLowerCase())},n.prototype.onNameFieldsKeyup=function(){this.isNameFieldsDirty=""!==this.$firstname.val().trim()||""!==this.$lastname.val().trim()},n.prototype.onAccountOwnerChange=function(t,e){if(!this.isNameFieldsDirty){var i=e.accountOwner.trim();if(this.$firstname.val(""),this.$lastname.val(""),""!==i){var o=i.split(" ");1<o.length&&this.$lastname.val(o.pop()),this.$firstname.val(o.join(" "))}}},n.prototype.processStreetAddressComponent=function(t){!1!==t.street&&(this.$street.val(t.street),this.formHelper.validateField(this.$street,this.$street.val()),!1!==t.number&&(""===this.$zip.val()?this.$zip.focus():""===this.$city.val()?this.$city.focus():this.$street.blur()))},n.prototype.processZipAddressComponent=function(t){!1!==t.zip&&(this.$zip.val(t.zip),this.formHelper.validateField(this.$zip,this.$zip.val()),""===this.$city.val()?this.$city.focus():this.$zip.blur())},n.prototype.processCityAddressComponent=function(t){!1!==t.city&&(this.$city.val(t.city),this.formHelper.validateField(this.$city,this.$city.val()),this.$city.blur())},n.prototype.validate=function(){this.formHelper.validate()},n.prototype.isValid=function(){return this.formHelper.isValid()},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.formHelper=t,this.autocomplete=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PaymentAddress=o,e.exports=i.default},{}],67:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){return $("input").placeholder({customClass:"fcx-placeholder"}),this.initProperties(),this.formHelper.init([{field:this.$accountOwner},{field:this.$numberShow,event:"fcx-payment:credit-card:number-change"},{field:this.$validDateShow,event:"fcx-payment:credit-card:valid-date-change"},{field:this.$cvc}]),this.bindEvents(),this.formHelper.bindChangeEvents(),this},n.prototype.initProperties=function(){return this.$accountOwner=$("#fcx-payment__form-account-name"),this.$number=$("#fcx-payment__form-account-number"),this.$numberShow=$("#fcx-payment__form-account-number-show"),this.$numberFormGroup=this.$numberShow.parents(".form-group"),this.$validDate=$("#fcx-payment__form-account-valid-date"),this.$validDateShow=$("#fcx-payment__form-account-valid-date-show"),this.$cvc=$("#fcx-payment__form-account-cvc"),this},n.prototype.bindEvents=function(){$(document).on("fcx-payment:credit-card:number-change",$.proxy(this.onNumberChange,this)),$(document).on("fcx-payment:credit-card:valid-date-change",$.proxy(this.onValidDateChange,this)),this.$accountOwner.on("change keydown keyup",$.proxy(this.onAccountOwnerChange,this))},n.prototype.onAccountOwnerChange=function(){$(document).trigger("fcx-payment:payment-form:account-owner-changed",{accountOwner:this.$accountOwner.val()})},n.prototype.onNumberChange=function(){if(this.$numberFormGroup.removeClass("has-feedback"),!this.$number.parents(".form-group").hasClass("has-error")){var t=this.creditCard.getCleanedNumber(this.$numberShow.val());if(this.$number.val(t),""!==t){var e=this.creditCard.validateNumber(t);!1!==e?(this.$number.val(t),this.$numberShow.val(this.creditCard.getFormattedNumber(t)),this.$numberFormGroup.addClass("has-feedback").attr("data-type",e.type)):this.formHelper.setError(this.$numberShow,this.$numberShow.data("error"))}}},n.prototype.onValidDateChange=function(){if(!this.$validDate.parents(".form-group").hasClass("has-error")){var t=this.creditCard.getCleanedValidDate(this.$validDateShow.val());this.$validDate.val(t),""!==t&&(this.creditCard.validateValidDate(t)?(this.$validDate.val(t),this.$validDateShow.val(this.creditCard.getFormattedValidDate(t))):this.formHelper.setError(this.$validDateShow,this.$validDateShow.data("error")))}},n.prototype.validate=function(){this.formHelper.validate(),this.onNumberChange(),this.onValidDateChange()},n.prototype.isValid=function(){return this.formHelper.isValid()},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.formHelper=t,this.creditCard=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PaymentCreditCard=o,e.exports=i.default},{}],68:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){return $("input").placeholder({customClass:"fcx-placeholder"}),this.initProperties(),this.formHelper.init([{field:this.$accountOwner},{field:this.$ibanShow,event:"fcx-payment:direct-debit:iban-change"}]),this.bindEvents(),this.formHelper.bindChangeEvents(),this},n.prototype.initProperties=function(){return this.$accountOwner=$("#fcx-payment__form-account-name"),this.$iban=$("#fcx-payment__form-iban"),this.$ibanShow=$("#fcx-payment__form-iban-show"),this.$bankname=$("#fcx-payment__form-bankname"),this.$banknameShow=$("#fcx-payment__form-bankname-show"),this.iban.blzValidationUrl=this.$iban.parents("form").data("blz-validation-url"),this},n.prototype.bindEvents=function(){$(document).on("fcx-payment:direct-debit:iban-change",$.proxy(this.onIbanChange,this)),this.$accountOwner.on("change keydown keyup",$.proxy(this.onAccountOwnerChange,this))},n.prototype.onAccountOwnerChange=function(){$(document).trigger("fcx-payment:payment-form:account-owner-changed",{accountOwner:this.$accountOwner.val()})},n.prototype.onIbanChange=function(){this.$iban.parents(".form-group").hasClass("has-error")||(this.$banknameShow.val(""),this.formHelper.resetError(this.$ibanShow),this.validateIban())},n.prototype.validateIban=function(){var e=this,i=this.iban.getCleanedIban(this.$ibanShow.val());this.$iban.val(i),""!==i&&(this.$ajax=this.iban.validate(i),this.$ajax.done($.proxy(function(t){t.success?(e.$bankname.val(t.bankname),e.$banknameShow.val(t.bankname),e.$iban.val(i),e.$ibanShow.val(e.iban.getFormattedIban(i))):e.formHelper.setError(e.$ibanShow,e.$ibanShow.data("error"))}),this))},n.prototype.abortAjax=function(){void 0!==this.$ajax&&this.$ajax.abort()},n.prototype.validate=function(){this.abortAjax(),this.formHelper.validate(),this.validateIban(),this.abortAjax()},n.prototype.isValid=function(){return this.formHelper.isValid()},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.formHelper=t,this.iban=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PaymentDirectDebit=o,e.exports=i.default},{}],69:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvents(),this.loadState.setLoadStateElement($(".fcx-load-placeholder"))},n.prototype.bindEvents=function(){window.DocumentEvent.on("fcx:template-loader:start-loading:product-option-id",$.proxy(this.onProductSelectorChanged,this)),window.DocumentEvent.on("fcx:template-loader:finished-loading:product-option-id",$.proxy(this.onProductSelectorSaved,this))},n.prototype.onProductSelectorChanged=function(){this.loadState.addSpinner(),this.$container.hide()},n.prototype.onProductSelectorSaved=function(t,e){this.$container.html(e.data),this.loadState.removeSpinner(),this.$container.show(),$(document).trigger("fcx:base:setup-tooltips")},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.loadState=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PaymentIndex=o,e.exports=i.default},{}],70:[function(t,e,i){"use strict";i.__esModule=!0;var o,n=t("../Dropdown/Dropdown"),s=(o=n)&&o.__esModule?o:{default:o},a=(r.prototype.init=function(){this.savePaymentUrl=this.$container.data("save-payment-url"),this.dropdownProduct=new s.default(this.selector+" .fcx-payment__product .fcx-dropdown").init(),this.dropdownProductOption=new s.default(this.selector+" .fcx-payment__product-option .fcx-dropdown").init(),this.bindEvents();var t=parseInt(this.$container.data("product-id"),10),e=parseInt(this.$container.data("product-option-id"),10);return 0===t||0===e?this.dropdownProduct.$container.find(".fcx-dropdown__body-item").eq(0).trigger("click"):this.filterProductOptionItems(t),this},r.prototype.bindEvents=function(){this.dropdownProduct.$container.on("fcx:dropdown-item-selected",$.proxy(this.onProductIdSelected,this)),this.dropdownProductOption.$container.on("fcx:dropdown-item-selected",$.proxy(this.onProductOptionSelected,this))},r.prototype.onProductIdSelected=function(t,e){var i=e.value,o=this.dropdownProductOption.$container.find(".fcx-dropdown__body-item"),n=o.filter('[data-rel-id="'+i+'"]');n.eq(0).trigger("click"),o.hide(),n.show()},r.prototype.onProductOptionSelected=function(){var t=this.dropdownProductOption.$container.find('.fcx-dropdown__body-item[data-selected="1"]').data("option-value");this.saveInSession(t.productOptionId)},r.prototype.saveInSession=function(t){this.templateLoader.setOptions({template:this.savePaymentUrl,name:"product-option-id",type:"POST",load:null,params:{productOptionId:t}}),this.templateLoader.load()},r.prototype.filterProductOptionItems=function(t){var e=this.dropdownProductOption.$container.find(".fcx-dropdown__body-item"),i=e.filter('[data-rel-id="'+t+'"]');e.hide(),i.show()},r);function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.selector=t,this.$container=$(t),this.templateLoader=e}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.ProductSelector=a,e.exports=i.default},{"../Dropdown/Dropdown":22}],71:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.initProperties=function(){this.RELATIVE_LENS_RADIUS=1/16,this.resizing=!1,this.$peephsowImage=this.$container.find(".peepshow__image"),this.$peephsowLens=this.$container.find(".peepshow__lense")},n.prototype.init=function(){this.setupLens(),this.positionLens(),this.bindEvents()},n.prototype.bindEvents=function(){$("html .peepshow").on("mousemove",$.proxy(this.onMouseMove,this)),$("html .peepshow__image").on("touchstart",$.proxy(this.onTouchStart,this)),$(window).resize($.proxy(this.onResize,this))},n.prototype.onResize=function(){window.clearTimeout(this.resizing),this.resizing=window.setTimeout($.proxy(function(){window.clearTimeout(this.resizing),this.positionLens()},this),100)},n.prototype.onTouchStart=function(t){var e=this.$peephsowImage.offset(),i=t.originalEvent.touches[0],o=i.clientX-(e.left-$(window).scrollLeft()),n=i.clientY-(e.top-$(window).scrollTop());this.positionLens(o,n)},n.prototype.onMouseMove=function(t){var e=this.$peephsowImage.offset(),i=t.pageX-e.left,o=t.pageY-e.top;this.positionLens(i,o)},n.prototype.setupLens=function(){this.$peephsowLens.css({"background-image":'url("'+this.$peephsowImage.data("clear-image")+'")'})},n.prototype.positionLens=function(t,e){var i=this.$peephsowImage.width()*this.RELATIVE_LENS_RADIUS,o=parseInt(Math.min(10,Math.max(2,i/15)),10),n=this.$peephsowImage.width(),s=this.$peephsowImage.height();void 0===t&&(t=.5245614035*n),void 0===e&&(e=.2787318362*s),t=Math.max(1,t)-i,e=Math.max(1,e)-i,this.$peephsowLens.css({width:2*i+"px",height:2*i+"px",top:e+"px",left:t+"px","background-position":-1*(t+o)+"px "+-1*(e+o)+"px","background-size":n+"px "+s+"px","border-width":o+"px","box-shadow":"0 0 "+o+"px rgba(0, 0, 0, 0.75)"})},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.initProperties()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Peepshow=o,e.exports=i.default},{}],72:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){window.DocumentEvent.on("fcx:photo-comment-visibility:toggle",this.update,this),window.DocumentEvent.on("fcx:photo-comment:updated",this.update,this),window.DocumentEvent.on("fcx:photo-comment-reply:added",this.update,this)},n.prototype.update=function(t,e){if(void 0!==e.response&&void 0!==e.id){var i=e.id;this.$container.find(".js-comment[id='"+i+"']").replaceWith(e.response),$(document).trigger("fcx:base:setup-tooltips"),$(document).trigger("fcx:photo:editable-text:canceled")}},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoComment=o,e.exports=i.default},{}],73:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){window.DocumentEvent.on("fcx:photo-comment-list:updated",this.updateCounter,this),window.DocumentEvent.on("fcx:photo-comment:removed",this.updateCounter,this),window.DocumentEvent.on("fcx:photo-comment-reply:added",this.updateCounter,this)},n.prototype.updateCounter=function(t,e){this.$container.find(".js-comments-count").text(e.totalComments)},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoCommentCount=o,e.exports=i.default},{}],74:[function(t,e,i){"use strict";i.__esModule=!0;var o,n=t("../EditableText.js"),s=(o=n)&&o.__esModule?o:{default:o},a=(r.prototype.init=function(){this.bindEvent(),this.$currentComment=null},r.prototype.bindEvent=function(){window.DocumentEvent.on("fcx:photo:editable-text:submitted",this.onUpdate,this),window.DocumentEvent.on("fcx:photo:editable-text:canceled",this.onCancel,this),this.$container.on("click",".js-edit-comment",$.proxy(this.enableEditing,this))},r.prototype.enableEditing=function(t){if(t.preventDefault(),null===this.$currentComment){var e=$(t.currentTarget).data("id");this.$currentComment=this.$container.find('.js-comment[data-comment-id="'+e+'"]');var i=this.$currentComment.find(".js-comment-text").first();new s.default($(".js-editable-text")).enable(i,this.$currentComment.data("raw-comment"))}},r.prototype.onUpdate=function(t,e){var i=e.text.trim(),o=this.$currentComment.find(".js-comment-text").first();if(i!==o.text().trim()){var n=e.text.trim().replace(/\n/g,"<br>");o.html(n),$.ajax({type:"POST",url:this.$currentComment.data("update-url"),data:{updatedComment:i},success:$.proxy(this.onUpdated,this,e)})}else $(document).trigger("fcx:photo:editable-text:canceled")},r.prototype.onCancel=function(){this.$currentComment=null},r.prototype.onUpdated=function(t,e){var i=this.$currentComment.data("comment-id");$(document).trigger("fcx:photo-comment:updated",{id:i,response:e}),$(document).trigger("fcx:google-analytics:pageview"),$(document).trigger("fcx:comment:submitted",{uaEventData:"Mention;Photo",html:t.html}),this.$currentComment=null},r);function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.$container=t}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoCommentEdit=a,e.exports=i.default},{"../EditableText.js":23}],75:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent(),this.isSubmitted=!1,this.button=null},n.prototype.bindEvent=function(){this.$container.on("click",".submit-comment",$.proxy(this.onCommentSubmit,this)),window.DocumentEvent.on("fcx:template-loader:finished-loading:add-comment",this.onSubmitted,this),window.DocumentEvent.on("fcx:template-loader:failed-loading:add-comment",this.onSubmitFailed,this),window.DocumentEvent.on("fcx:photo-comment:added",this.onSuccess,this)},n.prototype.onCommentSubmit=function(t){if(t.preventDefault(),0===this.$commentInput.val().length||this.isSubmitted)this.$commentInput.focus();else{this.isSubmitted=!0,this.button=$(t.currentTarget),this.button.addClass("active");var e={"photo_comment[comment]":this.$commentInput.val()};this.templateLoader.setOptions({template:this.$container.attr("action"),name:"add-comment",type:"POST",load:null,params:e,html:this.$commentInput.parent().find(".js-mentionable").html()}),this.templateLoader.load(),this.button.blur()}},n.prototype.onSubmitted=function(t,e){$(document).trigger("fcx:photo-comment:added",{response:e.data}),$(document).trigger("fcx:auto-size:update",{elements:$(".write-comment")}),$(document).trigger("fcx:comment:submitted",{uaEventData:"Mention;Photo",html:e.options.html}),this.isSubmitted=!1,this.button.removeClass("active")},n.prototype.onSubmitFailed=function(){this.isSubmitted=!1,this.button.removeClass("active")},n.prototype.onSuccess=function(){this.$commentInput.val(""),this.$editableCommentInput.html("")},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.templateLoader=e,this.$commentInput=t.find("#photo_comment_comment"),this.$editableCommentInput=t.find(".js-mentionable")}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoCommentForm=o,e.exports=i.default},{}],76:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent(),this.isSubmitted=!1},n.prototype.bindEvent=function(){this.$container.on("click",".js-comment-like",$.proxy(this.onLike,this)),window.DocumentEvent.on("fcx:template-loader:finished-loading:comment-like",this.onSuccess,this)},n.prototype.onLike=function(t){if(t.preventDefault(),!this.isSubmitted){this.isSubmitted=!0;var e=$(t.currentTarget),i=e.attr("href"),o=e.data("comment-id");this.templateLoader.setOptions({template:i,name:"comment-like",type:"PUT",load:null,commentId:o}),this.templateLoader.load()}},n.prototype.onSuccess=function(t,e){$(document).trigger("fcx:photo-comment:updated",{id:e.options.commentId,response:e.data}),$(document).trigger("fcx:google-analytics:pageview"),this.isSubmitted=!1},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.templateLoader=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoCommentLike=o,e.exports=i.default},{}],77:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){window.DocumentEvent.on("fcx:photo-comment:added",this.update,this),window.DocumentEvent.on("fcx:photo-comment-sort-direction:updated",this.update,this),window.DocumentEvent.on("fcx:photo-comment-list:updated",this.onUpdate,this)},n.prototype.onUpdate=function(){this.$container.find(".load-more-comments").hide(),$(document).trigger("fcx:endless-scrolling:photo-comment:reinitialize"),$(document).trigger("fcx:base:setup-tooltips")},n.prototype.update=function(t,e){void 0!==e.response&&(this.$container.html(e.response),$(document).trigger("fcx:photo-comment-list:updated",{totalComments:this.$container.find(".photo-comment-list").data("total-comments")}),$(document).trigger("fcx:google-analytics:pageview"),$(document).trigger("fcx:auto-size:setup",{elements:$(".js-comment-reply-text")}),$(document).trigger("fcx:photo:editable-text:canceled"))},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoCommentList=o,e.exports=i.default},{}],78:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){this.$container.on("click",".fcx-delete-comment",$.proxy(this.onCommentRemoveModalOpened,this)),this.$modal.on("click",".btn-accept",$.proxy(this.remove,this))},n.prototype.onCommentRemoveModalOpened=function(t){this.extractCurrentComment(t),this.switchModalContext()},n.prototype.extractCurrentComment=function(t){this.$currentComment=$(t.currentTarget).closest(".js-comment")},n.prototype.switchModalContext=function(){var t=this.$modal.find(".js-modal-content-comment-only"),e=this.$modal.find(".js-modal-content-comment-with-replies");t.hide(),e.hide(),0<this.$currentComment.find(".js-comment").length?e.show():t.show()},n.prototype.remove=function(t){t.preventDefault(),void 0!==this.$currentComment&&($.ajax({type:"DELETE",url:this.$currentComment.data("remove-url"),success:$.proxy(this.onRemoved,this)}),this.$modal.modal("hide"))},n.prototype.onRemoved=function(){var t=this.$container.find(".photo-comment-list").data("total-comments")-this.getAmount();$(document).trigger("fcx:photo-comment:removed",{totalComments:t,currentComment:this.$currentComment}),$(document).trigger("fcx:google-analytics:pageview"),this.$container.find(".photo-comment-list").data("total-comments",t),this.$currentComment.remove()},n.prototype.getAmount=function(){var t=this.$currentComment.find(".js-reply-link-amount"),e=1;return 0<t.length&&(e=parseInt(t.text(),10)+1),e},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.$modal=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoCommentRemover=o,e.exports=i.default},{}],79:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent(),this.isSubmitted=!1,this.button=null},n.prototype.bindEvent=function(){this.$container.on("click",".js-comment-reply",$.proxy(this.showReplyForm,this)),this.$container.on("click",".js-submit-reply",$.proxy(this.onSubmit,this)),this.$container.on("click",".js-cancel-reply",$.proxy(this.onCancel,this)),window.DocumentEvent.on("fcx:template-loader:finished-loading:add-reply",this.onSubmitted,this),window.DocumentEvent.on("fcx:template-loader:failed-loading:add-reply",this.onSubmitFailed,this),window.DocumentEvent.on("fcx:endless-scrolling:photo-comment:rendered",this.setupAutoSize,this)},n.prototype.showReplyForm=function(t){t.preventDefault();var e=$(t.currentTarget).parents(".js-comment").find(".js-comment-reply-form"),i=e.find(".js-comment-reply-text");e.removeClass("hidden"),$(e).find("div .form-control")[0].focus(),$(document).trigger("fcx:auto-size:update",{elements:i})},n.prototype.onSubmit=function(t){t.preventDefault();var e=$(t.currentTarget).parents(".js-comment-reply-form"),i=e.find(".js-comment-reply-text"),o=i.val();0===o.length||this.isSubmitted?i.focus():(this.isSubmitted=!0,this.button=$(t.currentTarget),this.button.addClass("active"),this.templateLoader.setOptions({template:e.attr("action"),name:"add-reply",type:"POST",load:null,retry:!1,params:{comment:o},commentId:e.data("id"),html:i.parent().find(".js-mentionable").html()}),this.templateLoader.load())},n.prototype.onSubmitted=function(t,e){var i=this.$container.find(".photo-comment-list").data("total-comments")+1;$(document).trigger("fcx:photo-comment-reply:added",{id:e.options.commentId,response:e.data,totalComments:i}),$(document).trigger("fcx:google-analytics:pageview"),$(document).trigger("fcx:comment:submitted",{uaEventData:"Mention;Photo",html:e.options.html}),this.$container.find(".photo-comment-list").data("total-comments",i),this.scrollToLastReply(e.options.commentId),this.setupAutoSize(),this.isSubmitted=!1,this.button.removeClass("active")},n.prototype.onSubmitFailed=function(){this.isSubmitted=!1,this.button.removeClass("active")},n.prototype.onCancel=function(t){t.preventDefault();var e=$(t.currentTarget).parents(".js-comment-reply-form");e.find(".js-comment-reply-text").val(""),e.addClass("hidden")},n.prototype.scrollToLastReply=function(t){var e=this.$container.find("#"+t).find(".js-comment-reply-container").last();e.length<=0||$("body,html").scrollTop(e.offset().top-60)},n.prototype.setupAutoSize=function(){$(document).trigger("fcx:auto-size:setup",{elements:$(".js-comment-reply-text")})},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.templateLoader=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoCommentReply=o,e.exports=i.default},{}],80:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){this.$container.on("click",".js-load-comment-replies",$.proxy(this.onLoad,this)),window.DocumentEvent.on("fcx:template-loader:finished-loading:load-replies",this.onLoaded,this)},n.prototype.onLoad=function(t){t.preventDefault();var e=$(t.currentTarget),i=e.data("load");this.load(e,e.attr("href"),i)},n.prototype.load=function(t,e,i){var o=arguments.length<=2||void 0===i?"prepend":i,n=t.parents(".fcx-comment-reply-content");this.$spinner=n.find(".js-spinner-"+o);var s=n.find(".js-comment-replies");t.parents(".fcx-replies-pagination").remove(),this.$spinner.show(),this.templateLoader.setOptions({template:e,name:"load-replies",type:"Post",load:o,target:s}),this.templateLoader.load()},n.prototype.onLoaded=function(){this.$spinner.hide()},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.templateLoader=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoCommentReplyLoader=o,e.exports=i.default},{}],81:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){this.$container.on("click",".fcx-report-comment",$.proxy(this.setData,this))},n.prototype.setData=function(t){var e=$(t.currentTarget).closest(".js-comment").data("comment-id"),i=$(t.currentTarget).closest(".js-comment").data("rawComment");this.$modal.find("#commentId").val(e),this.$modal.find("#comment").val(i)},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.$modal=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoCommentReport=o,e.exports=i.default},{}],82:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){$(document).off("change","#commentSortDirection"),$(document).on("change","#commentSortDirection",$.proxy(this.saveSortDirection,this))},n.prototype.saveSortDirection=function(){var t=$(this.containerId+" option:selected").val(),e=this.$container.data("save-url");$.get(e,{direction:t},function(t){$(document).trigger("fcx:photo-comment-sort-direction:updated",{response:t})})},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.containerId="#commentSortDirection"}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoCommentSortDirection=o,e.exports=i.default},{}],83:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){this.$container.on("click",".fcx-toggle-comment",$.proxy(this.toggle,this))},n.prototype.toggle=function(t){t.preventDefault();var e=$(t.currentTarget).parents(".js-comment").data("comment-id"),i=$(t.currentTarget).parents(".js-comment").data("toggle-url");$.get(i,function(t){$(document).trigger("fcx:photo-comment-visibility:toggle",{id:e,response:t})})},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoCommentVisibilityToggler=o,e.exports=i.default},{}],84:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){window.DocumentEvent.on("fcx:photo-comment:removed",this.update,this)},n.prototype.update=function(t,e){var i=e.currentComment.parents(".js-comment");if(0<i.length){var o=i.find(".js-comment-reply"),n=this.updateAndReturnAmount(o);this.updateText(o,n)}},n.prototype.updateAndReturnAmount=function(t){var e=t.find(".js-reply-link-amount");if(0===e.length)return 0;var i=parseInt(e.text(),10)-1;return e.text(i),i<=0&&e.hide(),i},n.prototype.updateText=function(t,e){var i=t.find(".js-reply-link"),o=t.find(".js-reply-link-singular").text(),n=t.find(".js-reply-link-plural").text();1===e?i.text(o):i.text(n)},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoReplyCount=o,e.exports=i.default},{}],85:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n=o(t("../ImageDropper.js")),s=o(t("./PhotoEditCompleter.js")),a=o(t("./PhotoEditSettings.js")),r=o(t("../Upload/UsageBar.js")),l=o(t("../Upload/VisibilityBar.js")),c=o(t("../BrowserExitAlert.js")),d=(p.prototype.execute=function(){$("#fcx-uploader").length&&(this.init(),this.bindEvents(),this.$container.focus())},p.prototype.init=function(){this.initialSerializedFormInfos=this.getSerializedFormInfos(),this.enableTimeout=!1,this.xhrPool=[],this.$uploader=$("#fcx-uploader"),this.$selectImagesBtn=$("#fcx-select-images-btn"),this.$deleteImageBtn=$("#fcx-delete-images-btn"),this.$finishEditBtn=$("#fcx-finish-edit"),this.$finishEditBtnBottom=$("#fcx-finish-edit-bottom"),this.redirectPathUserPhotos=$("#fcx-uploader").data("redirect-path-user-photos"),this.$remainingCurrentWeekExceeded=$(".fcx-remaining_current_week-exceeded",this.$uploader),this.limitOverall="unlimited"!==this.$uploader.data("limit_overall")&&parseInt(this.$uploader.data("limit_overall"),10),this.remainingOverall="unlimited"!==this.$uploader.data("remaining_overall")&&parseInt(this.$uploader.data("remaining_overall"),10),this.maxFiles=!1===this.remainingOverall?this.MAX_FILES_PER_UPLOAD:Math.min(this.MAX_FILES_PER_UPLOAD,this.remainingOverall),this.remainingCurrentWeek=parseInt(this.$uploader.data("remaining_current_week"),10),this.browserExitAlert=new c.default($.proxy(this.isPageDirty,this),$("#fcx-settings").data("exit-alert-message")),this.photoEditSettings=new a.default($("#fcx-settings")),this.imageDropper=new n.default($("#fileupload"),{maxNumberOfFiles:this.maxFiles}),this.photoEditCompleter=new s.default(this.imageDropper),this.photoEditCompleter.load(),this.usageBar=new r.default($("#fcx-options-bar .progress"),this.imageDropper,this.remainingCurrentWeek),this.usageBar.setupInfoTooltip(),this.visibilityBar=new l.default($(".fcx-visibility-bar"),this.imageDropper),this.photoEditSettings.injectImageDropper(this.imageDropper,this.photoEditCompleter),$("#fileupload").off("click","#fcx-files .dz-success")},p.prototype.bindEvents=function(){this.$deleteImageBtn.on("click",$.proxy(this.onDeleteImage,this)),this.$finishEditBtn.on("click",$.proxy(this.finishEdit,this)),this.$finishEditBtnBottom.on("click",$.proxy(this.finishEdit,this)),$(document).on("fcx:image-dropper:demand-update-settings",$.proxy(this.updateSettings,this)),$(document).on("fcx:photo-edit-completer:demand-show-errors",$.proxy(function(){this.browserExitAlert.allow()},this))},p.prototype.isPageDirty=function(){return this.initialSerializedFormInfos!==this.getSerializedFormInfos()},p.prototype.getSerializedFormInfos=function(){return $("#fcx-settings-form").serialize()+"&"+$('select[name="folder"]').val()},p.prototype.finishEdit=function(){this.browserExitAlert.disallow(),this.photoEditSettings.resetErrors(),this.photoEditCompleter.execute()},p.prototype.onDeleteImage=function(t){t.preventDefault(),this.showConfirmModal().done($.proxy(function(){this.deleteImage()},this))},p.prototype.deleteImage=function(){var t=$("#fcx-uploader").attr("data-delete-path");this.sendAjax(t,"","get").always($.proxy(function(){this.browserExitAlert.disallow(),1===$(".fcx-search-detail-edit").data("ajax-call")?location.href=this.redirectPathUserPhotos+"?page="+$("#result-page").attr("data-page"):location.href=this.redirectPathUserPhotos},this))},p.prototype.sendAjax=function(t,e,i){var o=arguments.length<=1||void 0===e?"":e,n=arguments.length<=2||void 0===i?"post":i;return $.ajax(t,{type:n,dataType:"json",data:JSON.stringify(o)})},p.prototype.showConfirmModal=function(){var i=$("#fcx-modal-confirm");return i.modal("show"),$.Deferred(function(e){$(document).keyup(function(t){i.modal("hide"),13===t.keyCode&&e.reject()}),i.find(".fcx-feedback button").one("click",function(t){i.modal("hide"),"ok"===$(t.currentTarget).data("value")?e.resolve():e.reject()})}).promise()},p.prototype.updateSettings=function(){var t=this.imageDropper.getSelectedImages(),e=this.imageDropper.getImages();this.photoEditSettings.showErrors(),0===t.length?(this.photoEditSettings.disableContent(),this.photoEditSettings.clearContent()):(this.photoEditSettings.enableContent(),this.photoEditSettings.updateContent()),0===e.length?this.$selectImagesBtn.addClass("disabled").find("i").removeClass("fa-check-square").addClass("fa-square"):this.$selectImagesBtn.removeClass("disabled").find("i").toggleClass("fa-check-square",t.length===e.length).toggleClass("fa-square",t.length!==e.length)},p);function p(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),this.MAX_FILES_PER_UPLOAD=100,this.$container=t}i.default=d,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoEdit=d,e.exports=i.default},{"../BrowserExitAlert.js":5,"../ImageDropper.js":39,"../Upload/UsageBar.js":149,"../Upload/VisibilityBar.js":150,"./PhotoEditCompleter.js":86,"./PhotoEditSettings.js":89}],86:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n=o(t("../SectionProvider/SectionProvider")),s=o(t("../UniversalAnalyticsEvents.js")),a=(r.prototype.load=function(){this.sectionProvider=new n.default,this.sectionProvider.getPromise().done($.proxy(this.init,this))},r.prototype.init=function(){this.maxTagsPerPhoto=$("#fcx-uploader").data("max-tags-per-photo"),this.savemetaPath=$("#fcx-uploader").data("savemeta-path"),this.validatemetaPath=$("#fcx-uploader").data("validatemeta-path"),this.quotaLimitsPath=$("#fcx-uploader").data("quotalimits-path"),this.errorMessages=$("#fcx-settings").data("error-messages"),this.redirectPath=$("#fcx-uploader").data("redirect-path"),this.postUploadPath=$("#fcx-uploader").data("post-upload-path"),this.photoUrl=$("#fcx-uploader").data("photo-url"),this.modal=$("#fcx-modal-upload"),this.maxSections=parseInt($("#fcx-uploader").attr("data-max-sections"),10),this.universalAnalyticsEvents=new s.default},r.prototype.execute=function(){this.step1()},r.prototype.step1=function(){this.validateImages($.proxy(this.validateImageClientSide,this)).done($.proxy(function(){0===this.imageDropper.numberOfMetaErrorImages?this.step2():this.someImagesFailed("fail-meta")},this))},r.prototype.step2=function(){this.showModal("init"),this.validateImages($.proxy(this.validateImageServerSide,this)).done($.proxy(function(){0===this.imageDropper.numberOfMetaErrorImages?this.step3():this.someImagesFailed("fail-meta")},this))},r.prototype.step3=function(){this.showModal("init"),this.validateImages($.proxy(this.validateImageServerSideAndSaveData,this),this.onDoneStep3,this.onFailStep3).done($.proxy(function(){0===this.imageDropper.numberOfUploadErrorImages?this.allImagesDone():this.someImagesFailed("fail-common"),this.postUpload()},this))},r.prototype.allImagesDone=function(){this.triggerUniversalAnaylticsEvent(),1===$(".fcx-search-detail-edit").data("ajax-call")?(this.showModal("doneajax"),window.setTimeout($.proxy(function(){this.hideModal(),$(".fcx-search-detail-edit").attr("data-ajax-call",0),$(document).trigger("fcx-photoeditcompleter-allimagesdone")},this),3e3)):(this.showModal("done"),window.setTimeout($.proxy(function(){location.href=this.redirectPath},this),3e3))},r.prototype.triggerUniversalAnaylticsEvent=function(){var t=!1;1<this.imageDropper.numberOfUploadSuccessImages?t="Aktivitäten;Multiupload;;"+this.imageDropper.numberOfUploadSuccessImages:1===this.imageDropper.numberOfUploadSuccessImages&&(t="Aktivitäten;Upload;"+this.imageDropper.getUploadSuccessImages().eq(0).attr("data-tags").replace(/^(\[(.+?)\])?.*/,"$2")+";1"),!1!==t&&this.universalAnalyticsEvents.triggerEvent(t)},r.prototype.someImagesFailed=function(t){$("#fcx-upload").focus(),this.imageDropper.unselectImages(),this.imageDropper.getMetaErrorImages().eq(0).addClass("selected"),this.showModal(t),$(document).trigger("fcx:photo-edit-completer:demand-show-errors")},r.prototype.validateImages=function(n,s,a){var r=[];return this.imageDropper.getImages().removeClass("dz-meta-error selected").attr("data-has-meta-error","0").attr("data-meta-errors",""),this.imageDropper.getImages().each($.proxy(function(t,e){var i=$(e).attr("data-photoid"),o=n(this.getImageMetaData($(e)),i);o.done($.proxy(this.onDone,this,i)).fail($.proxy(this.onFail,this,i)),"function"==typeof s&&o.done($.proxy(s,this,i)),"function"==typeof a&&o.fail($.proxy(a,this,i)),r.push(o)},this)),$.when.apply($,$.map(r,function(t){return t.then(null,function(){return $.Deferred().resolve()})}))},r.prototype.onDone=function(t){var e=this.imageDropper.getImageByPhotoId(t);!1!==e&&e.attr("data-touched","1").attr("data-has-meta-error","0").attr("data-meta-errors","").removeClass("dz-meta-error")},r.prototype.onFail=function(t,e){var i=this.imageDropper.getImageByPhotoId(t);!1!==i&&(i.attr("data-touched","1").attr("data-has-meta-error","1").attr("data-meta-errors","").addClass("dz-meta-error"),void 0!==e.responseJSON&&i.attr("data-meta-errors",JSON.stringify(e.responseJSON)))},r.prototype.onDoneStep3=function(t){var e=this.imageDropper.getImageByPhotoId(t);!1!==e&&e.removeClass("dz-success").addClass("dz-done dz-upload-success")},r.prototype.onFailStep3=function(t){var e=this.imageDropper.getImageByPhotoId(t);!1!==e&&e.removeClass("dz-success dz-meta-error").addClass("dz-done dz-upload-error")},r.prototype.validateImageClientSide=function(t,e){var i={};t.title=t.title.trim(),t.description=t.description.trim();var o=$('#fcx-settings-form input[name="title"]').val().trim(),n=$('#fcx-settings-form textarea[name="description"]').val().trim(),s=this.imageDropper.getImageByPhotoId(e);return""===t.title&&(i.title=this.errorMessages.uploadTitleNotBlank),""!==t.title&&t.title.length<2&&(i.title=this.errorMessages.uploadLengthMin),""!==t.title&&100<t.title.length&&(i.title=this.errorMessages.uploadLengthMax),""!==o&&o!==this.stripTags(o)&&(i.title=this.errorMessages.uploadHtmlOrJs),""!==n&&n!==this.stripTags(n)&&(i.description=this.errorMessages.uploadHtmlOrJs),this.imageDropper.getNumberOfTags(s)>this.maxTagsPerPhoto&&(i.tags=this.errorMessages.tooManyTags),"1"===t.options.publish&&0===t.sections.length&&(i.sections=this.errorMessages.uploadSectionsNotBlank),$.Deferred(function(t){$.isEmptyObject(i)?t.resolve({photoid:e},"ok",{status:200}):t.reject({status:400,responseJSON:{errors:i}})}).promise()},r.prototype.validateImageServerSide=function(t,e){return this.sendMeta(this.validatemetaPath+"/"+e,t)},r.prototype.validateImageServerSideAndSaveData=function(t,e){return this.sendMeta(this.savemetaPath+"/"+e,t)},r.prototype.sendMeta=function(t,e){return $.ajax(t,{type:"post",dataType:"json",processData:!1,contentType:"application/json",data:JSON.stringify(e)})},r.prototype.postUpload=function(){$.ajax({url:this.postUploadPath,method:"POST"})},r.prototype.getImageMetaData=function(t){var e=[];""!==t.attr("data-tags")&&(e=t.attr("data-tags").match(/([^\[\]]+)/g));var i=[];if("1"===t.attr("data-publish")){var o=t.attr("data-sections").split(",").slice(0,3),n=Array.isArray(o),s=0;for(o=n?o:o[Symbol.iterator]();;){var a;if(n){if(s>=o.length)break;a=o[s++]}else{if((s=o.next()).done)break;a=s.value}var r=a,l=this.sectionProvider.getCategorySectionById(r);null!==l&&i.push(l)}}return{title:t.find(".title").html(),description:t.attr("data-description"),sections:i,folder_id:t.attr("data-folder"),tags:e,options:{publish:t.attr("data-publish"),license:t.attr("data-license"),exif_allowed:t.attr("data-exif-allowed"),location_allowed:t.attr("data-location-allowed"),feedback_welcome:t.attr("data-feedback-welcome")}}},r.prototype.getQuotaLimits=function(){return $.ajax(this.quotaLimitsPath,{type:"get",dataType:"json"})},r.prototype.showModal=function(t){this.modal.find(".modal-content").html(this.modal.find(".fcx-modal-body-template-"+t).html()),this.modal.hasClass("in")||this.modal.modal("show")},r.prototype.hideModal=function(){this.modal.modal("hide")},r.prototype.stripTags=function(t){return t.replace(/[<>]/gi,"")},r);function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.imageDropper=t}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoEditCompleter=a,e.exports=i.default},{"../SectionProvider/SectionProvider":124,"../UniversalAnalyticsEvents.js":144}],87:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("../Drilldown/Drilldown"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.isSectionHiddenInDrilldown=function(t){return-1<$.inArray(t.id,["s20302","s20303","s20304","s20305","s20306","s20307","s20428"])},l.prototype.showInDrilldown=function(t){var e=t.id;if(this.isSectionHiddenInDrilldown(t))return!1;if(this.isVisible(e)&&this.isUploadable(e))return!0;if(!this.hasChildren(e))return!1;var i=this.parentsIndex[e],o=Array.isArray(i),n=0;for(i=o?i:i[Symbol.iterator]();;){var s;if(o){if(n>=i.length)break;s=i[n++]}else{if((n=i.next()).done)break;s=n.value}var a=s;if(this.isset(a)&&this.showInDrilldown(this.sections[a]))return!0}return!1},l.prototype.showInTypeahead=function(t,e){return!this.isSectionHiddenInDrilldown(e)&&0===e.hidden&&1===e.uploadable&&new RegExp("((?:^|\\s)+)("+t+")","i").test(e.shortname)},l.prototype.initFilling=function(){this.fill(!0)},l.prototype.itemSelected=function(t,e){if(!(this.$container.hasClass("fcx-drilldown__container--nude")&&0===e.nude||this.$container.hasClass("fcx-drilldown__container--non-nude")&&1===e.nude||1!==e.uploadable||0!==e.hidden)){var i=this.callbacks["item-selected"];"function"==typeof i&&i(e),this.$container.attr("data-section-id",e.section_id),this.$container.attr("data-category-id",e.channel_id),this.hide()}},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoEditDrilldown=r,e.exports=i.default},{"../Drilldown/Drilldown":21}],88:[function(t,e,i){"use strict";i.__esModule=!0;var o,n=t("./PhotoEdit.js"),s=(o=n)&&o.__esModule?o:{default:o},a=(r.prototype.init=function(){this.bindEvent(),this.loadState.setLoadStateElement($(".fcx-load-placeholder")),this.$photoEditUrl="",this.$currentPhoto=""},r.prototype.bindEvent=function(){$(document).on("fcx:photo-edit-page:show",$.proxy(this.load,this)),$(document).on("fcx:template-loader:finished-loading:photo-edit-page",$.proxy(this.onLoaded,this)),$(document).on("fcx:template-loader:failed-loading:photo-edit-page",$.proxy(this.onFailed,this)),$(document).on("fcx-photoeditcompleter-allimagesdone",$.proxy(this.onComplete,this))},r.prototype.load=function(t,e){this.$photoEditUrl=e.url,this.$currentPhoto=e.currentPhoto,this.templateLoader.setOptions({template:this.$photoEditUrl,name:"photo-edit-page",type:"GET",target:this.$container}),$(document).trigger("fcx:keyboard:photo-page:stopObserve"),$(document).trigger("fcx:photo-item:stopObserve"),this.templateLoader.load(),this.loadState.showLayer(),$(".fcx-search-detail-edit").attr("data-ajax-call",1)},r.prototype.onLoaded=function(){new s.default($("#fcx-upload")).execute(),this.loadState.hideLayer(),this.scrollState.scrollToPosition(0),this.$container.show(),$(document).trigger("fcx:browser-navigation-list:add",{url:this.$photoEditUrl,site:"edit"}),$(document).trigger("fcx:google-analytics:pageview"),$(document).trigger("fcx:base:setup-tooltips")},r.prototype.onFailed=function(){this.loadState.hideLayer()},r.prototype.onComplete=function(){$(document).trigger("fcx:photo-page:show",{currentPhoto:this.$currentPhoto})},r);function r(t,e,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.$container=t,this.templateLoader=e,this.loadState=i,this.scrollState=o}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoEditPage=a,e.exports=i.default},{"./PhotoEdit.js":85}],89:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n=o(t("./PhotoEditDrilldown")),s=o(t("../SectionProvider/SectionProvider")),a=o(t("../SectionTagBuilder/SectionTagBuilder")),r=o(t("../AlertBox")),l=(c.prototype.init=function(){this.xhrState=!1,this.$settings=$("#fcx-settings"),this.$settingsForm=$("#fcx-settings-form"),this.$tagsInput=$("#fcx-tags-input"),this.$tagsSuggestionTitle=$("#fcx-tags-suggestions-title"),this.$tagsSuggestionContainer=$("#fcx-tags-suggestions"),this.$tagsLatestTitle=$("#fcx-tags-latest-title"),this.$tagsLatestContainer=$("#fcx-tags-latest"),this.$callapsableDivs=$("div.collapse"),this.tagsSuggestionsUrl=this.$tagsSuggestionContainer.data("url"),this.tagSanitizeUrl=this.$tagsInput.data("sanitize-url"),this.preventReloadingTags=!1,this.latestUserTags=[],this.$editImage=$(".fcx-preview"),this.maxSections=parseInt($("#fcx-uploader").attr("data-max-sections"),10),this.loadLatestTags(),this.setInputTagsOptions(),this.nudeAlertBox=new r.default($("#fcx-settings-form .fcx-nude-section-hint"),{expiresInSeconds:15552e3,closeSelector:".alert-close"}),this.sectionsAlertBox=new r.default($("#fcx-settings-form .fcx-main-section-hint"),{expiresInSeconds:15552e3,closeSelector:".alert-close"}),this.sectionProvider=new s.default,this.sectionTagBuilder=new a.default,$.when(this.sectionProvider.getPromise(),this.sectionTagBuilder.getPromise()).done($.proxy(this.setup,this))},c.prototype.injectImageDropper=function(t,e){this.imageDropper=t,this.photoEditCompleter=e},c.prototype.bindEvents=function(){$(document).on("click","#fcx-tags-suggestions label.btn",$.proxy(this.moveSuggestionTag,this)),$(document).on("click","#fcx-tags-latest label.btn",$.proxy(this.moveLatestTag,this)),this.$callapsableDivs.on("shown.bs.collapse hidden.bs.collapse",$.proxy(this.toggleAngleIcon,this)),$('select[name="folder"]').on("change",$.proxy(this.onSelectPickerChange,this,"folder")),$('select[name="license"]',this.$settings).on("change",$.proxy(this.onSelectPickerChange,this,"license")),$('input[name="partner_license"]',this.$settings).on("change",$.proxy(this.onPartnerLicenseChange,this)),$('select[name="sale"]',this.$settings).on("change",$.proxy(this.onSelectPickerChange,this,"sale")),$('input[name="exif_allowed"]',this.$settings).on("change",$.proxy(this.onCheckboxChange,this,"exif-allowed")),$('input[name="location_allowed"]',this.$settings).on("change",$.proxy(this.onCheckboxChange,this,"location-allowed")),$('input[name="feedback_welcome"]',this.$settings).on("change",$.proxy(this.onCheckboxChange,this,"feedback-welcome")),$('input[name="title"]',this.$settings).on("change",$.proxy(this.onInputChange,this,"title")),$('textarea[name="description"]',this.$settings).on("change",$.proxy(this.onInputChange,this,"description")),this.$settings.on("click",'.fcx-combi-section-tag [data-role="remove"]',$.proxy(this.onRemoveSection,this)),$(document).on("fcx:image-dropper:upload-queue-complete",$.proxy(this.validate,this)),$(document).on("fcx:upload-completer:step-1-failed",$.proxy(this.onStep1Failed,this)),$(document).on("fcx:image-dropper:selection-changed",$.proxy(this.onStep1Failed,this)),$(document).on("fcx:photo-edit-completer:demand-show-errors",$.proxy(this.onStep1Failed,this)),$('input[name="publish"]',this.$settings).on("change",$.proxy(this.onPublishStateChanged,this)),this.$tagsInput.on("beforeItemAdd",$.proxy(this.sanitizeTag,this)),this.$tagsInput.on("itemAdded",$.proxy(this.addTag,this)),this.$tagsInput.on("itemRemoved",$.proxy(this.removeTag,this)),$(document).on("click",".fcx-btn-drilldown:not(.disabled)",$.proxy(this.onClickBtnDrilldown,this))},c.prototype.setup=function(){this.drilldown=!1,0<$(".fcx-drilldown__container").length&&(this.drilldown=new n.default(this.$container.find(".fcx-drilldown__container")),this.drilldown.execute(),this.drilldown.addCallback("item-selected",$.proxy(this.onDrilldownItemSelected,this))),this.setInitialCategory(),this.classWatcher(),$(document).on("fcx:upload-settings:data-changed",$.proxy(this.onDataChanged,this))},c.prototype.onRemoveSection=function(t){$(t.currentTarget).parents(".fcx-combi-section-tag").tooltip("destroy").remove(),0===$('.fcx-sections .fcx-combi-section-tag[data-is-nude="1"]').length&&this.nudeAlertBox.hideWithoutCookie(),0===$('.fcx-sections .fcx-combi-section-tag[data-is-mainsection="1"]').length&&this.sectionsAlertBox.hideWithoutCookie(),0===$(".fcx-sections .fcx-combi-section-tag").length&&$('input[name="publish"]').prop("checked")&&$('input[name="publish"]').trigger("click"),this.onSectionsChanged()},c.prototype.onSectionsChanged=function(){this.updateSectionsMetaData(),this.loadTagSuggestions(),$(document).trigger("fcx:upload-settings:data-changed")},c.prototype.updateSectionsMetaData=function(){var i=[];$(".fcx-sections .fcx-combi-section-tag").each($.proxy(function(t,e){i.push($(e).attr("data-id"))},this)),this.$editImage.attr("data-sections",i.join(","))},c.prototype.onDrilldownItemSelected=function(t){var e=$(".fcx-sections");0===e.children('[data-id="'+t.id+'"]').length&&(e.find(".fcx-combi-section-tag").slice(this.maxSections-1).tooltip("destroy").remove(),this.addSectionTag(t),this.onSectionsChanged(),this.toggleNudeSectionHint(t),this.toggleReducedVisibiltyHint(t))},c.prototype.toggleNudeSectionHint=function(t){1===t.nude&&this.nudeAlertBox.show()},c.prototype.toggleReducedVisibiltyHint=function(t){"root"===t.parent_id?this.sectionsAlertBox.show():this.sectionsAlertBox.hideWithoutCookie()},c.prototype.setInitialCategory=function(){var t=JSON.parse(this.$editImage.attr("data-sections")),e=Array.isArray(t),i=0;for(t=e?t:t[Symbol.iterator]();;){var o;if(e){if(i>=t.length)break;o=t[i++]}else{if((i=t.next()).done)break;o=i.value}var n=o,s=this.sectionProvider.getBySectionIdAndCategoryId(n.sectionId,n.categoryId);null!==s&&this.addSectionTag(s)}this.updateSectionsMetaData()},c.prototype.addSectionTag=function(t){var e="1"===$("#fcx-uploader").attr("data-photo-is-anonymous"),i=this.sectionTagBuilder.getCombiSectionTag(t,{removable:!e,disabled:e});$(".fcx-sections").append(i)},c.prototype.onClickBtnDrilldown=function(t){t.preventDefault(),this.drilldown&&this.drilldown.toggle(),$(t.currentTarget).blur()},c.prototype.classWatcher=function(){window.setInterval($.proxy(function(){$('input[name="publish"]').prop("checked")?($(".fcx-btn-drilldown").toggleClass("disabled",!1),$(".fcx-btn-drilldown").removeAttr("disabled")):($(".fcx-btn-drilldown").toggleClass("disabled",!0),$(".fcx-btn-drilldown").attr("disabled","disabled")),$(".fcx-sections").toggleClass("hidden",!$('input[name="publish"]').prop("checked"));var t=$('.fcx-sections .fcx-combi-section-tag[data-is-nude="1"]').length,e=$('.fcx-sections .fcx-combi-section-tag[data-is-nude="0"]').length;$(".fcx-drilldown__container").toggleClass("fcx-drilldown__container--nude",0<t&&0===e).toggleClass("fcx-drilldown__container--non-nude",0<e&&0===t)},this),200)},c.prototype.onPublishStateChanged=function(t){t.preventDefault();var e=$('input[name="publish"]'),i=e.is(":checked"),o=e.attr("data-is-checked-"+(i?"1":"0"));e.siblings("span").html(o),this.imageDropper.getSelectedImages().attr("data-publish",i?1:0),$(".fcx-section-hints").addClass("hidden"),this.drilldown&&this.drilldown.fillWithMainSections(),$(document).trigger("fcx:upload-settings:data-changed")},c.prototype.onDataChanged=function(){this.validate(),this.markSelectedErrorImages(),this.showErrors()},c.prototype.onStep1Failed=function(){this.markSelectedErrorImages(),this.showErrors()},c.prototype.onSelectPickerChange=function(t,e){this.imageDropper.setSelectedImagesMetaData(t,$(e.currentTarget).find("option:selected").val()),"license"===t&&("7"===$(e.currentTarget).find("option:selected").val()?$('input[name="partner_license"]',this.$settings).prop("checked","checked"):$('input[name="partner_license"]',this.$settings).prop("checked","")),$(document).trigger("fcx:upload-settings:data-changed")},c.prototype.onPartnerLicenseChange=function(t){var e="0";$(t.currentTarget).is(":checked")&&(e="7"),$('select[name="license"]',this.$settings).selectpicker("val",e).change()},c.prototype.onCheckboxChange=function(t,e){this.imageDropper.setSelectedImagesMetaData(t,$(e.currentTarget).is(":checked")?"1":"0")},c.prototype.onInputChange=function(t,e){this.imageDropper.setSelectedImagesMetaData(t,$(e.currentTarget).val()),$(document).trigger("fcx:upload-settings:data-changed")},c.prototype.setInputTagsOptions=function(){this.$tagsInput.tagsinput({onTagExists:$.proxy(this.onTagExists,this),tagClass:"btn btn-primary btn-sm fcx-tag"})},c.prototype.onTagExists=function(t){this.preventReloadingTags=!0;var e={item:t};this.addTag(e),this.updateContent()},c.prototype.moveTag=function(t){t.preventDefault();var e=$(t.target),i=e.text().trim();this.$tagsInput.tagsinput("add",i,{preventPost:!0}),e.remove()},c.prototype.moveLatestTag=function(t){this.preventReloadingTags=!0,this.moveTag(t),0===this.$tagsLatestContainer.children().length&&this.toggleTagLatest(!1)},c.prototype.moveSuggestionTag=function(t){var e=this.imageDropper.getSelectedImages(),s=$(t.target).text().trim();e.each($.proxy(function(t,e){var i=$(e).attr("data-suggestions-tags");if(this.isJsonString(i)){var o=JSON.parse(i),n=o.indexOf(s);-1<n&&o.splice(n,1),$(e).attr("data-suggestions-tags",JSON.stringify(o))}},this)),this.preventReloadingTags=!0,this.moveTag(t),0===this.$tagsSuggestionContainer.children().length&&(this.toggleTagSuggestions(!1),this.loadTagSuggestions())},c.prototype.sanitizeTag=function(t){var e=t.item;t.options&&t.options.preventPost||$.ajax(this.tagSanitizeUrl,{type:"POST",data:{tag:e}}).done($.proxy(function(t){this.$tagsInput.tagsinput("remove",e,{preventPost:!0}),""!==t.tag&&this.$tagsInput.tagsinput("add",t.tag,{preventPost:!0})},this))},c.prototype.addTag=function(e){var t=this.imageDropper.getSelectedImages();e.options&&e.options.preventDataUpdate||(t.each(function(){var t="["+e.item+"]";$(this).attr("data-tags").indexOf(t)<0&&$(this).attr("data-tags",$(this).attr("data-tags")+t)}),!1===this.preventReloadingTags&&this.loadTagSuggestions(),this.preventReloadingTags=!1),$(document).trigger("fcx:upload-settings:data-changed")},c.prototype.removeTag=function(t){this.imageDropper.getSelectedImages().each(function(){$(this).attr("data-tags",$(this).attr("data-tags").replace("["+t.item+"]",""))}),$(document).trigger("fcx:upload-settings:data-changed")},c.prototype.loadLatestTags=function(){this.checkXhrState(),this.xhrState=$.ajax(this.tagsSuggestionsUrl,{type:"GET",context:this}).done(function(t){""!==t&&t.success&&(this.latestUserTags=t.tagSuggestions,this.toggleTagLatest(!0),this.displayTags(this.$tagsLatestContainer,t.tagSuggestions))})},c.prototype.loadTagSuggestions=function(){var e=this.imageDropper.getSelectedImages();this.checkXhrState();var o=[];$('input[name="publish"]').prop("checked")&&$(".fcx-sections .fcx-combi-section-tag").each($.proxy(function(t,e){var i=this.sectionProvider.getCategorySectionById($(e).attr("data-id"));null!==i&&o.push(i)},this)),this.xhrState=$.ajax(this.tagsSuggestionsUrl+"?"+this.$tagsInput.serialize(),{type:"GET",context:this,data:{sections:JSON.stringify(o)}}).done(function(t){""!==t&&t.success&&(e.attr("data-suggestions-tags",JSON.stringify(t.tagSuggestions)),this.toggleTagSuggestions(!0),this.displayTags(this.$tagsSuggestionContainer,t.tagSuggestions,!0))})},c.prototype.displayTags=function(o,t,e){arguments.length<=2||void 0===e||!e||o.html(""),$(t).each($.proxy(function(t,e){var i=$("<label/>").addClass("btn btn-primary btn-sm fcx-tag").append("<input/>").prop("type","checkbox").prop("checked",!0).text(e);o.append(i)},this))},c.prototype.checkXhrState=function(){this.xhrState&&(this.xhrState.abort(),this.xhrState=null)},c.prototype.toggleTagSuggestions=function(t){this.$tagsSuggestionTitle.toggle(t),this.$tagsSuggestionContainer.toggle(t)},c.prototype.toggleTagLatest=function(t){this.$tagsLatestTitle.toggle(t),this.$tagsLatestContainer.toggle(t)},c.prototype.updateContent=function(){var i={},o=null,n=[];$('input[name="title"]',this.$settings).val(this.imageDropper.getSelectedImagesCumulatedMetaTitle()),$('textarea[name="description"]',this.$settings).val(this.imageDropper.getSelectedImagesCumulatedMetaData("description","")),$('input[name="publish"]',this.$settings).prop("checked","1"===this.imageDropper.getSelectedImagesCumulatedMetaData("publish",0)),$('select[name="folder"]',this.$settings).selectpicker("val",this.imageDropper.getSelectedImagesCumulatedMetaData("folder",null)),$('select[name="license"]',this.$settings).selectpicker("val",this.imageDropper.getSelectedImagesCumulatedMetaData("license",null)),$('input[name="partner_license"]',this.$settings).prop("checked","7"===this.imageDropper.getSelectedImagesCumulatedMetaData("license",null)),$('select[name="sale"]',this.$settings).selectpicker("val",this.imageDropper.getSelectedImagesCumulatedMetaData("sale",null)),this.imageDropper.getSelectedImages().each(function(t,e){null!==(o=$(e).attr("data-tags").match(/([^\[\]]+)/g))&&$(o).each(function(t,e){i.hasOwnProperty(e)||(i[e]=0),i[e]+=1})}),this.$tagsInput.tagsinput("removeAll"),$.each(i,$.proxy(function(t,e){this.$tagsInput.tagsinput("add",t,{preventDataUpdate:!0,preventPost:!0}),e!==this.imageDropper.numberOfSelectedImages&&($(".fcx-add-tag-filter .tag",this.$settings).filter(function(){return $(this).text()===t}).addClass("partial"),n.push(t))},this)),this.renderTagsBySelectedImages(n)},c.prototype.showErrors=function(){this.resetErrors(),this.imageDropper.getSelectedImages().filter('[data-has-meta-error="1"]').filter('[data-touched="1"]').filter(".dz-meta-error").each($.proxy(function(t,e){var i=$(e).attr("data-meta-errors");if(""!==i){var o=$.parseJSON(i);void 0!==o.errors&&$.each(o.errors,$.proxy(function(t,e){var i=$("#fcx-settings-form .fcx-settings-field").filter('[data-field="'+t+'"]'),o=e.split("~");o.length<2&&o.push(o[0]),1<this.imageDropper.numberOfSelectedImages?i.find(".fcx-settings-errormessage span.fcx-message").text(o[1]):i.find(".fcx-settings-errormessage span.fcx-message").text(o[0]),i.addClass("fcx-settings-error")},this))}},this))},c.prototype.markSelectedErrorImages=function(){this.imageDropper.getSelectedImages().removeClass("dz-meta-error").filter('[data-has-meta-error="1"]').addClass("dz-meta-error")},c.prototype.resetErrors=function(){$("#fcx-settings-form .fcx-settings-field").removeClass("fcx-settings-error")},c.prototype.validate=function(){this.imageDropper.getImages().attr("data-has-meta-error","0").attr("data-meta-errors",""),this.imageDropper.getImages().each($.proxy(function(t,e){var i=$(e).attr("data-photoid"),o=$(e);o.attr("data-has-meta-error","0").attr("data-meta-errors","");var n=this.photoEditCompleter.getImageMetaData(o);this.photoEditCompleter.validateImageClientSide(n,i).fail($.proxy(function(t){o.attr("data-has-meta-error","1"),void 0!==t.responseJSON&&o.attr("data-meta-errors",JSON.stringify(t.responseJSON))},this))},this))},c.prototype.clearContent=function(){this.$tagsInput.tagsinput("removeAll"),this.$settingsForm.trigger("reset"),$('input[name="title"]',this.$settings).attr("placeholder","Titel"),$('textarea[name="description"]',this.$settings).attr("placeholder","Beschreibung"),$(".btn-group label",this.$settingsForm).removeClass("active"),$(".selectpicker",this.$settingsForm).val(null).selectpicker("refresh")},c.prototype.toggleAngleIcon=function(t){$(t.target).parent().find('a[data-toggle="collapse"] i.icon').toggleClass("fas fa-caret-right fas fa-caret-down")},c.prototype.disableContent=function(){this.resetErrors(),this.toggleTagSuggestions(!1),this.toggleTagLatest(!1)},c.prototype.enableContent=function(){this.showErrors(),this.toggleTagSuggestions(!0),this.toggleTagLatest(!0)},c.prototype.renderTagsBySelectedImages=function(t){var i=arguments.length<=0||void 0===t?[]:t,e=this.imageDropper.getSelectedImages(),o=this.$tagsInput.tagsinput("items"),n=[];if(1===e.length){var s=e.attr("data-suggestions-tags");this.isJsonString(s)?this.displayTags(this.$tagsSuggestionContainer,JSON.parse(s),!0):this.toggleTagSuggestions(!1)}else{var a=[],r=[];e.each($.proxy(function(t,e){var i=$(e).attr("data-suggestions-tags");this.isJsonString(i)&&(i=JSON.parse(i),$(i).each($.proxy(function(t,e){-1===$.inArray(e,a)?a.push(e):-1===$.inArray(e,r)&&r.push(e)},this)))},this)),$(i).each($.proxy(function(t,e){-1===$.inArray(e,r)&&-1===$.inArray(e,this.latestUserTags)&&r.length<=15&&r.push(e)},this)),0<r.length?this.displayTags(this.$tagsSuggestionContainer,r,!0):this.toggleTagSuggestions(!1)}$(this.latestUserTags).each($.proxy(function(t,e){(-1<$.inArray(e,i)||-1===$.inArray(e,o))&&n.push(e)},this)),0<n.length?this.displayTags(this.$tagsLatestContainer,n,!0):this.toggleTagLatest(!1)},c.prototype.isJsonString=function(t){try{JSON.parse(t)}catch(t){return!1}return!0},c);function c(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.$container=t,this.init(),this.bindEvents()}i.default=l,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoEditSettings=l,e.exports=i.default},{"../AlertBox":3,"../SectionProvider/SectionProvider":124,"../SectionTagBuilder/SectionTagBuilder":126,"./PhotoEditDrilldown":87}],90:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.defaultValues=[0,0,100,100,100,0,0],this.$modal=$("#fcx-photo-filter-modal"),this.$form=$(".fcx-photo-filter-form"),this.$filter=$(".fcx-photo-filter"),this.photoId=$(".fcx-zoom-photo.fcx-photo-filter").data("photo"),this.$commentArea=0<$("#photo_comment_comment").length?$("#photo_comment_comment"):$(".js-comment-reply-text"),this.$commentDiv=this.$commentArea.parent().find(".js-mentionable"),this.$filterToggle=$(".fcx-filter-toggle"),this.$filterAddon=$(".fcx-zoom-photo .fcx-photo-filter-addon"),this.$resetButton=$(".fcx-photo-filter-reset"),this.$shareButton=$(".fcx-photo-filter-share"),this.$goldenRatio=this.$form.find("#golden-ratio"),this.$mirror=this.$form.find("#mirror"),this.$contrast=this.$form.find("#contrast"),this.$brightness=this.$form.find("#brightness"),this.$saturation=this.$form.find("#saturation"),this.$grayScale=this.$form.find("#grayscale"),this.$hueRotate=this.$form.find("#huerotate"),this.synchronizeValues(),this.applyFilter(),this.bindEvents()},n.prototype.bindEvents=function(){$(document).on("click",".fcx-photo-filter-button",$.proxy(this.toggleModal,this)),this.$modal.on("click",".close",$.proxy(this.toggleModal,this)),this.$form.on("change","input[type=range]",$.proxy(this.applyFilter,this)),this.$form.on("input","input[type=range]",$.proxy(this.applyFilter,this)),this.$form.on("change","#golden-ratio",$.proxy(this.toggleGoldenRatio,this)),this.$form.on("change","#mirror",$.proxy(this.toggleMirror,this)),this.$filterToggle.on("click",$.proxy(this.toggleVisibility,this)),this.$resetButton.on("click",$.proxy(this.resetValues,this)),this.$shareButton.on("click",$.proxy(this.shareFilter,this)),this.$filterAddon.on("click",$.proxy(this.clickTrough,this))},n.prototype.toggleModal=function(t){t.preventDefault(),this.$modal.toggleClass("hidden")},n.prototype.clickTrough=function(){$("[data-lightbox]").trigger("click")},n.prototype.synchronizeValues=function(){this.$goldenRatio.prop("checked",this.$filterAddon.hasClass("golden-ratio")),this.$mirror.prop("checked",this.$filter.hasClass("mirror"))},n.prototype.toggleGoldenRatio=function(){this.$filterAddon.toggleClass("golden-ratio"),this.updateVisibilityToggle()},n.prototype.toggleMirror=function(){this.$filter.toggleClass("mirror"),this.updateVisibilityToggle()},n.prototype.applyFilter=function(){this.displayFilterValues(),this.applyVisibilityStyle(this.readValues()),this.updateVisibilityToggle()},n.prototype.toggleVisibility=function(){this.$filterToggle.toggleClass("active"),this.$filterToggle.hasClass("active")?this.applyVisibilityStyle(this.readValues()):this.applyVisibilityStyle(this.defaultValues)},n.prototype.applyVisibilityStyle=function(t){this.$filterAddon.toggleClass("golden-ratio",1===t[0]),this.$filter.toggleClass("mirror",1===t[1]),this.setFilterStyle(t)},n.prototype.updateVisibilityToggle=function(){var t=!1;JSON.stringify(this.readValues())!==JSON.stringify(this.defaultValues)&&(t=!0),this.$filterToggle.toggleClass("active",t)},n.prototype.readValues=function(){return[this.$goldenRatio.prop("checked")?1:0,this.$mirror.prop("checked")?1:0,this.$contrast.val(),this.$brightness.val(),this.$saturation.val(),this.$grayScale.val(),this.$hueRotate.val()].map(function(t){return parseInt(t,10)})},n.prototype.setFilterStyle=function(t){var e="contrast("+t[2]+"%) brightness("+t[3]+"%) saturate("+t[4]+"%) grayscale("+t[5]+"%) hue-rotate("+t[6]+"deg)";$("html").hasClass("no-cssfilters")||this.$filter.css("filter",e)},n.prototype.displayFilterValues=function(){this.addTextToLabel(this.$contrast),this.addTextToLabel(this.$brightness),this.addTextToLabel(this.$saturation),this.addTextToLabel(this.$grayScale),this.addTextToLabel(this.$hueRotate)},n.prototype.addTextToLabel=function(t){t.prev("label").find(".selected-range").text(t.val())},n.prototype.resetValues=function(){this.$goldenRatio.prop("checked",!1),this.$mirror.prop("checked",!1),this.$contrast.val(100),this.$brightness.val(100),this.$saturation.val(100),this.$grayScale.val(0),this.$hueRotate.val(0),this.applyFilter()},n.prototype.getHashedFilter=function(){var t=[parseInt(this.photoId,10),this.$goldenRatio.prop("checked")?1:0,this.$mirror.prop("checked")?1:0,parseInt(this.$contrast.val(),10),parseInt(this.$brightness.val(),10),parseInt(this.$saturation.val(),10),parseInt(this.$grayScale.val(),10),parseInt(this.$hueRotate.val(),10)],e=btoa(JSON.stringify(t));return encodeURIComponent(e)},n.prototype.shareFilter=function(){var t="[fc-filter:"+this.getHashedFilter()+"]",e=this.$commentDiv.html();0<e.length?this.$commentDiv.html(e+" "+t):this.$commentDiv.html(t),$(document).trigger("fcx:mention:request-textarea-update",{div:this.$commentDiv,textarea:this.$commentArea}),$("html, body").animate({scrollTop:this.$commentDiv.offset().top-120},1e3,"swing",$.proxy(function(){this.$modal.addClass("hidden"),this.$commentDiv.focus()},this))},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoFilter=o,e.exports=i.default},{}],91:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.$container.one("fcx:section-picker:ready",$.proxy(this.setup,this))},n.prototype.bindEvents=function(){this.$btnSaveSections.on("click",$.proxy(this.onSaveSections,this)),this.$container.on("fcx:section-picker:sections-changed",$.proxy(this.onSectionsChanged,this))},n.prototype.setup=function(){this.bindEvents()},n.prototype.onSaveSections=function(t){t.preventDefault(),this.saveSections()},n.prototype.saveSections=function(){var t=this.$container.data("save-sections-path"),e={sections:this.sectionPicker.getCategorySections()};this.sendData(t,e).done($.proxy(function(t){this.sectionPicker.setSections(JSON.parse(t.sections)),this.sectionPicker.resetInitialSectionIds(),this.disableSaving()},this))},n.prototype.sendData=function(t,e){return $.ajax(t,{type:"post",dataType:"json",processData:!1,contentType:"application/json",data:JSON.stringify(e)})},n.prototype.onSectionsChanged=function(t,e){e.initalSectionsChanged?this.enableSaving():this.disableSaving()},n.prototype.enableSaving=function(){this.$btnSaveSections.toggleClass("disabled",!1).removeAttr("disabled")},n.prototype.disableSaving=function(){this.$btnSaveSections.toggleClass("disabled",!0).attr("disabled","disabled")},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.sectionPicker=e,this.$btnSaveSections=this.$container.find(".fcx-photo-infos__save-sections")}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoInfos=o,e.exports=i.default},{}],92:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("../Drilldown/Drilldown"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.showInDrilldown=function(t){return!0},l.prototype.showInTypeahead=function(t,e){return new RegExp("((?:^|\\s)+)("+t+")","i").test(e.shortname)},l.prototype.initFilling=function(){this.fill(!0)},l.prototype.itemSelected=function(t,e){t.preventDefault(),this.$container.hasClass("fcx-drilldown__container--nude")&&0===e.nude||this.$container.hasClass("fcx-drilldown__container--non-nude")&&1===e.nude||(this.$container.trigger("fcx:drilldown:item-selected",e),this.$container.attr("data-section-id",e.section_id),this.$container.attr("data-category-id",e.channel_id),this.hide())},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoInfosDrilldown=r,e.exports=i.default},{"../Drilldown/Drilldown":21}],93:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.getHref=function(){return this.$container.find(".fcx-show-detail").attr("href")},n.prototype.getUrl=function(){return this.$container.find(".fcx-show-detail").attr("data-href")},n.prototype.getMetaUrl=function(){return this.$container.find(".fcx-show-detail").attr("data-meta")},n.prototype.getId=function(){return this.$container.find(".fcx-show-detail").attr("data-id")},n.prototype.getPhoto=function(){return this.$container},n.prototype.setClicks=function(t){this.$container.find(".js-thumb-functions .fcx-clicks").text(t)},n.prototype.setAppreciates=function(t){this.$container.find(".js-thumb-functions .fcx-like .fcx-appreciate-count").text(t)},n.prototype.setComments=function(t){this.$container.find(".js-thumb-functions .fcx-comments").text(t)},n.prototype.setFeedbackwelcome=function(t){t?this.$container.find(".js-feedbackwelcome").removeClass("hidden"):this.$container.find(".js-feedbackwelcome").addClass("hidden")},n.prototype.removeNewAppreciatesFlag=function(){this.removeElement(this.$container.find(".js-photo-likes-has-updates"))},n.prototype.removeNewCommentsFlag=function(){this.removeElement(this.$container.find(".js-unread-comments-has-updates"))},n.prototype.removeElement=function(t){0<=t.length&&t.remove()},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoItem=o,e.exports=i.default},{}],94:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent(),this.updateInterval=null,this.metaFinishedLoading=!1},n.prototype.bindEvent=function(){$(document).on("fcx:photo-item:startObserve",$.proxy(this.startUpdateInterval,this)),$(document).on("fcx:photo-item:stopObserve",$.proxy(this.stopUpdateInterval,this)),$(document).on("fcx:template-loader:finished-loading:photo-meta",$.proxy(this.setMetaFinishedLoading,this))},n.prototype.startUpdateInterval=function(t,e){this.currentPhoto=e.currentPhoto,this.currentPhoto.removeNewAppreciatesFlag(),this.currentPhoto.removeNewCommentsFlag(),this.stopUpdateInterval(),this.updateInterval=setInterval($.proxy(function(){this.update()},this),500)},n.prototype.stopUpdateInterval=function(){this.update(),this.metaFinishedLoading=!1,clearInterval(this.updateInterval)},n.prototype.update=function(){this.setData(this.currentPhoto.setClicks,this.$container.find(".fcx-click-count").text()),this.setData(this.currentPhoto.setAppreciates,this.$container.find(".fcx-appreciate-count-default").text()),this.setData(this.currentPhoto.setComments,this.$container.find(".fcx-comments-count").text()),this.metaFinishedLoading&&this.currentPhoto.setFeedbackwelcome(this.$container.find(".js-feedback-welcome-text").length)},n.prototype.setData=function(t,e){e.length<=0||t.call(this.currentPhoto,$.trim(e))},n.prototype.setMetaFinishedLoading=function(){this.metaFinishedLoading=!0},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoItemUpdater=o,e.exports=i.default},{}],95:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent(),this.loadState.setLoadStateElement($(".fcx-load-placeholder"))},n.prototype.bindEvent=function(){$(document).on("fcx:photo-search:search",$.proxy(this.onSearch,this)),$(document).on("fcx:template-loader:finished-loading:photo-list",$.proxy(this.onLoaded,this)),$(document).on("fcx:template-loader:failed-loading:photo-list",$.proxy(this.onLoaded,this)),this.$container.on("click",".js-profile-link, .fcx-thumb-whitewall",$.proxy(this.openLink,this))},n.prototype.onSearch=function(t,e){this.templateLoader.setOptions({template:e.url,name:"photo-list",type:"GET",target:this.$container}),this.templateLoader.load(),this.loadState.addSpinner(),this.$container.hide(),$(document).trigger("fcx:browser-navigation-list:add",{url:e.url,site:"result"}),$(document).trigger("fcx:google-analytics:pageview")},n.prototype.onLoaded=function(){this.loadState.removeSpinner(),this.$container.show(),$(document).trigger("fcx:meta-information:update",{title:$(".meta-information-placeholder-title").text(),description:$(".meta-information-placeholder-description").text()}),$(document).trigger("fcx:base:setup-tooltips")},n.prototype.openLink=function(t){t.stopPropagation(),location.reload($(t.currentTarget).attr("href"))},n);function n(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.templateLoader=e,this.loadState=i}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoList=o,e.exports=i.default},{}],96:[function(t,e,i){"use strict";i.__esModule=!0;var o,n=t("./PhotoItem.js"),s=(o=n)&&o.__esModule?o:{default:o},a=(r.prototype.init=function(){this.bindEvent(),this.browserNavigation.stopScrollTopOnPopState()},r.prototype.bindEvent=function(){$(document).on("fcx:browser-navigation-list:add",$.proxy(this.addUrl,this)),$(document).on("fcx:browser-navigation:popstate",$.proxy(this.onHistoryNavigate,this))},r.prototype.addUrl=function(t,e){if(!this.historyState.getNavigated()){var i=e.url;i.length<=0&&(i=this.browserNavigation.initalUrl),this.historyState.setCurrentSite(e.site),this.browserNavigation.addUrl(i)}},r.prototype.onHistoryNavigate=function(t,e){this.historyState.setNavigated(!0);var i=this.getPhotoItemFromUrl(e.url);if($(document).trigger("fcx:lightbox-image:hide"),i instanceof s.default)this.isPhotoDetail(e.url)&&($(document).trigger("fcx:photo-page:show",{currentPhoto:i}),this.historyState.setCurrentSite("detail")),this.isPhotoEdit(e.url)&&($(document).trigger("fcx:photo-edit-page:show",{url:e.url,currentPhoto:i}),this.historyState.setCurrentSite("edit"));else{if(this.isPhotoDetail(e.url))return void location.reload(!0);"detail"===this.historyState.getCurrentSite()?($(document).trigger("fcx:template-loader:stop-loading:photo-page"),$(document).trigger("fcx:photo-list-page:show"),this.historyState.setCurrentSite("result")):$(document).trigger("fcx:photo-search:search",{url:e.url})}},r.prototype.getPhotoItemFromUrl=function(t){var e=arguments.length<=0||void 0===t?"":t;if(e.length<=0)return"";var i=parseInt(e.slice(e.lastIndexOf("/")+1),10),o=$('.fcx-show-detail[data-id="'+i+'"]').parents(".fcx-gallery__item");return o.length<=0?"":new s.default(o)},r.prototype.isPhotoDetail=function(t){var e=arguments.length<=0||void 0===t?"":t,i=parseInt(e.slice(e.lastIndexOf("/")+1),10);return 0<=e.indexOf("photo")&&e.indexOf("photo-")<0&&e.indexOf("photos")<0&&$.isNumeric(i)},r.prototype.isPhotoEdit=function(t){var e=arguments.length<=0||void 0===t?"":t,i=parseInt(e.slice(e.lastIndexOf("/")+1),10);return 0<=e.indexOf("photo-edit")&&$.isNumeric(i)},r);function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.browserNavigation=t,this.historyState=e}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoListBrowserNavigation=a,e.exports=i.default},{"./PhotoItem.js":93}],97:[function(t,e,i){"use strict";i.__esModule=!0;var o,n=t("./PhotoItem.js"),s=(o=n)&&o.__esModule?o:{default:o},a=(r.prototype.init=function(){this.bindEvent(),this.url=""},r.prototype.bindEvent=function(){this.$container.on("click",".fcx-photo",$.proxy(this.onShowPhotoDetail,this)),$(document).on("fcx:template-loader:finished-loading:photo-page",$.proxy(this.hide,this)),$(document).on("fcx:template-loader:finished-loading:photo-edit-page",$.proxy(this.hide,this)),$(document).on("fcx:photo-list-page:show",$.proxy(this.show,this)),$(document).on("fcx:photo-search:search",$.proxy(this.setUrl,this))},r.prototype.onShowPhotoDetail=function(t){t.preventDefault(),t.stopPropagation();var e=$(t.currentTarget).parents(".fcx-gallery__item");this.scrollState.set(),$(document).trigger("fcx:photo-page:show",{currentPhoto:new s.default(e)})},r.prototype.hide=function(){this.$container.hide()},r.prototype.show=function(){this.$container.show(),this.scrollState.scrollTo(),$(document).trigger("fcx:browser-navigation-list:add",{url:this.url,site:"result"}),$(document).trigger("fcx:google-analytics:pageview"),$(document).trigger("fcx:load-intro",{container:this.$container}),$(document).trigger("fcx:meta-information:update",{title:$(".meta-information-placeholder-title").text(),description:$(".meta-information-placeholder-description").text()}),$(document).trigger("fcx:photo-list-page:loaded")},r.prototype.setUrl=function(t,e){this.scrollState.init(),this.url=e.url},r);function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.$container=t,this.scrollState=e}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoListPage=a,e.exports=i.default},{"./PhotoItem.js":93}],98:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n,s=o(t("./PhotoSearch")),a=o(t("../UrlHandler.js")),r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=s.default),l.prototype.init=function(){this.nextSite=2,this.prevSite=0,this.setPagination(location.href),this.bindEvent()},l.prototype.bindEvent=function(){$(document).on("fcx:photo-search:search",$.proxy(this.onSetPagination,this)),this.$container.on("click",".fcx-photo-result-next",$.proxy(this.onNext,this)),this.$container.on("click",".fcx-photo-result-previous",$.proxy(this.onPrevious,this)),$(document).on("fcx:pagination:next",$.proxy(this.next,this)),$(document).on("fcx:pagination:previous",$.proxy(this.previous,this)),$(document).on("fcx:pagination:paginate",$.proxy(this.onPaginate,this)),$(document).on("fcx:pagination:reset",$.proxy(this.setUrl,this))},l.prototype.onSetPagination=function(t,e){this.setPagination(e.url)},l.prototype.setPagination=function(t){var e=new a.default(t),i=parseInt(e.getParamValueFromUrl("page"),10);$.isNumeric(i)&&0<i?(this.nextSite=i+1,this.prevSite=i-1):(this.nextSite=2,this.prevSite=0)},l.prototype.onNext=function(t){t.preventDefault(),this.next()},l.prototype.next=function(){this.paginate(this.nextSite)},l.prototype.onPrevious=function(t){t.preventDefault(),this.previous()},l.prototype.previous=function(){this.paginate(this.prevSite)},l.prototype.onPaginate=function(t,e){this.paginate(e.page)},l.prototype.paginate=function(t){this.setUrl(t),this.onChange()},l.prototype.setUrl=function(t){var e=arguments.length<=0||void 0===t?"":t,i="";1<e&&(i="page="+e),this.urlPersister.persist({name:"page",value:i})},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoListPagination=r,e.exports=i.default},{"../UrlHandler.js":151,"./PhotoSearch":103}],99:[function(t,e,i){"use strict";i.__esModule=!0;var o,n=t("./PhotoItem.js"),s=(o=n)&&o.__esModule?o:{default:o},a=(r.prototype.init=function(){this.bindEvent(),this.loadState.setLoadStateElement($(".fcx-load-placeholder")),this.loadPhoto=!1},r.prototype.bindEvent=function(){$(document).on("fcx:photo-list:show-photo-page",$.proxy(this.loadList,this)),$(document).on("fcx:template-loader:finished-loading:photo-list",$.proxy(this.onLoadedList,this))},r.prototype.paginatePossible=function(){return{previous:this.$container.find(".fcx-photo-result-previous").length,next:this.$container.find(".fcx-photo-result-next").length}},r.prototype.loadList=function(t,e){var i=this.paginatePossible();this.direction=e.direction,"previous"===this.direction&&i.previous?(this.onLoadList(),$(document).trigger("fcx:pagination:previous")):"next"===this.direction&&i.next&&(this.onLoadList(),$(document).trigger("fcx:pagination:next"))},r.prototype.onLoadList=function(){this.loadPhoto=!0,this.loadState.showLayer(),this.historyState.setNavigated(!0),$(document).trigger("fcx:template-loader:stop-loading:photo-page"),$(document).trigger("fcx:keyboard:photo-page:stopObserve")},r.prototype.onLoadedList=function(){this.loadPhoto&&($(document).trigger("fcx:photo-page:show",{currentPhoto:this.getPhotoItem()}),this.loadPhoto=!1)},r.prototype.getPhotoItem=function(){var t=$(".fcx-gallery__item"),e=new s.default(t.first());return"previous"===this.direction&&(e=new s.default(t.last())),e},r);function r(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.$container=t,this.loadState=e,this.historyState=i}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoListPaginationHandler=a,e.exports=i.default},{"./PhotoItem.js":93}],100:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent(),this.loadState.setLoadStateElement($(".fcx-load-placeholder")),this.$currentPhoto=""},n.prototype.bindEvent=function(){$(document).on("fcx:photo-page:show",$.proxy(this.load,this)),$(document).on("fcx:template-loader:finished-loading:photo-page",$.proxy(this.onLoaded,this)),$(document).on("fcx:template-loader:failed-loading:photo-page",$.proxy(this.onFailed,this)),$(document).on("fcx:photo-list-page:loaded",$.proxy(this.hide,this)),this.$container.on("click",".fcx-back-to-list",$.proxy(this.back,this))},n.prototype.load=function(t,e){this.$currentPhoto=e.currentPhoto,this.templateLoader.setOptions({template:this.$currentPhoto.getUrl(),name:"photo-page",type:"GET",target:this.$container,currentPhoto:this.$currentPhoto}),this.templateLoader.load(),this.loadState.showLayer()},n.prototype.onLoaded=function(){this.loadState.hideLayer(),this.$container.show(),this.scrollState.scrollTo(),$(document).trigger("fcx:photo-item:startObserve",{currentPhoto:this.$currentPhoto}),$(document).trigger("fcx:keyboard:photo-page:startObserve"),$(document).trigger("fcx:browser-navigation-list:add",{url:this.$currentPhoto.getHref(),site:"detail"}),$(document).trigger("fcx:google-analytics:pageview"),$(document).trigger("fcx:meta-information:update",{title:$(".meta-information-detail-placeholder-title").text(),description:$(".meta-information-detail-placeholder-description").text()}),$(document).trigger("fcx:base:setup-tooltips")},n.prototype.onFailed=function(){this.loadState.hideLayer()},n.prototype.back=function(t){t.preventDefault(),$(document).trigger("fcx:photo-list-page:show")},n.prototype.hide=function(){$(document).trigger("fcx:photo-item:stopObserve"),$(document).trigger("fcx:keyboard:photo-page:stopObserve"),$(document).trigger("fcx:template-loader:stop-loading:photo-page"),this.$container.hide(),this.$container.html(""),this.loadState.hideLayer()},n);function n(t,e,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.templateLoader=e,this.loadState=i,this.scrollState=o}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoPage=o,e.exports=i.default},{}],101:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent(),this.$currentPhoto=""},n.prototype.bindEvent=function(){$(document).on("fcx:template-loader:finished-loading:photo-page",$.proxy(this.load,this)),$(document).on("fcx:template-loader:finished-loading:photo-meta",$.proxy(this.onLoaded,this)),$(document).on("fcx:template-loader:failed-loading:photo-meta",$.proxy(this.onLoaded,this)),this.$container.on("click",".js-edit-photo",$.proxy(this.onShowPhotoEdit,this))},n.prototype.load=function(t,e){this.$currentPhoto=e.options.currentPhoto;var i={photoId:parseInt(this.$currentPhoto.getId(),10)};this.templateLoader.setOptions({template:this.$currentPhoto.getMetaUrl(),name:"photo-meta",type:"POST",target:this.$container,load:"append",params:i}),this.templateLoader.load()},n.prototype.onLoaded=function(){this.loadState.setLoadStateElement($(".fcx-spinner")),this.loadState.hide(),$(document).trigger("fcx:load-intro",{container:this.$container}),$(document).trigger("fcx:base:setup-tooltips")},n.prototype.onShowPhotoEdit=function(t){t.preventDefault(),t.stopPropagation();var e=$(t.currentTarget).attr("href");$(document).trigger("fcx:photo-edit-page:show",{url:e,currentPhoto:this.$currentPhoto})},n);function n(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.templateLoader=e,this.loadState=i}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoPageMeta=o,e.exports=i.default},{}],102:[function(t,e,i){"use strict";i.__esModule=!0;var o,n=t("./PhotoItem.js"),s=(o=n)&&o.__esModule?o:{default:o},a=(r.prototype.init=function(){this.bindEvent(),this.prevPhoto=null,this.nextPhoto=null},r.prototype.bindEvent=function(){$(document).on("fcx:template-loader:start-loading:photo-page",$.proxy(this.setNavigation,this)),$(document).on("fcx:template-loader:finished-loading:photo-page",$.proxy(this.setVisibility,this)),this.$container.on("click",".fcx-pagination-container .previous-photo",$.proxy(this.onLoadPrevPhoto,this)),this.$container.on("click",".fcx-pagination-container .next-photo",$.proxy(this.onLoadNextPhoto,this)),$(document).on("fcx:keyboard:photo-page:left",$.proxy(this.onLoadPrevPhoto,this)),$(document).on("fcx:keyboard:photo-page:right",$.proxy(this.onLoadNextPhoto,this))},r.prototype.setNavigation=function(t,e){this.$currentPhoto=e.options.currentPhoto;var i=this.$currentPhoto.getPhoto();this.prevPhoto=this.getPhotoItem($(i).prevAll(".fcx-gallery__item").first()),this.nextPhoto=this.getPhotoItem($(i).nextAll(".fcx-gallery__item").first())},r.prototype.setVisibility=function(){var t=this.photoListPaginationHandler.paginatePossible();this.prevPhoto instanceof s.default||t.previous||$(".previous-photo").hide(),this.nextPhoto instanceof s.default||t.next||$(".next-photo").hide()},r.prototype.getPhotoItem=function(t){var e=arguments.length<=0||void 0===t?"":t;return e.length<=0||!e.hasClass("fcx-gallery__item")?null:new s.default(e)},r.prototype.onLoadPrevPhoto=function(t){t.preventDefault(),this.load(this.prevPhoto,"previous")},r.prototype.onLoadNextPhoto=function(t){t.preventDefault(),this.load(this.nextPhoto,"next")},r.prototype.load=function(t,e){t instanceof s.default?$(document).trigger("fcx:photo-page:show",{currentPhoto:t}):$(document).trigger("fcx:photo-list:show-photo-page",{direction:e})},r);function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.$container=t,this.photoListPaginationHandler=e}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoPageNavigation=a,e.exports=i.default},{"./PhotoItem.js":93}],103:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.elements=[],this.bindEvent(),this.addElements()},n.prototype.bindEvent=function(){},n.prototype.addElements=function(){},n.prototype.onChange=function(){$(document).trigger("fcx:photo-search:search",{url:this.urlPersister.get()})},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.urlPersister=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoSearch=o,e.exports=i.default},{}],104:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){$(document).on("fcx:photo-search:search",$.proxy(this.scrollTo,this)),$(document).on("fcx:template-loader:finished-loading:photo-list",$.proxy(this.scrollTo,this))},n.prototype.scrollTo=function(){var t=this.getOffset(),e=$(".navbar:visible").height();this.scrollState.scrollToPosition(t.top-e)},n.prototype.getOffset=function(){var t=this.$container.offset();return!this.$container.is(":visible")&&this.$parent.is(":visible")&&(this.$container.show(),t=this.$container.offset(),this.$container.hide()),t},n);function n(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.$parent=e,this.scrollState=i}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.ScrollToPhotoList=o,e.exports=i.default},{}],105:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvents(),this.rightClickTimeout=!1},n.prototype.bindEvents=function(){this.$zoomContainer.on("contextmenu","img.pswp__img",function(t){t.preventDefault()}),this.$containerParent.on("contextmenu","img.photo",$.proxy(this.showTooltip,this)),this.$containerParent.on("contextmenu",".fcx-photo-filter-addon",$.proxy(this.showTooltip,this)),this.$containerParent.on("mouseleave",$.proxy(this.onMouseLeave,this)),this.$containerParent.on("click",$.proxy(this.onMouseLeave,this)),this.$containerParent.on("dragstart",$.proxy(this.showTooltip,this))},n.prototype.showTooltip=function(t){t.preventDefault(),this.$containerTooltip.tooltip("show");var e=this.$containerTooltip.next(".tooltip"),i=this.getTooltipPosition(t,e);e.css({left:i.left+"px",top:i.top+"px"}),this.hideTooltip()},n.prototype.getTooltipPosition=function(t,e){var i=e.width()/2,o=this.$container.offset();return{left:t.originalEvent.pageX-o.left-i,top:t.originalEvent.pageY-o.top+10}},n.prototype.onMouseLeave=function(){clearTimeout(this.rightClickTimeout),this.$containerTooltip.tooltip("hide")},n.prototype.hideTooltip=function(){var t=this.$containerTooltip;clearTimeout(this.rightClickTimeout),this.rightClickTimeout=window.setTimeout(function(){t.tooltip("hide")},2e3)},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.$containerParent=this.$container.parent(".protected-photo"),this.$containerTooltip=this.$container.find(".fcx-photo-wrapper-tooltip"),this.$zoomContainer=$(".fcx-photo-zoom")}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoRightClickBarrier=o,e.exports=i.default},{}],106:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvents()},n.prototype.bindEvents=function(){$("#plan_picker_btn:not(.disabled)").on("click",$.proxy(this.selectPlan,this)),$(".payment--interval").on("change",$.proxy(this.selectInterval,this))},n.prototype.selectPlan=function(){var t=$("#plan_picker_btn").data("ua-builder")+$("#plan_picker option:selected").text().trim();t+=";"+$("#plan_picker_btn").data("user-status"),$(document).trigger("custom-submit",t),window.location=$("#plan_picker option:selected").attr("data-href")},n.prototype.selectInterval=function(t){var i=$(t.currentTarget).val(),o=$.parseJSON($(".product-option-prices").html());$(".price--value").each(function(){var t=$(this).data("product-id"),e=o[t][i].price_per_month;$(this).html(e)}),$(".btn-join").each(function(){var t=$(this).data("product-id"),e=o[t][i].product_option_id;$(this).attr("href","/payment?productOptionId="+e)})},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Premium=o,e.exports=i.default},{}],107:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvents()},n.prototype.bindEvents=function(){this.$uploadCta.on("click",$.proxy(this.showFileInputModal,this)),this.$deleteCta.on("click",$.proxy(this.deleteProfilePhoto,this)),this.$input.on("change",$.proxy(this.onFileInputChange,this))},n.prototype.showFileInputModal=function(t){t.preventDefault(),this.$uploadCta.blur(),this.$input.trigger("click")},n.prototype.deleteProfilePhoto=function(t){var e=this;t.preventDefault(),this.$deleteCta.blur();var i=this.$deleteCta.data("delete-action"),o=this.$deleteCta.data("default-photo");$.post(i).done($.proxy(function(){e.$image.attr("src",o),e.$deleteCta.addClass("hidden")},this))},n.prototype.onFileInputChange=function(t){var e=t.currentTarget;this.isPreviewPossible(e)||this.$container.addClass("no--preview"),this.uploadFile(e.files[0])},n.prototype.isPreviewPossible=function(t){return!!t.files&&!!t.files[0]},n.prototype.uploadFile=function(t){"image/jpeg"===t.type&&(this.fileReader.onload=$.proxy(function(t){this.$image.attr("src",t.target.result)},this),this.fileReader.readAsDataURL(t),this.uploadPhoto())},n.prototype.uploadPhoto=function(){$.ajax({type:"POST",url:this.$form.attr("action"),data:new FormData(this.$form[0]),contentType:!1,processData:!1}).done($.proxy(this.onDone,this))},n.prototype.onDone=function(t){this.$image.attr("src",t.profile_image_url),this.$deleteCta.removeClass("hidden")},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.fileReader=e,this.$input=this.$container.find('input[type="file"]'),this.$image=this.$container.find("img.js-profile-image"),this.$form=this.$container.find("form"),this.$uploadCta=this.$container.find(".js-pu-upload"),this.$deleteCta=this.$container.find(".js-pu-delete")}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.ProfilePhotoUpload=o,e.exports=i.default},{}],108:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.setupItems=function(){this.$container.find("div.progress-bar").each($.proxy(function(t,e){var i=$(e).data("keyname");this.items[i]={value:$(e).data("value"),initialValue:$(e).data("value"),offset:$(e).data("offset")},1===$(e).find(".fcx-tooltip-template").length?this.setTooltipViaTemplate(i,{}):this.setTooltip(i,$(e).attr("title"))},this)),this.refresh()},n.prototype.refresh=function(){var t,e=0,i=0,o=0;for(t in this.items)this.items.hasOwnProperty(t)&&(i+=this.items[t].offset,o+=this.items[t].value);for(t in"percent"===this.mode&&(o=100),this.items)if(this.items.hasOwnProperty(t)){var n=0;0<o&&(n=this.items[t].value/o),this.items[t].cssWidth=Math.round(100*(this.items[t].offset+n*(this.$container.width()-i))/this.$container.width(),0),e+=this.items[t].cssWidth}if("fill"===this.mode)for(t in this.items)if(this.items.hasOwnProperty(t)&&0<this.items[t].cssWidth){this.items[t].cssWidth-=e-100;break}for(t in this.items)this.items.hasOwnProperty(t)&&this.$container.find('[data-keyname="'+t+'"]').toggleClass("fcx-zero",0===this.items[t].value).css({width:this.items[t].cssWidth+"%"})},n.prototype.setValue=function(t,e){this.items[t].value=e},n.prototype.setOffset=function(t,e){this.items[t].offset=e},n.prototype.setCaption=function(t,e){var i=this.$container.find('[data-keyname="'+t+'"] .fcx-caption');1===i.length&&i.html(e)},n.prototype.setCaptionViaTemplate=function(t,e){var i;i=n.getReplacedTemplateText(this.$container.find('[data-keyname="'+t+'"] .fcx-caption-template').html(),e),this.setCaption(t,i)},n.prototype.setTooltip=function(t,e){this.$container.find('[data-keyname="'+t+'"]').attr("data-original-title",e)},n.prototype.setTooltipViaTemplate=function(t,e){var i=n.getReplacedTemplateText(this.$container.find('[data-keyname="'+t+'"] .fcx-tooltip-template').html(),e);this.setTooltip(t,i)},n.prototype.setTooltipViaDataKeyName=function(t,e,i){var o=this.$container.find('[data-keyname="'+t+'"] .fcx-tooltip-template');o.find('[data-keyname="'+e+'"]').html(i),this.setTooltip(t,o.html())},n.getReplacedTemplateText=function(t,e){var i;for(i in e)e.hasOwnProperty(i)&&(t=t.replace(i,e[i]));return t},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.mode=t.data("mode"),this.items={},this.setupItems()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.ProgressBar=o,e.exports=i.default},{}],109:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvents()},n.prototype.bindEvents=function(){this.$container.off("click",this.submitSelector),this.$container.on("click",this.submitSelector,$.proxy(this.createToken,this))},n.prototype.createToken=function(t){var e=this;if(this.isTokenCreated)return!(this.isTokenCreated=!1);t.preventDefault(),t.currentTarget.disabled=!0,grecaptcha.execute("6Le8E4AUAAAAANSY-dXD99fwl9LowtdEzUaPbcfq",{action:this.action}).then(function(t){return e.setToken(t)}).then(function(){return t.currentTarget.click()}).then(function(){return t.currentTarget.disabled=!1}).catch(function(){return t.currentTarget.disabled=!1})},n.prototype.setToken=function(t){$('[name="'+this.action+'[gsec]"]').val(t),this.isTokenCreated=!0},n);function n(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.submitSelector=i,this.action=e,this.createToken=this.createToken.bind(this),this.setToken=this.setToken.bind(this),this.isTokenCreated=!1}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Recaptcha=o,e.exports=i.default},{}],110:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){this.$container.on("click",this.element,$.proxy(this.onReset,this)),$(document).on("fcx:resetter:"+this.name+":show",$.proxy(this.showResetter,this)),$(document).on("fcx:resetter:"+this.name+":hide",$.proxy(this.hideResetter,this))},n.prototype.onReset=function(t){t.preventDefault(),$(document).trigger("fcx:resetter:"+this.name+":reset")},n.prototype.showResetter=function(){var t=this.$container.find(this.element);t.removeClass("hidden"),t.show()},n.prototype.hideResetter=function(){var t=this.$container.find(this.element);t.addClass("hidden"),t.hide()},n);function n(t,e){var i=arguments.length<=2||void 0===arguments[2]?"":arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.element=e,this.name=i}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Resetter=o,e.exports=i.default},{}],111:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.top=0},n.prototype.set=function(){this.top=$(window).scrollTop()},n.prototype.get=function(){return this.top},n.prototype.adjust=function(t,e){var i=arguments.length<=1||void 0===e||e;this.top+=!0===i?t:-t},n.prototype.scrollTo=function(){this.$container.scrollTop(this.get()),this.delayedScrollTo()},n.prototype.scrollToPosition=function(t){var e=arguments.length<=0||void 0===t?0:t;this.$container.scrollTop(e)},n.prototype.delayedScrollTo=function(){setTimeout($.proxy(function(){$(window).scrollTop()!==this.get()&&this.$container.scrollTop(this.get())},this),10)},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.init()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.ScrollState=o,e.exports=i.default},{}],112:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){$(document).on("fcx:template-loader:finished-loading:photo-edit-page",$.proxy(this.setVisiblity,this,!0)),$(document).on("fcx:template-loader:finished-loading:photo-page",$.proxy(this.setVisiblity,this,!0)),$(document).on("fcx:photo-list-page:show",$.proxy(this.setVisiblity,this,!1))},n.prototype.setVisiblity=function(t){$(document).trigger("fcx-detail-page-visibility-changed",{visible:t})},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoHeaderSearch=o,e.exports=i.default},{}],113:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent(),this.term=this.getCurrentTerm()},n.prototype.bindEvent=function(){$(document).on("fcx:keyboard:input-text-focus-term:enter",$.proxy(this.triggerAnalyticsEvent,this,"Suche-Fotos;Submit per Enter-Taste;")),$(document).on("fcx:input:button-search",$.proxy(this.triggerAnalyticsEvent,this,"Suche-Fotos;Submit per Button;"))},n.prototype.getCurrentTerm=function(){var i="";return $.each(this.photoSearchForm.elements,$.proxy(function(t,e){if("term"===e.options.name)return i=e.getValue().toString(),!1},this)),i},n.prototype.triggerAnalyticsEvent=function(t){var e=arguments.length<=0||void 0===t?"":t,i=this.getCurrentTerm();$(document).trigger("custom-submit",[e+i]),this.term!==i&&($(document).trigger("custom-submit",["Suche-Fotos;Neue Suche;"+i]),$(document).trigger("custom-submit",["Globale-Funktionen;Suche;"+i]),this.term=i)},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.photoSearchForm=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoSearchAnalytics=o,e.exports=i.default},{}],114:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n,s=o(t("../../PhotoList/PhotoSearch")),a=o(t("../../UrlHandler.js")),r=o(t("../../DatePicker.js")),l=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,n=s.default),c.prototype.init=function(){n.prototype.init.call(this),this.persistUrl()},c.prototype.bindEvent=function(){n.prototype.bindEvent.call(this),$(document).on("fcx:photo-search:search",$.proxy(this.onSearch,this)),$(document).on("fcx-datepicker-changed",$.proxy(this.onDatePickerChange,this))},c.prototype.addElements=function(){this.datePicker=new r.default($("#fcx-datepicker")),this.datePicker.initFromMarkup()},c.prototype.onDatePickerChange=function(){this.persistUrl(),$(document).trigger("fcx:pagination:reset"),this.onChange()},c.prototype.persistUrl=function(){var t=this.getUrlParam(),e="";0<t.length&&(e="date="+t),this.urlPersister.persist({name:"date",value:e})},c.prototype.onSearch=function(t,e){var i=new a.default(e.url).getParamValueFromUrl("date").split(",");this.update(i),this.persistUrl()},c.prototype.getUrlParam=function(){return this.datePicker.getUrlParam()},c.prototype.update=function(t){this.datePicker.update(t)},c);function c(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),n.apply(this,arguments)}i.default=l,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoSearchDatepicker=l,e.exports=i.default},{"../../DatePicker.js":16,"../../PhotoList/PhotoSearch":103,"../../UrlHandler.js":151}],115:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("../../Drilldown/Drilldown"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.itemSelected=function(t,e){var i=this.callbacks["item-selected"];if("function"==typeof i){var o=e.shortname.replace(/,/g,"").trim();"root"!==e.parent_id&&this.isset("c"+e.channel_id)&&(o=this.sections["c"+e.channel_id].shortname+": "+o),i(e,o)}this.$container.attr("data-section-id",e.section_id),this.$container.attr("data-category-id",e.channel_id),this.hide()},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoSearchDrilldown=r,e.exports=i.default},{"../../Drilldown/Drilldown":21}],116:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n,s=o(t("../../PhotoList/PhotoSearch")),l=o(t("../../InputTypes/Text")),c=o(t("../../InputTypes/Button")),d=o(t("../../InputTypes/Checkbox")),p=o(t("../../InputTypes/Select")),a=o(t("../../FormSerializer.js")),r=o(t("../../UrlHandler.js")),h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,n=s.default),u.prototype.init=function(){this.filter=[],n.prototype.init.call(this),this.persistUrl()},u.prototype.bindEvent=function(){n.prototype.bindEvent.call(this),$(document).on("fcx:photo-search:search",$.proxy(this.onSearch,this)),$(document).on("fcx:template-loader:finished-loading:photo-list",$.proxy(this.onLoaded,this))},u.prototype.addElements=function(){var t=new l.default('form.fcx-photo-search-form input[name="term"]',{$parent:this.$container,name:"term",value:"",event:"",onEvent:$.proxy(this.onFormChange,this)}),e=new c.default("form.fcx-photo-search-form button.btn-search",{$parent:this.$container,name:"button-search",event:"click",onEvent:$.proxy(this.onFormChange,this)}),i=new d.default('form.fcx-photo-search-form input[name="galleries[]"]',{$parent:this.$container,name:"galleries",event:"change",onEvent:$.proxy(this.onFormChange,this)}),o=new d.default('form.fcx-photo-search-form input[name="orientations[]"]',{$parent:this.$container,name:"orientations",event:"change",onEvent:$.proxy(this.onFormChange,this)}),n=new d.default('form.fcx-photo-search-form input[name="extended"]',{$parent:this.$container,name:"extended",event:"change",onEvent:$.proxy(this.onFormChange,this)}),s=new d.default('form.fcx-photo-search-form input[name="licenses[]"]',{$parent:this.$container,name:"licenses",event:"change",onEvent:$.proxy(this.onFormChange,this)}),a=new p.default('form.fcx-photo-search-form select[name="sort"]',{$parent:this.$container,name:"sort",event:"change",onEvent:$.proxy(this.onFormChange,this)}),r=new d.default('form.fcx-photo-search-form input[name="feedback_welcome"]',{$parent:this.$container,name:"feedback_welcome",event:"change",onEvent:$.proxy(this.onFormChange,this)});this.elements=[t,e,i,o,n,r,s,a],this.filter=[i,o,r,s],$(document).trigger("fcx-search-criteria-changed",{value:t.getValue()})},u.prototype.onFormChange=function(){this.persistUrl(),$(document).trigger("fcx:pagination:reset"),this.onChange()},u.prototype.persistUrl=function(){var t=new a.default(this.$container,"form.fcx-photo-search-form");this.urlPersister.persist({name:"form",value:t.get()})},u.prototype.onSearch=function(t,e){var i=new r.default(e.url);$.each(this.elements,$.proxy(function(t,e){e.setValue(i.getParamValueFromUrl(e.options.name))},this)),this.persistUrl(),$(document).trigger("fcx-search-criteria-changed",{value:i.getParamValueFromUrl("term")})},u.prototype.onLoaded=function(){$(document).trigger("fcx:custom-scrollbar:reload")},u);function u(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),n.apply(this,arguments)}i.default=h,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoSearchForm=h,e.exports=i.default},{"../../FormSerializer.js":34,"../../InputTypes/Button":40,"../../InputTypes/Checkbox":41,"../../InputTypes/Select":43,"../../InputTypes/Text":44,"../../PhotoList/PhotoSearch":103,"../../UrlHandler.js":151}],117:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent(),this.toggleResetButton()},n.prototype.bindEvent=function(){$(document).on("fcx:photo-search:search",$.proxy(this.toggleResetButton,this)),$(document).on("fcx:resetter:photo-search-filter:reset",$.proxy(this.onReset,this))},n.prototype.toggleResetButton=function(){this.filterIsSet()||this.dateIsSet()?(this.$container.find("#filter").collapse("show"),$(document).trigger("fcx:resetter:photo-search-filter:show")):$(document).trigger("fcx:resetter:photo-search-filter:hide")},n.prototype.filterIsSet=function(){var i=!1;return $.each(this.photoSearchForm.filter,$.proxy(function(t,e){$.each(e.getValue(),$.proxy(function(t,e){e&&(i=!0)},this))},this)),i},n.prototype.dateIsSet=function(){return 0<this.photoSearchDatepicker.getUrlParam().length},n.prototype.onReset=function(){this.resetFilter(),this.resetDate(),$(document).trigger("fcx:pagination:reset"),this.$container.find("#filter").collapse("hide"),this.photoSearchForm.onChange()},n.prototype.resetFilter=function(){$.each(this.photoSearchForm.filter,$.proxy(function(t,e){e.setValue("")},this)),this.photoSearchForm.persistUrl()},n.prototype.resetDate=function(){this.photoSearchDatepicker.update(""),this.photoSearchDatepicker.persistUrl()},n);function n(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.photoSearchForm=e,this.photoSearchDatepicker=i}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoSearchReset=o,e.exports=i.default},{}],118:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n,s=o(t("../../PhotoList/PhotoSearch")),a=o(t("./PhotoSearchDrilldown")),r=o(t("../../InputTypes/Text")),l=o(t("../../FormSerializer.js")),c=o(t("../../UrlHandler.js")),d=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(p,n=s.default),p.prototype.bindEvent=function(){n.prototype.bindEvent.call(this),this.$container.on("mousedown",".fcx-btn-drilldown",$.proxy(this.onOpen,this)),this.$container.on("click",".fcx-btn-drilldown-close",$.proxy(this.onReset,this)),$(document).on("fcx:photo-search:search",$.proxy(this.onSearch,this)),$(document).on("fcx:template-loader:finished-loading:photo-list",$.proxy(this.onLoaded,this))},p.prototype.addElements=function(){this.addDrilldown(),this.categories=new r.default('form.fcx-photo-search-form input[name="categories"]',{$parent:this.$container,name:"categories",event:"",onEvent:$.proxy(this.onFormChange,this)}),this.section=new r.default('form.fcx-photo-search-form input[name="section"]',{$parent:this.$container,name:"section",event:"",onEvent:$.proxy(this.onFormChange,this)})},p.prototype.addDrilldown=function(){this.drilldown=new a.default(this.$container.find($(".fcx-drilldown__container"))),this.drilldown.execute(),this.drilldown.addCallback("item-selected",$.proxy(this.onItemSelected,this))},p.prototype.resetDrilldown=function(){this.drilldown.hide(),this.drilldown.fillWithMainSections()},p.prototype.setDrilldown=function(t,e){var i=arguments.length<=0||void 0===t?"":t,o=arguments.length<=1||void 0===e?"":e;this.drilldown.$container.attr("data-category-id",i),this.drilldown.$container.attr("data-section-id",o),this.drilldown.initFilling()},p.prototype.onOpen=function(t){t.preventDefault(),this.drilldown.toggle()},p.prototype.onReset=function(t){t.stopPropagation(),this.resetDrilldown(),this.setButtonValue(),this.setCategoryAndSection(),this.onFormChange()},p.prototype.onItemSelected=function(t,e){this.setButtonValue(e),this.setCategoryAndSection(t.channel_id,this.setSectionValue(t.section_id)),this.onFormChange()},p.prototype.setCategoryAndSection=function(t,e){var i=arguments.length<=0||void 0===t?"":t,o=arguments.length<=1||void 0===e?"":e;this.categories.setValue(i),this.section.setValue(o)},p.prototype.setSectionValue=function(t){return 0<=$.inArray(parseInt(t,10),[0,2])?"":t},p.prototype.setButtonValue=function(t){var e=arguments.length<=0||void 0===t?"":t,i=this.$container.find(".fcx-btn-drilldown-content-default").text();0<e.length?(i=e,this.showCloseIcon()):this.hideCloseIcon(),this.$container.find(".fcx-btn-drilldown-content").text(i)},p.prototype.showCloseIcon=function(){this.$container.find(".fcx-btn-drilldown-close").removeClass("hidden")},p.prototype.hideCloseIcon=function(){this.$container.find(".fcx-btn-drilldown-close").addClass("hidden")},p.prototype.onFormChange=function(){this.persistUrl(),$(document).trigger("fcx:pagination:reset"),this.onChange()},p.prototype.persistUrl=function(){var t=new l.default(this.$container,"form.fcx-photo-search-form");this.urlPersister.persist({name:"form",value:t.get()})},p.prototype.onSearch=function(t,e){var i=new c.default(e.url),o=i.getParamValueFromUrl("categories"),n=i.getParamValueFromUrl("section");this.setCategoryAndSection(o,n),this.setDrilldown(o,n),this.persistUrl()},p.prototype.onLoaded=function(){this.setButtonValue(this.$container.find("#search-result").data("section-tag"))},p);function p(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),n.apply(this,arguments)}i.default=d,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoSearchSection=d,e.exports=i.default},{"../../FormSerializer.js":34,"../../InputTypes/Text":44,"../../PhotoList/PhotoSearch":103,"../../UrlHandler.js":151,"./PhotoSearchDrilldown":115}],119:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.timeout=null,this.bindEvent(),this.term=this.getCurrentTerm()},n.prototype.bindEvent=function(){$(document).on("fcx:keyboard:input-text-focus-term",$.proxy(this.onUpdateTerm,this)),$(document).on("fcx:keyboard:input-text-focus-term:enter",$.proxy(this.cancelUpdate,this)),this.$container.on("click","#tag-cloud-result .fcx-tag",$.proxy(this.onTagClick,this))},n.prototype.getCurrentTerm=function(){var i="";return $.each(this.photoSearchForm.elements,$.proxy(function(t,e){if("term"===e.options.name)return i=e,!1},this)),i},n.prototype.onUpdateTerm=function(){clearTimeout(this.timeout),this.timeout=window.setTimeout($.proxy(function(){this.update()},this),500)},n.prototype.cancelUpdate=function(){clearTimeout(this.timeout)},n.prototype.update=function(){if(!(this.term.length<=0||this.term.getValue().toString().length<=0)){var t=this.$container.find("#tag-cloud-result");this.photoSearchForm.persistUrl(),this.templateLoader.setOptions({template:t.attr("data-url")+this.urlPersister.getSearch(),name:"photo-tags",type:"GET",target:t}),this.templateLoader.load()}},n.prototype.onTagClick=function(t){t.preventDefault(),this.term.length<=0||(this.term.setValue($(t.currentTarget).text()),this.photoSearchForm.onFormChange())},n);function n(t,e,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.templateLoader=e,this.photoSearchForm=i,this.urlPersister=o}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PhotoSearchTags=o,e.exports=i.default},{}],120:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){$(document).on("fcx-search-criteria-changed",$.proxy(this.setLink,this))},n.prototype.setLink=function(t,e){if(void 0===e)return!1;var i=this.$container.find("#fcx-search-users"),o=i.data("base-url");i.prop("href",o+"/"+e.value)},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.UserSearchLink=o,e.exports=i.default},{}],121:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n=o(t("../../BrowserNavigation.js")),s=o(t("../../DatePicker.js")),a=o(t("../../PaginationPicker.js")),r=o(t("../../Advertisement.js")),l=(c.prototype.execute=function(){this.init(),this.bindEvents(),this.enablePagination()},c.prototype.init=function(){this.$form=this.$container.find("form.search-form"),this.xhrPool=[],this.browserNavigation=new n.default({isPathAbsolute:!1}),this.searchInputTimeout=!1,this.datePicker=new s.default($("#fcx-datepicker")),this.datePicker.initFromMarkup(),this.toggleClassWhenFilterSet(),history.replaceState({},"",this.getUrl()),this.paginationPicker=new a.default(this.$container,this),this.paginationPicker.init(),this.initializeTypeahead(".fcx-typeahead"),"object"==typeof this.fc.advertisement?this.advertisement=this.fc.advertisement:"function"==typeof this.fc.Advertisement&&(this.advertisement=new r.default)},c.prototype.getClassName=function(){return"UserSearch"},c.prototype.bindEvents=function(){this.$form.on("submit",$.proxy(this.onFormChange,this)),this.$form.on("change",'select[name="categories"], select[name="sort"]',$.proxy(this.onFormChange,this)),this.$form.on("change",'input[name="gender[]"], input[name="activities[]"], input[name="memberships[]"]',$.proxy(this.onFormChange,this)),$(document).on("fcx-datepicker-changed",$.proxy(this.onFormChange,this)),this.$form.on("click","#fcx-filter-clear",$.proxy(this.resetFilter,this)),this.$form.on("keyup",'input[type="search"]',$.proxy(this.triggerUpdateSearchTerm,this)),this.$container.on("click",".fcx-pagination .fcx-paginiation-button",$.proxy(this.onPagination,this)),$(document).on("fcx:pagination:paginate",$.proxy(this.onPaginationSelect,this)),$(document).on("fcx:browser-navigation:popstate",$.proxy(this.performOldSearch,this)),$(document).on("typeahead:select",$.proxy(this.onFormChange,this))},c.prototype.initializeTypeahead=function(o){$(o).typeahead({hint:!0,highlight:!0,minLength:3},{async:!0,source:function(t,e,i){return $.ajax({url:$(o).data("link"),type:"GET",data:{term:t},dataType:"json",success:function(t){return t=t.concat([!1,!1,!1,!1,!1,!1]).slice(0,6),i(t)}})},templates:{suggestion:$.proxy(function(t){return this.formatSuggestion(t)},this)}})},c.prototype.formatSuggestion=function(t){return!1===t?'<div class="hidden"></div>':"<div>"+t+"</div>"},c.prototype.triggerUpdateSearchTerm=function(t){13!==t.keyCode?(clearTimeout(this.searchInputTimeout),this.searchInputTimeout=window.setTimeout($.proxy(function(){this.switchSearchLink()},this),500)):clearTimeout(this.searchInputTimeout)},c.prototype.switchSearchLink=function(){var t=$("#fcx-search-photos"),e=encodeURIComponent(this.$form.find("input[name=term]").val()),i=t.data("base-url");t.prop("href",i+"/"+e)},c.prototype.onFormChange=function(t){t.preventDefault(),$(".tt-menu").removeClass("tt-open").hide(),$("#fcx-search-input").blur().focus().blur(),this.setPage(1),this.performNewSearch()},c.prototype.triggerAnalyticsPageView=function(){ga("set","page",location.pathname+location.search),ga("send","pageview")},c.prototype.performNewSearch=function(){this.executePreSearchTasks(),this.search(location.pathname+"?"+this.$form.serialize()).done($.proxy(function(t){this.executePostSearchTasks(t),this.browserNavigation.addUrl(this.getUrl())},this)),"object"==typeof this.advertisement&&this.advertisement.reloadAds("profile"),this.triggerAnalyticsPageView()},c.prototype.performOldSearch=function(t,e){this.executePreSearchTasks(),this.search(e.url).done($.proxy(function(t){this.executePostSearchTasks(t),this.syncFormFields()},this))},c.prototype.executePreSearchTasks=function(){$("body,html").animate({scrollTop:0},750)},c.prototype.executePostSearchTasks=function(t){$("#search-result").replaceWith(t),this.enablePagination(),this.toggleClassWhenFilterSet(),this.switchSearchLink(),0<$(".selectpicker").length&&$(".selectpicker").selectpicker("refresh")},c.prototype.search=function(t){for(var e;0<this.xhrPool.length;)this.xhrPool.pop().abort();return e=$.ajax(t),this.xhrPool.push(e),e},c.prototype.syncFormFields=function(){var t=$("#search-result").data("criteria");this.resetFormFields(),this.setInputField("term",t.term),this.setSelectField("sort",t.sort),this.setSelectField("categories",t.categories),this.setCheckboxField("gender",t.gender),this.setCheckboxField("activities",t.activities),this.setCheckboxField("memberships",t.memberships),this.setInputField("city",t.city),this.datePicker.setDates(t.date),this.toggleClassWhenFilterSet(),$("#filter").collapse(this.isFilterSet()?"show":"hide"),this.switchSearchLink()},c.prototype.resetFilter=function(){this.$form.find('input[name="gender[]"], input[name="activities[]"], input[name="memberships[]"]').prop("checked",!1),this.$form.find('input[name="city"]').val(""),this.datePicker.clear(),this.performNewSearch()},c.prototype.toggleClassWhenFilterSet=function(){$("#fcx-filter-clear").toggleClass("hidden",!this.isFilterSet()),$(".fcx-btn-filter").toggleClass("fcx-search-filter-set",this.isFilterSet())},c.prototype.isFilterSet=function(){var t;return t=this.$form.find('input[name="gender[]"], input[name="activities[]"], input[name="memberships[]"]').is(":checked"),t=t||this.datePicker.isSet(),t=t||0<this.$form.find('input[name="city"]').val().length,t},c.prototype.resetFormFields=function(){this.$form.find('input[name="term"]').val(""),this.$form.find('input[name="city"]').val(""),this.$form.find('select[name="sort"], select[name="categories[]"]').selectpicker("deselectAll"),this.$form.find('input[name="gender[]"], input[name="activities[]"], input[name="memberships[]"]').prop("checked",!1)},c.prototype.setInputField=function(t,e){$('input[name="'+t+'"]').val(e.join(" "))},c.prototype.setSelectField=function(t,e){$('select[name="'+t+'"]').selectpicker("val",e)},c.prototype.setCheckboxField=function(i,t){$(t).each(function(t,e){$('input[name="'+i+'[]"][value="'+e+'"]').prop("checked",!0)})},c.prototype.setPage=function(t){this.$form.find('input[name="page"]').val(t)},c.prototype.onPagination=function(t){var e;e=new RegExp("[\\?&]page=([^&#]*)").exec($(t.currentTarget).attr("href")),this.performPagination(e,t)},c.prototype.onPaginationSelect=function(t,e){var i=["",e.page];this.performPagination(i,e.event)},c.prototype.performPagination=function(t,e){e.preventDefault(),$(e.target).parents("li").hasClass("disabled")||(this.disablePagination(),this.setPage(null===t?1:parseInt(t[1],10)),this.performNewSearch())},c.prototype.enablePagination=function(){$(".fcx-pagination .pagination li").removeClass("disabled")},c.prototype.disablePagination=function(){$(".fcx-pagination .pagination li").addClass("disabled")},c.prototype.getUrl=function(){var t={},e=this.$form.attr("action"),i=$("#search-result"),o=i.data("criteria"),n=i.data("page");return 0<o.term.length&&(e+="/"+o.term.join(" ")),o.categories&&(t.categories=o.categories),0<o.activities.length&&(t.activities=o.activities.join(",")),0<o.gender.length&&(t.gender=o.gender.join(",")),0<o.memberships.length&&(t.memberships=o.memberships.join(",")),0<o.city.length&&(t.city=o.city.join(" ")),t=this.datePicker.addUrlParamToArray(t),o.sort&&"relevance"!==o.sort&&(t.sort=o.sort),1<parseInt(n,10)&&(t.page=n),$.isEmptyObject(t)||(e+="?"+decodeURIComponent($.param(t))),e},c);function c(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.$container=t,this.fc=e}i.default=l,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.UserSearch=l,e.exports=i.default},{"../../Advertisement.js":2,"../../BrowserNavigation.js":6,"../../DatePicker.js":16,"../../PaginationPicker.js":58}],122:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n,s=o(t("../PhotoList/PhotoSearch")),a=o(t("../InputTypes/Select")),r=o(t("../FormSerializer.js")),l=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,n=s.default),c.prototype.init=function(){n.prototype.init.call(this),this.persistUrl()},c.prototype.addElements=function(){this.sort=new a.default('form.fcx-section-form select[name="sort[]"]',{$parent:this.$container,name:"sort",event:"change",onEvent:$.proxy(this.onFormChange,this)})},c.prototype.onFormChange=function(){this.persistUrl(),$(document).trigger("fcx:pagination:reset"),this.onChange()},c.prototype.persistUrl=function(){var t=new r.default(this.$container,"form.fcx-section-form");this.urlPersister.persist({name:"form",value:t.get()})},c);function c(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),n.apply(this,arguments)}i.default=l,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.SectionPhotosForm=l,e.exports=i.default},{"../FormSerializer.js":34,"../InputTypes/Select":43,"../PhotoList/PhotoSearch":103}],123:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.initProperties=function(){this.$sections=this.$container.find(".fcx-sections"),this.maxSections=parseInt(this.$container.data("max-sections"),10)},n.prototype.init=function(){var t=["fcx:section-provider:ready","fcx:section-tag-builder:ready","fcx:drilldown:ready"].map(function(e){return $.Deferred(function(t){$(document).one(e,function(){t.resolve()})}).promise()});$.when.apply($,t).done($.proxy(this.setup,this))},n.prototype.bindEvents=function(){this.$sections.on("click",'.fcx-combi-section-tag [data-role="remove"]',$.proxy(this.onRemoveSection,this)),this.$container.on("click",".fcx-btn-drilldown:not(.disabled)",$.proxy(this.onClickBtnDrilldown,this)),this.$container.on("fcx:drilldown:item-selected",$.proxy(this.onDrilldownItemSelected,this))},n.prototype.setup=function(){this.setSections(JSON.parse(this.$container.attr("data-sections"))),this.initialSectionIds=this.getSectionsIds(),this.lastSectionIds=this.initialSectionIds,this.classWatcher(),this.bindEvents(),this.$container.trigger("fcx:section-picker:ready")},n.prototype.onClickBtnDrilldown=function(t){t.preventDefault(),this.drilldown&&this.drilldown.toggle(),$(t.currentTarget).blur()},n.prototype.onDrilldownItemSelected=function(t,e){0===this.$sections.children('[data-id="'+e.id+'"]').length&&(this.getSections().slice(this.maxSections-1).tooltip("destroy").remove(),this.addSectionTag(e))},n.prototype.onRemoveSection=function(t){t.preventDefault(),t.stopPropagation(),this.removeSection($(t.currentTarget))},n.prototype.removeSection=function(t){t.parents(".fcx-combi-section-tag").remove(),this.$sections.find(".tooltip").remove()},n.prototype.addSectionTag=function(t){var e=this.sectionTagBuilder.getLinkedCombiSectionTag(t,this.$container.data("relpath-to-root"));this.$sections.append(e)},n.prototype.setSections=function(t){this.$sections.html("");var e=t,i=Array.isArray(e),o=0;for(e=i?e:e[Symbol.iterator]();;){var n;if(i){if(o>=e.length)break;n=e[o++]}else{if((o=e.next()).done)break;n=o.value}var s=n,a=this.sectionProvider.getBySectionIdAndCategoryId(s.sectionId,s.categoryId);null!==a&&this.addSectionTag(a)}},n.prototype.getSections=function(){return this.$sections.find(".fcx-combi-section-tag")},n.prototype.getSectionsIds=function(){var o=[];return this.getSections().each($.proxy(function(t,e){var i=this.sectionProvider.getById($(e).attr("data-id"));null!==i&&o.push(i.id)},this)),o.sort(),o.join(",")},n.prototype.getCategorySections=function(){var o=[];return this.getSections().each($.proxy(function(t,e){var i=this.sectionProvider.getCategorySectionById($(e).attr("data-id"));null!==i&&o.push(i)},this)),o},n.prototype.resetInitialSectionIds=function(){var t=this.getSectionsIds();this.initialSectionIds=t,this.lastSectionIds=t},n.prototype.classWatcher=function(){window.setInterval($.proxy(function(){var t=this.getSectionsIds();this.lastSectionIds!==t&&(this.lastSectionIds=t,this.$container.trigger("fcx:section-picker:sections-changed",{initalSectionsChanged:this.initialSectionIds!==t}));var e=this.getSections().filter('[data-is-nude="1"]').length,i=this.getSections().filter('[data-is-nude="0"]').length;this.drilldown.$container.toggleClass("fcx-drilldown__container--nude",0<e&&0===i).toggleClass("fcx-drilldown__container--non-nude",0<i&&0===e)},this),100)},n);function n(t,e,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.sectionProvider=e,this.sectionTagBuilder=i,this.drilldown=o,this.initProperties()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.SectionPicker=o,e.exports=i.default},{}],124:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.sections={},this.$promise=$.Deferred($.proxy(function(t){this.getSections().done($.proxy(this.setup,this,t)).fail($.proxy(function(t){this.getSections().done($.proxy(this.setup,this,t))},this,t))},this)).promise()},n.prototype.getById=function(t){return this.isset(t)?this.sections[t]:null},n.prototype.getBySectionIdAndCategoryId=function(t,e){var i=null;return 2===parseInt(t,10)||""===t?i="c"+e:2!==parseInt(t,10)&&""!==t&&(i="s"+t),this.getById(i)},n.prototype.getCategorySectionById=function(t){var e=this.getById(t);return null!==e?{categoryId:e.channel_id,sectionId:e.section_id}:null},n.prototype.getPromise=function(){return this.$promise},n.prototype.getSections=function(){var t=$("html").attr("lang");1===$("[data-sections-locale]").length&&(t=$("[data-sections-locale]").attr("data-sections-locale"));var e="/categories-sections/"+t;return location.pathname.match(/^\/app_dev\.php\//)&&(e="/app_dev.php"+e),$.ajax({url:e,dataType:"json"})},n.prototype.setup=function(t,e){this.setupMainSections(e),this.setupSections(e),e=null,t.resolve(this.sections),$(document).trigger("fcx:section-provider:ready",{sectionProvider:this})},n.prototype.setupMainSections=function(t){for(var e in t.categories)if(t.categories.hasOwnProperty(e)){var i="c"+t.categories[e];this.sections[i]={id:i,section_id:2,channel_id:parseInt(t.categories[e],10),parent_id:"root",shortname:e,uploadable:1,hidden:-1<$.inArray(i,["c4","c57","c103","c402","c502"])?1:0,nude:-1<$.inArray(i,["c8","c51","c104","c406","c506"])?1:0}}},n.prototype.setupSections=function(t){var e=t.sections,i=Array.isArray(e),o=0;for(e=i?e:e[Symbol.iterator]();;){var n;if(i){if(o>=e.length)break;n=e[o++]}else{if((o=e.next()).done)break;n=o.value}var s=n,a="s"+s[0],r={id:a,section_id:s[0],channel_id:s[1],parent_id:0===s[2]?"c"+s[1]:"s"+s[2],shortname:s[3],uploadable:s[4],hidden:s[5],nude:this.isset("c"+s[1])?this.sections["c"+s[1]].nude:0};this.sections[a]=r}},n.prototype.isset=function(t){return void 0!==this.sections[t]},n);function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),void 0===FOTOCOMMUNITY.sectionProvider&&(this.init(),FOTOCOMMUNITY.sectionProvider=this),FOTOCOMMUNITY.sectionProvider}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.SectionProvider=o,e.exports=i.default},{}],125:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){this.$container.on("click","#view-toggle",$.proxy(this.onToggleView,this)),this.$container.on("click","#view-close",$.proxy(this.onCloseSectionlist,this)),this.$container.on("click",".js-unsubscribe-section",$.proxy(this.onSubscriptionRemoved,this)),window.DocumentEvent.on("fcx:template-loader:finished-loading:subscribe-section",this.onSubscribeSection,this),window.DocumentEvent.on("fcx:template-loader:finished-loading:unsubscribe-section",this.onAllSubscriptionsRemoved,this)},n.prototype.onSubscriptionRemoved=function(t){var e=$(t.currentTarget).closest(".js-section-subscriptions .js-subscribed-section").data("section-id");this.$container.find("div, li").filter('[data-section-id="'+e+'"]').remove()},n.prototype.onAllSubscriptionsRemoved=function(){0===$(".js-subscribed-section").length&&location.reload()},n.prototype.onSubscribeSection=function(){$(".js-apply").removeClass("hidden")},n.prototype.onCloseSectionlist=function(t){this.onToggleView();var e=$(".fcx-photos-container").data("href");$(document).trigger("fcx:photo-search:search",{url:e})},n.prototype.onToggleView=function(){$("#sections-thumbnail-view").toggleClass("hidden"),$("#sections-list-view").toggleClass("hidden"),$(".fcx-photos-container").toggleClass("hidden")},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.SectionSubscriptionManager=o,e.exports=i.default},{}],126:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n=o(t("../SectionProvider/SectionProvider")),s=o(t("../Sluggifier")),a=(r.prototype.init=function(){this.sections={},this.$promise=$.Deferred($.proxy(function(t){(new n.default).getPromise().done($.proxy(this.setup,this,t))},this)).promise()},r.prototype.setup=function(t,e){this.sections=$.extend(!0,{},e),t.resolve(this.sections),$(document).trigger("fcx:section-tag-builder:ready")},r.prototype.getPromise=function(){return this.$promise},r.prototype.getCombiSectionTag=function(t,e){var i=arguments.length<=1||void 0===e?{}:e;i=$.extend({},{removable:!0,disabled:!1,tag:"span",placement:"bottom"},i);var o=t.shortname.trim(),n=$("<"+i.tag+" />");if(n.attr("title","").attr("data-is-mainsection","0").attr("data-toggle","tooltip").attr("data-placement",i.placement).attr("data-id",t.id).attr("data-is-nude",t.nude).attr("data-title",this.getSectionBreadcrumb(t)).addClass("fcx-combi-section-tag"),i.disabled&&n.addClass("fcx-combi-section-tag--disabled"),"root"===t.parent_id)n.text(o),n.attr("data-is-mainsection","1");else{var s=this.getById("c"+t.channel_id);if(null!==s){var a=$("<strong/>");a.text(o),n.text(s.shortname+": ").append(a)}}if(i.removable){var r=$("<span />");r.attr("data-role","remove"),n.append(r)}return n.tooltip(),n},r.prototype.getLinkedCombiSectionTag=function(t,e){var i=this.getCombiSectionTag(t,{tag:"a",placement:"top"}),o=s.default.sluggify(t.shortname);return"root"!==t.parent_id&&this.isset("c"+t.channel_id)&&(o=s.default.sluggify(this.sections["c"+t.channel_id].shortname)+"/"+o+"/"+t.section_id),i.attr("href",e+o),i},r.prototype.getSectionBreadcrumb=function(t){for(var e=[];null!==t&&"root"!==t.id;)e.push(t.shortname),t=this.getById(t.parent_id);return e.reverse().join(" / ")},r.prototype.getById=function(t){return this.isset(t)?this.sections[t]:null},r.prototype.isset=function(t){return void 0!==this.sections[t]},r);function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.init()}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.SectionTagBuilder=a,e.exports=i.default},{"../SectionProvider/SectionProvider":124,"../Sluggifier":137}],127:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("./Settings"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.init=function(){this.initProperties(),this.bindEvents(),this.formHelper.init([{field:this.$email},{field:this.$password}]),this.formHelper.bindChangeEvents()},l.prototype.initProperties=function(){n.prototype.initProperties.call(this),this.$form=$(".js-form-email-form"),this.$email=this.$form.find(".js-form-email-login-input"),this.$password=this.$form.find(".js-form-email-pass-input"),this.$submit=this.$form.find(".js-submit"),this.$emailConfirm=this.$form.find(".js-confirm-email")},l.prototype.bindEvents=function(){this.$submit.on("click",$.proxy(this.onSubmit,this)),this.$emailConfirm.on("click",$.proxy(this.onResendValidationEmail,this))},l.prototype.onDone=function(){n.prototype.onDone.call(this),this.$password.val(""),this.$form.find(".notice").removeClass("notice--visible"),this.$form.find(".js-submit-success").addClass("notice--visible")},l.prototype.onResendValidationEmail=function(t){t.preventDefault();var e=this.$emailConfirm.attr("data-confirmation-url");void 0!==e&&$.post(e),this.$form.find(".notice").removeClass("notice--visible"),this.$form.find(".js-resend-success").addClass("notice--visible")},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.EmailChangeForm=r,e.exports=i.default},{"./Settings":132}],128:[function(t,e,i){"use strict";i.__esModule=!0;var o,n=t("../ModalFormResetter"),s=(o=n)&&o.__esModule?o:{default:o},a=(r.prototype.init=function(){this.modalResetter=new s.default(this.$modal),this.bindEvents()},r.prototype.bindEvents=function(){this.$submit.on("click",$.proxy(this.onSubmit,this)),$(document).on("fcx:template-loader:finished-loading:persist-modal-"+this.modalName,$.proxy(this.onDone,this)),$(document).on("fcx:template-loader:failed-loading:persist-modal-"+this.modalName,$.proxy(this.onFail,this))},r.prototype.onSubmit=function(t){t.preventDefault(),this.templateLoader.setOptions({template:this.$form.attr("action"),name:"persist-modal-"+this.modalName,type:"POST",load:null,params:this.$form.serialize()}),this.templateLoader.load()},r.prototype.onDone=function(t,e){this.$replaceContainer.html(e.data),this.modalResetter.onModalUpdate(),this.$modal.modal("hide")},r.prototype.onFail=function(){this.$modal.modal("hide")},r);function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.$container=$('[data-modal-form="'+t+'"]'),this.modalName=t,this.templateLoader=e,this.$modal=$(this.$container.find('[data-toggle="modal"]').data("target")),this.$form=this.$modal.find("form"),this.$submit=this.$modal.find('button[type="submit"]'),this.$replaceContainer=this.$container.find(".js-modal-form-content")}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.ModalFormHandler=a,e.exports=i.default},{"../ModalFormResetter":55}],129:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("./SettingsForm"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.init=function(){this.setFormName("notification"),n.prototype.init.call(this)},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.NotificationsForm=r,e.exports=i.default},{"./SettingsForm":133}],130:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("./Settings"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.init=function(){this.initProperties(),this.bindEvents(),this.formHelper.init([{field:this.$password},{field:this.$passwordNew},{field:this.$passwordNewConfirm}]),this.formHelper.bindChangeEvents()},l.prototype.initProperties=function(){n.prototype.initProperties.call(this),this.$form=$(".js-form-password-form"),this.$password=this.$form.find(".js-form-oldPassword-input"),this.$passwordNew=this.$form.find(".js-form-newPassword-first-input"),this.$passwordNewConfirm=this.$form.find(".js-form-newPassword-second-input"),this.$submit=this.$form.find(".js-submit")},l.prototype.bindEvents=function(){this.$submit.on("click",$.proxy(this.onSubmit,this))},l.prototype.onDone=function(){n.prototype.onDone.call(this),this.$password.val(""),this.$passwordNew.val(""),this.$passwordNewConfirm.val(""),this.$form.find(".notice").addClass("notice--visible")},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PasswordChangeForm=r,e.exports=i.default},{"./Settings":132}],131:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("./SettingsForm"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.init=function(){this.setFormName("privacy"),n.prototype.init.call(this)},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.PrivacyForm=r,e.exports=i.default},{"./SettingsForm":133}],132:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.initProperties=function(){this.$form=null},n.prototype.onSubmit=function(t){return t.preventDefault(),this.validate(),this.isValid()&&this.submit(),!1},n.prototype.validate=function(){this.formHelper.validate()},n.prototype.isValid=function(){return this.formHelper.isValid()},n.prototype.submit=function(){var t={type:"POST",dataType:"json",data:this.$form.serialize()};$.ajax(this.$form.attr("action"),t).done($.proxy(this.onDone,this)).fail($.proxy(this.onFail,this))},n.prototype.onFail=function(t){var e=t.responseJSON;this.formHelper.setServerErrors(e)},n.prototype.onDone=function(){},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.formHelper=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Settings=o,e.exports=i.default},{}],133:[function(t,e,i){"use strict";i.__esModule=!0;var o,n=t("../InputTypes/Checkbox"),s=(o=n)&&o.__esModule?o:{default:o},a=(r.prototype.init=function(){this.bindEvents(),this.addElements()},r.prototype.setFormName=function(t){this.formName=t},r.prototype.bindEvents=function(){$(document).on("fcx:template-loader:failed-loading:persist-"+this.formName+"-settings",$.proxy(this.onFail,this)),$(document).on("fcx:template-loader:finished-loading:persist-"+this.formName+"-settings",$.proxy(this.onDone,this))},r.prototype.onDone=function(){this.$container.find(".notice").removeClass("notice--visible")},r.prototype.onFail=function(){this.$container.find(".notice").addClass("notice--visible")},r.prototype.addElements=function(){this.checkbox=new s.default(".js-"+this.formName+"-settings-checkbox input",{$parent:this.$container,name:this.formName+"-settings",event:"change",onEvent:$.proxy(this.onChange,this)})},r.prototype.onChange=function(){this.templateLoader.setOptions({template:this.$container.find("form").attr("action"),name:"persist-"+this.formName+"-settings",type:"POST",load:null,params:this.$container.find("form").serialize()}),this.templateLoader.load()},r);function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.$container=t,this.templateLoader=e}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.SettingsForm=a,e.exports=i.default},{"../InputTypes/Checkbox":41}],134:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){return this.initProperties(),this.bindEvents(),this.autocomplete.init(),this.autocomplete.loadApi(),this},n.prototype.initProperties=function(){this.preventSubmit=!1,this.$form=$('form[name="event_calendar"]'),this.$city=$("#event_calendar_city"),this.$submit=$("#event_calendar_submit"),this.$datenew=$("#event_calendar_datenew"),this.$workshop=$("#event_calendar_workshop"),this.$datesec=$("#event_calendar_datesec"),this.$datesec1=$("#event_calendar_datesec1"),this.$datesec2=$("#event_calendar_datesec2"),this.$latitude=$("#event_calendar_lat"),this.$longitude=$("#event_calendar_lon")},n.prototype.initAutocomplete=function(){this.autocomplete.addFields({city:{field:this.$city,types:["(cities)"],country:[],callback:$.proxy(this.onCityChanged,this)}})},n.prototype.bindEvents=function(){this.$datenew.on("change",$.proxy(this.toggleSibling,this)),this.$datesec1.on("change",$.proxy(this.toggleSibling,this)),this.$city.on("change",$.proxy(this.fetchGeolocation,this)),this.$submit.on("click",$.proxy(this.fetchGeolocation,this)),this.$datesec1.on("change",$.proxy(this.updateDatesec,this)),this.$datesec2.on("change",$.proxy(this.updateDatesec,this)),this.$datenew.on("change",$.proxy(this.submit,this)),this.$workshop.on("change",$.proxy(this.submit,this)),this.$form.on("submit",$.proxy(this.onSubmit,this)),$(document).on("fcx:template-loader:finished-loading:persist-event-calendar-settings",$.proxy(this.onDone,this)),$(document).on("fcx:template-loader:failed-loading:persist-event-calendar-settings",$.proxy(this.onFail,this)),$(document).on("fcx-geocoding:done",$.proxy(this.onGeocodingDone,this)),$(document).on("fcx-geocoding:fail",$.proxy(this.completeSubmit,this)),$(document).on("fcx:google-api:maps-loaded",$.proxy(this.initAutocomplete,this))},n.prototype.fetchGeolocation=function(){var t=this;!1===this.preventSubmit&&(this.preventSubmit=setTimeout(function(){return $.proxy(t.completeSubmit,t)},3e3),this.geocoding.fetchLocation(this.$city.val()))},n.prototype.onGeocodingDone=function(t,e){this.$latitude.val(e.lat),this.$longitude.val(e.lng),this.completeSubmit()},n.prototype.completeSubmit=function(){clearTimeout(this.preventSubmit),this.preventSubmit=!1,this.submit()},n.prototype.onSubmit=function(t){t.preventDefault(),this.submit()},n.prototype.submit=function(){!1===this.preventSubmit&&(this.templateLoader.setOptions({template:this.$form.attr("action"),name:"persist-event-calendar-settings",type:"POST",load:null,params:this.$form.serialize()}),this.templateLoader.load())},n.prototype.onDone=function(){this.$container.find(".notice").removeClass("notice--visible")},n.prototype.onFail=function(){this.$container.find(".notice").addClass("notice--visible")},n.prototype.onCityChanged=function(t){!1!==t&&this.processCityAddressComponent(t)},n.prototype.processCityAddressComponent=function(t){var e=this.getFormatedAddress(t);!1!==(e=e||this.createFormatedAddress(t))&&(this.$city.val(e),this.$latitude.val(t.location?t.location.latitude:0),this.$longitude.val(t.location?t.location.longitude:0))},n.prototype.getFormatedAddress=function(t){var e=!1;return!1!==t.formattedAddress&&(e=t.formattedAddress),e},n.prototype.createFormatedAddress=function(t){var e=!1;return!1===t.city&&!1===t.country||(e=((t.city||"")+", "+(t.country||"")).replace(/(^, |, $)/g,"")),e},n.prototype.toggleSibling=function(t){var e=$(t.currentTarget);e.parents(".fcx-toggle-button").attr("data-checked",e.prop("checked")?1:0)},n.prototype.updateDatesec=function(){var t="n";this.$datesec1.prop("checked")?t=this.$datesec2.prop("checked")?"y":"i":this.$datesec2.prop("checked",!1),this.$datesec.val(t),this.submit()},n);function n(t,e,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.templateLoader=e,this.autocomplete=i,this.geocoding=o}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.SettingsFunctions=o,e.exports=i.default},{}],135:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("./Settings"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.init=function(){return this.initProperties(),this.bindEvents(),this.autocomplete.init(),this.autocomplete.loadApi(),this},l.prototype.initProperties=function(){n.prototype.initProperties.call(this),this.$form=$("#profile__form"),this.$zip=$("#profile__form-zip"),this.$city=$("#profile__form-city"),this.$country=$("#profile__form-country"),this.$username=$("#profile__form-username"),this.usernamePreSubmit=this.$username.val()},l.prototype.initAutocomplete=function(){var t=this.getCountryByCcode(parseInt(this.$country.val(),10));this.autocomplete.addFields({zip:{field:this.$zip,types:["(regions)"],country:t,callback:$.proxy(this.onZipChanged,this)},city:{field:this.$city,types:["(cities)"],country:t,callback:$.proxy(this.onCityChanged,this)}})},l.prototype.bindEvents=function(){$("#profile__form-submit").on("click",$.proxy(this.onSubmit,this)),$(document).on("fcx-profile-form:country:field-blur",$.proxy(this.onCountryChange,this)),$(document).on("fcx:google-api:maps-loaded",$.proxy(this.initAutocomplete,this))},l.prototype.onZipChanged=function(t){!1!==t&&(this.processCountryAddressComponent(t),this.processCityAddressComponent(t),this.processZipAddressComponent(t))},l.prototype.onCityChanged=function(t){!1!==t&&(this.processCountryAddressComponent(t),this.processCityAddressComponent(t))},l.prototype.onCountryChange=function(){var t=this.getCountryByCcode(parseInt(this.$country.val(),10));this.autocomplete.updateCountryRestriction(t)},l.prototype.processZipAddressComponent=function(t){if(!1!==t.zip){var e=parseInt(this.$zip.attr("data-formhelper-index"),10);this.$zip.val(t.zip),this.formHelper.validateField(this.formHelper.fields[e]),""===this.$city.val()?this.$city.focus():this.$zip.blur()}},l.prototype.processCityAddressComponent=function(t){if(!1!==t.city){var e=parseInt(this.$zip.attr("data-formhelper-index"),10);this.$city.val(t.city),this.formHelper.validateField(this.formHelper.fields[e]),this.$city.blur()}},l.prototype.processCountryAddressComponent=function(i){var o=this;!1!==i.country&&(this.$country.find("option").each(function(t,e){$(e).text()===i.country&&o.$country.selectpicker("val",$(e).attr("value"))}),this.onCountryChange())},l.prototype.onDone=function(t){n.prototype.onDone.call(this),this.$form.find(".notice--success").addClass("notice--visible")},l.prototype.getCountryByCcode=function(t){var e={1:"de",193:"gb",71:"fr",101:"it",186:"es"};return e.hasOwnProperty(t)?e[t]:[]},l);function l(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.call(this,t),this.autocomplete=e}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.SettingsProfile=r,e.exports=i.default},{"./Settings":132}],136:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.$activeRadioButton=this.$radioButtons.filter(":checked"),this.bindEvents()},n.prototype.bindEvents=function(){this.$radioButtons.on("change",$.proxy(this.onSubmit,this))},n.prototype.onSubmit=function(t){t.preventDefault();var e=$(t.currentTarget),i={method:"POST",data:this.$form.serialize()};$.ajax(this.$form.attr("action"),i).done($.proxy(this.onDone,this,e)).fail($.proxy(this.onFail,this,e))},n.prototype.onDone=function(t){this.$activeRadioButton=t},n.prototype.onFail=function(t){var e=this;this.$activeRadioButton.prop("checked","checked"),t.parent(".js-radio-item").addClass("error"),window.setTimeout(function(){return e.$radioButtons.parent(".js-radio-item").removeClass("error")},3e3)},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$form=t,this.$radioButtons=this.$form.find('input[type="radio"]'),this.init()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.VotingSettingsForm=o,e.exports=i.default},{}],137:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.sluggify=function(t,e){var i=arguments.length<=1||void 0===e||e;if(""===t)return!1;var o={" ":"-","ä":"ae","Ä":"Ae","ö":"oe","Ö":"Oe","ü":"ue","Ü":"Ue","ß":"ss","é":"e","á":"a","ó":"o","ú":"u","à":"a","è":"e","ò":"o","ù":"u","ô":"o","ë":"e","í":"i"};for(var n in o)o.hasOwnProperty(n)&&(t=t.replace(n,o[n]));return t=(t=(t=t.replace(/[^A-Za-z0-9\-]/gi,"")).replace(/\-{2,}/g,"-")).replace(/(^-|-$)/g,""),i&&(t=t.toLowerCase()),t},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Sluggifier=o,e.exports=i.default},{}],138:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.execute=function(){this.init()},n.prototype.init=function(){this.enableAffix()},n.prototype.enableAffix=function(){var t=this.$element.offset().top;this.$element.affix({offset:{top:t}})},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$element=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.StickyElement=o,e.exports=i.default},{}],139:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.execute=function(){this.init()},n.prototype.init=function(){this.DELTA=5,this.GAP=60,this.lastScrollPosition=0,this.lazyVisible(),this.bindEvents()},n.prototype.bindEvents=function(){$(window).on("scroll",$.proxy(this.lazyVisible,this))},n.prototype.lazyVisible=function(){var t=$(window).scrollTop();Math.abs(this.lastScrollPosition-t)<=this.DELTA||(t>this.lastScrollPosition?this.$listener.offset().top-this.GAP-t<0&&!this.$element.hasClass("active")&&this.$element.addClass("active"):0<this.$listener.offset().top-this.GAP-t&&this.$element.hasClass("active")&&this.$element.removeClass("active"),this.lastScrollPosition=t)},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$element=t,this.$listener=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.StickyHeader=o,e.exports=i.default},{}],140:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvent()},n.prototype.bindEvent=function(){this.$container.on("click",".btn",$.proxy(this.toggleSubscription,this))},n.prototype.toggleSubscription=function(t){var e="1"===$(t.currentTarget).parent(".js-subscribe-section-wrapper").attr("data-has-subscription");this.templateLoader.setOptions({template:$(t.currentTarget).data("href"),name:e?"unsubscribe-section":"subscribe-section",load:null}),this.templateLoader.load(),this.toggleSubscriptionFlag($(t.currentTarget).parent(".js-subscribe-section-wrapper"))},n.prototype.toggleSubscriptionFlag=function(t){void 0===t&&(t=$(".js-subscribe-section-wrapper"));var e="1"===$(t).attr("data-has-subscription");$(t).attr("data-has-subscription",e?0:1)},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.templateLoader=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.SubscribeSection=o,e.exports=i.default},{}],141:[function(t,e,i){"use strict";i.__esModule=!0;var o,n=t("./BrowserNavigation"),s=(o=n)&&o.__esModule?o:{default:o},a=(r.prototype.init=function(){var t=this.$items.filter(".active").data("link");this.browserNavigation=new s.default({isPathAbsolute:!1,initialParameterBag:{id:t}}),this.bindEvents()},r.prototype.bindEvents=function(){this.$items.on("click",$.proxy(this.onSelectTab,this)),$(document).on("fcx:browser-navigation:popstate",$.proxy(this.onPopState,this))},r.prototype.onSelectTab=function(t){t.preventDefault();var e=$(t.currentTarget).find("a").attr("href"),i=$(t.currentTarget).data("link");this.selectTab(i),this.updateUrl(e,i)},r.prototype.selectTab=function(t){this.$items.removeClass("active"),this.$items.filter('[data-link="'+t+'"]').addClass("active"),this.$container.find(".js-tabs-content__item").removeClass("js-tabs-content__item--active"),this.$container.find(".js-tabs-content__item#"+t).addClass("js-tabs-content__item--active")},r.prototype.updateUrl=function(t,e){this.browserNavigation.addUrl(t,{id:e})},r.prototype.onPopState=function(t,e){this.$items.find("a").blur(),e.hasOwnProperty("parameters")&&e.parameters.hasOwnProperty("id")&&this.selectTab(e.parameters.id)},r);function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.$container=t,this.$items=this.$container.find(".js-tabs").find(".js-tabs__item")}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.TabbedNavigation=a,e.exports=i.default},{"./BrowserNavigation":6}],142:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.setOptions=function(t){var e=arguments.length<=0||void 0===t?{}:t;this.defaultOptions={template:"",name:"",type:"GET",target:"",load:"replace",retry:!0,hasRawParams:!1,params:{}},this.options=$.extend(!0,{},this.defaultOptions,e)},n.prototype.load=function(){this.requestParams=this.getParams(),this.bindEvent();var t=this.getTemplate();t.done(this.setTemplate),t.fail(this.onFailure)},n.prototype.bindEvent=function(){$(document).off("fcx:template-loader:stop-loading:"+this.options.name),$(document).on("fcx:template-loader:stop-loading:"+this.options.name,$.proxy(this.stopLoad,this))},n.prototype.getParams=function(){var i=[];return this.options.hasRawParams?this.options.params:"string"===$.type(this.options.params)?this.options.params:$.isEmptyObject(this.options.params)?"":($.each(this.options.params,$.proxy(function(t,e){i.push({name:t,value:e})},this)),$.param(i))},n.prototype.stopLoad=function(){for(;0<this.xhrPool.length;)this.xhrPool.pop().abort()},n.prototype.getTemplate=function(){$(document).trigger("fcx:template-loader:start-loading:"+this.options.name,{options:this.options}),this.stopLoad();var t=$.ajax(this.options.template,{type:this.options.type,context:this,data:this.requestParams});return this.xhrPool.push(t),t},n.prototype.setTemplate=function(t){"append"===this.options.load?this.options.target.append(t):"prepend"===this.options.load?this.options.target.prepend(t):"replace"===this.options.load&&this.options.target.html(t),this.retries=0,$(document).trigger("fcx:template-loader:finished-loading:"+this.options.name,{options:this.options,data:t})},n.prototype.onFailure=function(t){0!==t.status&&(this.retries++,this.options.retry&&this.retries<=3?this.load():(this.retries=0,$(document).trigger("fcx:template-loader:failed-loading:"+this.options.name,{options:this.options,data:t.responseText,status:t.status})))},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.xhrPool=[],this.retries=0}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.TemplateLoader=o,e.exports=i.default},{}],143:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvents()},n.prototype.bindEvents=function(){this.$container.find(".fcx-toggle-button input").on("change",$.proxy(this.onChange,this)),this.$container.find(".fcx-toggle-button__label").on("click",$.proxy(this.onClickLabel,this))},n.prototype.onChange=function(t){var e=$(t.currentTarget).parents(".fcx-toggle-button"),i={method:"POST",data:{keyname:e.attr("data-keyname")}};$.ajax(e.attr("data-path"),i).fail($.proxy(this.onFail,this,e))},n.prototype.onFail=function(t){var e=t.find("input").prop("checked");t.addClass("error").find("input").prop("checked",!e),window.setTimeout(function(){return t.removeClass("error")},3e3)},n.prototype.onClickLabel=function(t){$(t.currentTarget).parents(".fcx-toggle-button").find("input").trigger("click")},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.ToggleButtons=o,e.exports=i.default},{}],144:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.execute=function(){this.init(),this.bindEvents()},n.prototype.init=function(){this.$clicksTargets=$("[data-ua-click]"),this.$submitTargets=$("[data-ua-submit]"),this.$selectpickers=$(".selectpicker[data-ua-select]"),this.$inputKeyup=$("[data-ua-input-keyup]"),this.filter=$("[data-ua-filter-select]")},n.prototype.bindEvents=function(){$(document).off("ajaxSuccess",$.proxy(this.onAjaxSucces,this)),$(document).on("ajaxSuccess",$.proxy(this.onAjaxSucces,this)),this.$clicksTargets.off("click",$.proxy(this.onClickEvent,this)),this.$clicksTargets.on("click",$.proxy(this.onClickEvent,this)),this.$submitTargets.off("submit",$.proxy(this.onSubmitEvent,this)),this.$submitTargets.on("submit",$.proxy(this.onSubmitEvent,this)),$(document).off("custom-submit",$.proxy(this.onCustomEvent,this)),$(document).on("custom-submit",$.proxy(this.onCustomEvent,this)),this.$inputKeyup.off("keyup",$.proxy(this.onInputKeyup,this)),this.$inputKeyup.on("keyup",$.proxy(this.onInputKeyup,this)),this.$selectpickers.off("changed.bs.select",$.proxy(this.onSelectPickerEvent,this)),this.$selectpickers.on("changed.bs.select",$.proxy(this.onSelectPickerEvent,this)),this.filter.off("change",$.proxy(this.onFilterEvent,this)),this.filter.on("change",$.proxy(this.onFilterEvent,this)),$(document).off("fcx:google-analytics:pageview"),$(document).on("fcx:google-analytics:pageview",$.proxy(this.triggerPageView,this))},n.prototype.onAjaxSucces=function(){this.execute()},n.prototype.onClickEvent=function(t){var e=$(t.currentTarget).data("ua-click");this.triggerEvent(e)},n.prototype.onSubmitEvent=function(t){var e=$(t.currentTarget).data("ua-submit");this.triggerEvent(e)},n.prototype.onInputKeyup=function(t){if(13===t.keyCode){var e=$(t.currentTarget).data("ua-input-keyup");this.triggerEvent(e)}},n.prototype.onCustomEvent=function(t,e){this.triggerEvent(e)},n.prototype.onSelectPickerEvent=function(t,e){var i=$(t.currentTarget).data("ua-select")+t.currentTarget[e].label;this.triggerEvent(i)},n.prototype.onFilterEvent=function(t){if(t.currentTarget.checked){var e=$(t.currentTarget).data("ua-filter-select");this.triggerEvent(e)}},n.prototype.triggerEvent=function(t){var e=this.createFieldsObject(t);$.isFunction(ga)&&ga("send",e)},n.prototype.triggerPageView=function(){ga("set","page",location.pathname+location.search),ga("send","pageview")},n.prototype.createFieldsObject=function(t){var e=t.split(";"),i={hitType:"event"};return i.eventCategory=e[0],i.eventAction=e[1],i.eventLabel=e[2],i.eventValue=e[3],i},n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.UniversalAnalyticsEvents=o,e.exports=i.default},{}],145:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n=o(t("../ImageDropper.js")),s=o(t("./UploadCompleter.js")),a=o(t("./UploadSettings.js")),r=o(t("./UsageBar.js")),l=o(t("./VisibilityBar.js")),c=o(t("../BrowserExitAlert.js")),d=(p.prototype.execute=function(){$("#fcx-uploader").length&&(this.init(),this.bindEvents(),this.$container.focus())},p.prototype.init=function(){this.enableTimeout=!1,this.xhrPool=[],this.$uploader=$("#fcx-uploader"),this.$selectImagesBtn=$("#fcx-select-images-btn"),this.$deleteImagesBtn=$("#fcx-delete-images-btn"),this.$uploadToFolderSelect=$('select[name="folder"]',"#fileupload"),this.$uploadToFolderBtn=$("+ .bootstrap-select > button",this.$uploadToFolderSelect),this.$finishUploadBtn=$("#fcx-finish-upload"),this.$finishUploadBtnBottom=$("#fcx-finish-upload-bottom"),this.$uploadToFolderBtn.removeAttr("title").tooltip({placement:"top",container:"body"}),this.limitOverall="unlimited"!==this.$uploader.data("limit_overall")&&parseInt(this.$uploader.data("limit_overall"),10),this.remainingOverall="unlimited"!==this.$uploader.data("remaining_overall")&&parseInt(this.$uploader.data("remaining_overall"),10),this.maxFiles=!1===this.remainingOverall?this.MAX_FILES_PER_UPLOAD:Math.min(this.MAX_FILES_PER_UPLOAD,this.remainingOverall),this.remainingCurrentWeek=parseInt(this.$uploader.data("remaining_current_week"),10),this.browserExitAlert=new c.default($.proxy(this.isPageDirty,this),$("#fcx-settings").data("exit-alert-message")),this.uploadSettings=new a.default($("#fcx-settings")),this.imageDropper=new n.default($("#fileupload"),{maxNumberOfFiles:this.maxFiles}),this.uploadCompleter=new s.default(this.imageDropper),this.usageBar=new r.default($("#fcx-options-bar .progress"),this.imageDropper,this.remainingCurrentWeek),this.usageBar.setupInfoTooltip(),this.visibilityBar=new l.default($(".fcx-visibility-bar"),this.imageDropper),this.uploadSettings.injectImageDropper(this.imageDropper,this.uploadCompleter)},p.prototype.bindEvents=function(){this.$deleteImagesBtn.on("click",$.proxy(this.deleteImages,this)),this.$finishUploadBtn.on("click",$.proxy(this.finishUpload,this)),this.$finishUploadBtnBottom.on("click",$.proxy(this.finishUpload,this)),$(document).on("fcx:image-dropper:demand-update-settings",$.proxy(this.updateSettings,this)),$(document).on("fcx:image-dropper:number-of-images-changed",$.proxy(this.onNumberOfImagesChanged,this)),$(document).on("fcx:image-dropper:file-added",$.proxy(this.enable,this)),$(document).on("fcx:image-completer:usagebar-require-update",$.proxy(this.updateQuotaLimits,this)),$(document).on("fcx:image-dropper:upload-image-process-failed",$.proxy(this.onUploadImageProcessFailed,this)),$(document).on("fcx:photo-upload-completer:demand-show-errors",$.proxy(function(){this.browserExitAlert.allow()},this))},p.prototype.isPageDirty=function(){return this.$uploader.hasClass("active")},p.prototype.updateQuotaLimits=function(t,e){this.limitOverall="unlimited"!==e.quota.limit_overall&&parseInt(e.quota.limit_overall,10),this.remainingOverall="unlimited"!==e.quota.remaining_overall&&parseInt(e.quota.remaining_overall,10),this.maxFiles=!1===this.remainingOverall?this.MAX_FILES_PER_UPLOAD:Math.min(this.MAX_FILES_PER_UPLOAD,this.remainingOverall),this.remainingCurrentWeek=parseInt(e.quota.remaining_current_week,10),this.$uploader.attr("data-remaining_current_week",this.remainingCurrentWeek),this.usageBar.setQuota(e),this.updateSettings()},p.prototype.onUploadImageProcessFailed=function(){this.uploadCompleter.showModal("fail-upload")},p.prototype.onNumberOfImagesChanged=function(){var t=this.imageDropper.numberOfImages,e=this.imageDropper.numberOfAllImages;this.updateSettings(),0===e?this.disable():this.enable(),0<t&&(this.$finishUploadBtn.removeAttr("disabled"),this.$finishUploadBtnBottom.removeAttr("disabled"))},p.prototype.enable=function(){this.$uploader.hasClass("inactive")&&(window.clearTimeout(this.enableTimeout),this.enableTimeout=window.setTimeout($.proxy(function(){$("#fcx-upload").toggleClass("active",!0),this.$uploader.removeClass("inactive").addClass("active").find("#fcx-settings, #fcx-options-bar").fadeIn(300,$.proxy(function(){this.$uploader.addClass("active")},this))},this),200))},p.prototype.disable=function(){window.clearTimeout(this.enableTimeout),this.$uploader.hasClass("inactive")||(this.$finishUploadBtn.attr("disabled","disabled"),this.$finishUploadBtnBottom.attr("disabled","disabled"),this.$uploader.removeClass("active").addClass("inactive").find("#fcx-settings, #fcx-options-bar").hide(),$("#fcx-upload").toggleClass("active",!1))},p.prototype.finishUpload=function(){this.browserExitAlert.disallow(),this.uploadSettings.resetErrors(),this.uploadCompleter.execute()},p.prototype.deleteImages=function(t){if(t.preventDefault(),!$(t.target).hasClass("disabled")){var e=1===this.imageDropper.numberOfSelectedImages?$(t.target).attr("data-confirm-text-single"):$(t.target).attr("data-confirm-text");this.imageDropper.showConfirmModal(e).done($.proxy(function(){this.imageDropper.getSelectedImages().remove(),this.onNumberOfImagesChanged(),0===this.imageDropper.numberOfImages&&(this.imageDropper.selectedFirstImage=!0)},this))}},p.prototype.updateSettings=function(){var t=this.imageDropper.getSelectedImages(),e=this.imageDropper.getImages();this.uploadSettings.showErrors(),0===t.length?(this.uploadSettings.disableContent(),this.uploadSettings.clearContent(),this.$deleteImagesBtn.addClass("disabled").attr("data-original-title",this.$deleteImagesBtn.attr("data-title-disabled")),this.$uploadToFolderBtn.addClass("disabled").removeAttr("title").attr("data-original-title",this.$uploadToFolderSelect.attr("data-title-disabled"))):(this.uploadSettings.enableContent(),this.uploadSettings.updateContent(),this.$deleteImagesBtn.removeClass("disabled").attr("data-original-title",this.$deleteImagesBtn.attr("data-title-enabled")),this.$uploadToFolderBtn.removeClass("disabled").removeAttr("title").attr("data-original-title",this.$uploadToFolderSelect.attr("data-title-enabled"))),0===e.length?this.$selectImagesBtn.addClass("disabled").find("i").removeClass("fa-check-square").addClass("fa-square"):this.$selectImagesBtn.removeClass("disabled").find("i").toggleClass("fa-check-square",t.length===e.length).toggleClass("fa-square",t.length!==e.length),0<t.length&&this.uploadSettings.refreshDrilldown(this.imageDropper.getSelectedImagesCumulatedMetaData("sections",""))},p);function p(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),this.MAX_FILES_PER_UPLOAD=10,this.$container=t}i.default=d,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.Upload=d,e.exports=i.default},{"../BrowserExitAlert.js":5,"../ImageDropper.js":39,"./UploadCompleter.js":146,"./UploadSettings.js":148,"./UsageBar.js":149,"./VisibilityBar.js":150}],146:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n=o(t("../SectionProvider/SectionProvider")),s=o(t("../UniversalAnalyticsEvents.js")),a=(r.prototype.init=function(){this.maxTagsPerPhoto=$("#fcx-uploader").data("max-tags-per-photo"),this.savemetaPath=$("#fcx-uploader").data("savemeta-path"),this.validatemetaPath=$("#fcx-uploader").data("validatemeta-path"),this.validateLimitsPath=$("#fcx-uploader").data("validate-limits-path"),this.quotaLimitsPath=$("#fcx-uploader").data("quotalimits-path"),this.errorMessages=$("#fcx-settings").data("error-messages"),this.redirectPath=$("#fcx-uploader").data("redirect-path"),this.postUploadPath=$("#fcx-uploader").data("post-upload-path"),this.modal=$("#fcx-modal-upload"),this.maxSections=parseInt($("#fcx-uploader").attr("data-max-sections"),10),this.universalAnalyticsEvents=new s.default,this.showPublishModalPath=$("#fcx-uploader").data("show-publish-modal-path"),this.deactivatePublishModalPath=$("#fcx-uploader").data("deactivate-publish-modal-path")},r.prototype.execute=function(){this.step1()},r.prototype.step1=function(){this.validateImages($.proxy(this.validateImageClientSide,this)).done($.proxy(function(){0===this.imageDropper.numberOfMetaErrorImages?this.step2a():this.someImagesFailed("fail-meta")},this))},r.prototype.step2a=function(){this.showModal("init");var t={sumUpload:this.imageDropper.numberOfImages,sumPublish:this.imageDropper.numberOfPublishedImages};this.sendMeta(this.validateLimitsPath,t).done($.proxy(this.step2b,this)).fail($.proxy(this.someImagesFailed,this,"fail-common"))},r.prototype.step2b=function(){this.showModal("init"),this.validateImages($.proxy(this.validateImageServerSide,this)).done($.proxy(function(){0===this.imageDropper.numberOfMetaErrorImages?this.step2c():this.someImagesFailed("fail-meta")},this))},r.prototype.step2c=function(){this.imageDropper.numberOfAllImages!==this.imageDropper.numberOfNotPublishedImages?this.step3():this.sendMeta(this.showPublishModalPath,{}).done($.proxy(function(t){if(t.showPublishModal)return this.showModal("publish"),void this.onShowPublishModal();this.step3()},this)).fail($.proxy(function(){this.step3()},this))},r.prototype.step3=function(){this.showModal("init"),this.validateImages($.proxy(this.validateImageServerSideAndSaveData,this),this.onDoneStep3,this.onFailStep3).done($.proxy(function(){0===this.imageDropper.numberOfUploadErrorImages?this.allImagesDone():this.someImagesFailed("fail-common"),this.postUpload()},this))},r.prototype.allImagesDone=function(){this.triggerUniversalAnaylticsEvent(),this.showModal("done"),window.setTimeout($.proxy(function(){location.href=this.redirectPath},this),3e3)},r.prototype.triggerUniversalAnaylticsEvent=function(){var t=!1;1<this.imageDropper.numberOfUploadSuccessImages?t="Aktivitäten;Multiupload;;"+this.imageDropper.numberOfUploadSuccessImages:1===this.imageDropper.numberOfUploadSuccessImages&&(t="Aktivitäten;Upload;"+this.imageDropper.getUploadSuccessImages().eq(0).attr("data-tags").replace(/^(\[(.+?)\])?.*/,"$2")+";1"),!1!==t&&this.universalAnalyticsEvents.triggerEvent(t)},r.prototype.someImagesFailed=function(t){$("#fcx-upload").focus(),this.imageDropper.unselectImages(),this.imageDropper.getMetaErrorImages().eq(0).addClass("selected"),this.updateQuotaLimits(),this.showModal(t),$(document).trigger("fcx:image-dropper:number-of-images-changed"),$(document).trigger("fcx:photo-upload-completer:demand-show-errors")},r.prototype.validateImages=function(n,s,a){var r=[];return this.imageDropper.getImages().removeClass("dz-meta-error").attr("data-has-meta-error","0").attr("data-meta-errors",""),this.imageDropper.getImages().each($.proxy(function(t,e){var i=$(e).attr("data-uuid");if(36===i.length){var o=n(this.getImageMetaData($(e)),i);o.done($.proxy(this.onDone,this,i)).fail($.proxy(this.onFail,this,i)),"function"==typeof s&&o.done($.proxy(s,this,i)),"function"==typeof a&&o.fail($.proxy(a,this,i)),r.push(o)}},this)),$.when.apply($,$.map(r,function(t){return t.then(null,function(){return $.Deferred().resolve()})}))},r.prototype.onDone=function(t){var e=this.imageDropper.getImageByUuid(t);!1!==e&&e.attr("data-touched","1").attr("data-has-meta-error","0").attr("data-meta-errors","").removeClass("dz-meta-error")},r.prototype.onFail=function(t,e){var i=this.imageDropper.getImageByUuid(t);!1!==i&&(i.attr("data-touched","1").attr("data-has-meta-error","1").attr("data-meta-errors","").addClass("dz-meta-error"),void 0!==e.responseJSON&&i.attr("data-meta-errors",JSON.stringify(e.responseJSON)))},r.prototype.onDoneStep3=function(t){var e=this.imageDropper.getImageByUuid(t);!1!==e&&e.removeClass("dz-success").addClass("dz-done dz-upload-success")},r.prototype.onFailStep3=function(t){var e=this.imageDropper.getImageByUuid(t);!1!==e&&e.removeClass("dz-success dz-meta-error").addClass("dz-done dz-upload-error")},r.prototype.validateImageClientSide=function(t,e){var i={};t.title=t.title.trim(),t.description=t.description.trim();var o=$('#fcx-settings-form input[name="title"]').val().trim(),n=$('#fcx-settings-form textarea[name="description"]').val().trim(),s=this.imageDropper.getImageByUuid(e);return""===t.title&&(i.title=this.errorMessages.uploadTitleNotBlank),""!==t.title&&t.title.length<2&&(i.title=this.errorMessages.uploadLengthMin),""!==t.title&&100<t.title.length&&(i.title=this.errorMessages.uploadLengthMax),""!==o&&o!==this.stripTags(o)&&(i.title=this.errorMessages.uploadHtmlOrJs),""!==n&&n!==this.stripTags(n)&&(i.description=this.errorMessages.uploadHtmlOrJs),this.imageDropper.getNumberOfTags(s)>this.maxTagsPerPhoto&&(i.tags=this.errorMessages.tooManyTags),t.mime_type&&"image/jpeg"!==t.mime_type&&(i.mimeType=!0,s.remove(),$(document).trigger("fcx:image-dropper:number-of-images-changed"),0<this.imageDropper.numberOfAllImages&&this.imageDropper.selectFirstImage()),$.Deferred(function(t){$.isEmptyObject(i)?t.resolve({uuid:e},"ok",{status:200}):t.reject({status:400,responseJSON:{errors:i}})}).promise()},r.prototype.validateImageServerSide=function(t,e){return this.sendMeta(this.validatemetaPath+"/"+e,t)},r.prototype.validateImageServerSideAndSaveData=function(t,e){return this.sendMeta(this.savemetaPath+"/"+e,t)},r.prototype.sendMeta=function(t,e){return $.ajax(t,{type:"post",dataType:"json",processData:!1,contentType:"application/json",data:JSON.stringify(e)})},r.prototype.postUpload=function(){$.ajax({url:this.postUploadPath,method:"POST"})},r.prototype.getImageMetaData=function(t){var e={};""!==t.attr("data-exif")&&(e=$.parseJSON(t.attr("data-exif")));var i=[];""!==t.attr("data-tags")&&(i=t.attr("data-tags").match(/([^\[\]]+)/g));var o=[];if("1"===t.attr("data-publish")){var n=t.attr("data-sections").split(",").slice(0,3),s=Array.isArray(n),a=0;for(n=s?n:n[Symbol.iterator]();;){var r;if(s){if(a>=n.length)break;r=n[a++]}else{if((a=n.next()).done)break;r=a.value}var l=r,c=this.sectionProvider.getCategorySectionById(l);null!==c&&o.push(c)}}return{title:t.find(".title").html(),description:t.attr("data-description"),sections:o,folder_id:t.attr("data-folder"),exif:e,width:parseInt(t.attr("data-width"),10),height:parseInt(t.attr("data-height"),10),tags:i,mime_type:t.attr("data-mime-type"),options:{publish:t.attr("data-publish"),license:t.attr("data-license"),exif_allowed:t.attr("data-exif-allowed"),location_allowed:t.attr("data-location-allowed"),feedback_welcome:t.attr("data-feedback-welcome")}}},r.prototype.updateQuotaLimits=function(){this.getQuotaLimits().done($.proxy(this.updateUsageBar,this))},r.prototype.getQuotaLimits=function(){return $.ajax(this.quotaLimitsPath,{type:"get",dataType:"json"})},r.prototype.updateUsageBar=function(t){$(document).trigger("fcx:image-completer:usagebar-require-update",t)},r.prototype.showModal=function(t){this.modal.find(".modal-content").html(this.modal.find(".fcx-modal-body-template-"+t).html()),this.modal.hasClass("in")||this.modal.modal("show")},r.prototype.stripTags=function(t){return t.replace(/[<>]/gi,"")},r.prototype.onShowPublishModal=function(){var t=$("#fcx-modal-upload");t.off("click",".js-discard-publish-photo"),t.one("click",".js-discard-publish-photo",$.proxy(this.onDiscardPublishPhoto,this)),t.off("click",".js-publish-photo"),t.one("click",".js-publish-photo",$.proxy(this.onPublishPhoto,this))},r.prototype.onDiscardPublishPhoto=function(){this.processPublishModal().done($.proxy(function(){this.modal.modal("hide"),$(document).trigger("fcx:photo-upload-completer:demand-show-errors")},this))},r.prototype.onPublishPhoto=function(){this.processPublishModal().done($.proxy(function(){this.step3()},this))},r.prototype.processPublishModal=function(){var e=$("#fcx-modal-upload").find(".modal-dialog .js-hide-publish-modal");return $.Deferred($.proxy(function(t){if(e.is(":checked"))return this.sendMeta(this.deactivatePublishModalPath,{}).done(function(){t.resolve({status:200})});t.resolve({status:200})},this)).promise()},r);function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.imageDropper=t,this.sectionProvider=new n.default,this.sectionProvider.getPromise().done($.proxy(this.init,this))}i.default=a,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.UploadCompleter=a,e.exports=i.default},{"../SectionProvider/SectionProvider":124,"../UniversalAnalyticsEvents.js":144}],147:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("../Drilldown/Drilldown"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.isSectionHiddenInDrilldown=function(t){return-1<$.inArray(t.id,["s20302","s20303","s20304","s20305","s20306","s20307","s20428"])},l.prototype.showInDrilldown=function(t){var e=t.id;if(this.isSectionHiddenInDrilldown(t))return!1;if(this.isVisible(e)&&this.isUploadable(e))return!0;if(!this.hasChildren(e))return!1;var i=this.parentsIndex[e],o=Array.isArray(i),n=0;for(i=o?i:i[Symbol.iterator]();;){var s;if(o){if(n>=i.length)break;s=i[n++]}else{if((n=i.next()).done)break;s=n.value}var a=s;if(this.isset(a)&&this.showInDrilldown(this.sections[a]))return!0}return!1},l.prototype.showInTypeahead=function(t,e){return!this.isSectionHiddenInDrilldown(e)&&0===e.hidden&&1===e.uploadable&&new RegExp("((?:^|\\s)+)("+t+")","i").test(e.shortname)},l.prototype.initFilling=function(){this.fill(!0)},l.prototype.itemSelected=function(t,e){if(!(this.$container.hasClass("fcx-drilldown__container--nude")&&0===e.nude||this.$container.hasClass("fcx-drilldown__container--non-nude")&&1===e.nude||1!==e.uploadable||0!==e.hidden)){var i=this.callbacks["item-selected"];"function"==typeof i&&i(e),this.$container.attr("data-section-id",e.section_id),this.$container.attr("data-category-id",e.channel_id),this.hide()}},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.UploadDrilldown=r,e.exports=i.default},{"../Drilldown/Drilldown":21}],148:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n=o(t("./UploadDrilldown")),s=o(t("../SectionProvider/SectionProvider")),a=o(t("../SectionTagBuilder/SectionTagBuilder")),r=o(t("../AlertBox")),l=(c.prototype.init=function(){this.xhrState=!1,this.$settings=$("#fcx-settings"),this.$settingsOverlay=$(".fcx-settings-overlay"),this.$settingsForm=$("#fcx-settings-form"),this.$tagsInput=$("#fcx-tags-input"),this.$tagsSuggestionTitle=$("#fcx-tags-suggestions-title"),this.$tagsSuggestionContainer=$("#fcx-tags-suggestions"),this.$tagsLatestTitle=$("#fcx-tags-latest-title"),this.$tagsLatestContainer=$("#fcx-tags-latest"),this.$callapsableDivs=$("div.collapse"),this.tagsSuggestionsUrl=this.$tagsSuggestionContainer.data("url"),this.tagSanitizeUrl=this.$tagsInput.data("sanitize-url"),this.preventReloadingTags=!1,this.latestUserTags=[],this.maxSections=parseInt($("#fcx-uploader").attr("data-max-sections"),10),this.updateImages=!1,this.loadLatestTags(),this.drilldown=new n.default($(".fcx-drilldown__container")),this.drilldown.execute(),this.nudeAlertBox=new r.default($("#fcx-settings-form .fcx-nude-section-hint"),{expiresInSeconds:15552e3,closeSelector:".alert-close"}),this.sectionsAlertBox=new r.default($("#fcx-settings-form .fcx-main-section-hint"),{expiresInSeconds:15552e3,closeSelector:".alert-close"}),this.sectionProvider=new s.default,this.sectionTagBuilder=new a.default,$.when(this.sectionProvider.getPromise(),this.sectionTagBuilder.getPromise()).done($.proxy(this.setup,this))},c.prototype.injectImageDropper=function(t,e){this.imageDropper=t,this.uploadCompleter=e},c.prototype.bindEvents=function(){$(document).on("click","#fcx-tags-suggestions label.btn",$.proxy(this.moveSuggestionTag,this)),$(document).on("click","#fcx-tags-latest label.btn",$.proxy(this.moveLatestTag,this)),this.$callapsableDivs.on("shown.bs.collapse hidden.bs.collapse",$.proxy(this.toggleAngleIcon,this)),$('select[name="folder"]',this.$settings).on("change",$.proxy(this.onSelectPickerChange,this,"folder")),$('select[name="license"]',this.$settings).on("change",$.proxy(this.onSelectPickerChange,this,"license")),$('select[name="sale"]',this.$settings).on("change",$.proxy(this.onSelectPickerChange,this,"sale")),$('input[name="title"]',this.$settings).on("change",$.proxy(this.onInputKeyup,this,"title")),$('textarea[name="description"]',this.$settings).on("keyup",$.proxy(this.onInputKeyup,this,"description")),$('input[name="exif_allowed"]',this.$settings).on("change",$.proxy(this.onCheckboxChange,this,"exif-allowed")),$('input[name="location_allowed"]',this.$settings).on("change",$.proxy(this.onCheckboxChange,this,"location-allowed")),$('input[name="feedback_welcome"]',this.$settings).on("change",$.proxy(this.onCheckboxChange,this,"feedback-welcome")),$('input[name="partner_license"]',this.$settings).on("change",$.proxy(this.onPartnerLicenseChange,this)),this.$settings.on("click",'.fcx-combi-section-tag [data-role="remove"]',$.proxy(this.onRemoveSection,this)),$(document).on("fcx:upload-settings:data-changed",$.proxy(this.onDataChanged,this)),$(document).on("fcx:image-dropper:upload-queue-complete",$.proxy(this.validate,this)),$(document).on("fcx:upload-completer:step-1-failed",$.proxy(this.onStep1Failed,this)),$(document).on("fcx:image-dropper:selection-changed",$.proxy(this.onStep1Failed,this)),$('input[name="publish"]',this.$settings).on("change",$.proxy(this.onPublishStateChanged,this)),this.$tagsInput.on("beforeItemAdd",$.proxy(this.sanitizeTag,this)),this.$tagsInput.on("itemAdded",$.proxy(this.addTag,this)),this.$tagsInput.on("itemRemoved",$.proxy(this.removeTag,this)),$(document).on("click",".fcx-btn-drilldown:not(.disabled)",$.proxy(this.onClickBtnDrilldown,this))},c.prototype.setup=function(){this.drilldown.addCallback("item-selected",$.proxy(this.onDrilldownItemSelected,this)),this.setInputTagsOptions(),this.classWatcher(),$(document).on("fcx:image-dropper:upload-queue-complete",$.proxy(this.setPredefinedCategorySection,this))},c.prototype.setPredefinedCategorySection=function(){var t=parseInt($("#fcx-uploader").attr("data-section-id"),10);0<t&&(this.updateImages=!0,this.imageDropper.getImages().attr("data-publish",1),this.onDrilldownItemSelected(this.sectionProvider.getBySectionIdAndCategoryId(t,2)))},c.prototype.onRemoveSection=function(t){$(t.currentTarget).parents(".fcx-combi-section-tag").tooltip("destroy").remove(),0===$('.fcx-sections .fcx-combi-section-tag[data-is-nude="1"]').length&&this.nudeAlertBox.hideWithoutCookie(),this.onSectionsChanged()},c.prototype.onSectionsChanged=function(){this.updateSectionsMetaData(),this.loadTagSuggestions(),$(document).trigger("fcx:upload-settings:data-changed")},c.prototype.updateSectionsMetaData=function(){var i=[];if($(".fcx-sections .fcx-combi-section-tag").each($.proxy(function(t,e){i.push($(e).attr("data-id"))},this)),this.updateImages)return this.imageDropper.setImagesMetaData("sections",i.join(",")),void(this.updateImages=!1);this.imageDropper.setSelectedImagesMetaData("sections",i.join(","))},c.prototype.refreshDrilldown=function(t){var e="",i="",o=this.getLastSectionFromCommaSeparatedSectionString(t);null!==o&&(e=o.section_id,i=o.channel_id),this.drilldown.$container.attr("data-section-id",e),this.drilldown.$container.attr("data-category-id",i),this.drilldown.initFilling()},c.prototype.onDrilldownItemSelected=function(t){var e=$(".fcx-sections");0===e.children('[data-id="'+t.id+'"]').length&&(e.find(".fcx-combi-section-tag").slice(this.maxSections-1).tooltip("destroy").remove(),this.addSectionTag(t),this.onSectionsChanged())},c.prototype.addSectionTag=function(t){var e=this.sectionTagBuilder.getCombiSectionTag(t);$(".fcx-sections").append(e)},c.prototype.onClickBtnDrilldown=function(t){t.preventDefault(),this.drilldown.toggle(),$(t.currentTarget).blur()},c.prototype.classWatcher=function(){window.setInterval($.proxy(function(){var t=$('input[name="publish"]').prop("checked"),e=0<$(".fcx-sections .fcx-combi-section-tag").length;t!==e&&$('input[name="publish"]').trigger("click");var i=!1,o=$("#fcx-uploader").data("remaining_overall");0<this.imageDropper.numberOfSelectedImages&&"unlimited"!==o&&(o=parseInt(o,10))<=Math.min(this.imageDropper.numberOfImages,this.MAX_FILES_PER_UPLOAD)&&(i=!0),$(".fcx-limit-overall-exceeded").toggleClass("hidden",!i),$(".fcx-dropzone-options__item--add .fileinput-button").toggleClass("disabled",i);var n=!1,s=parseInt($("#fcx-uploader").attr("data-remaining_current_week"),10);0<this.imageDropper.numberOfSelectedImages&&s<=this.imageDropper.numberOfPublishedImages&&(n=!0),this.setPublishLimitText(this.imageDropper.numberOfPublishedImages,s),$(".fcx-remaining_current_week-exceeded").toggleClass("hidden",!n);var a=$('.fcx-sections .fcx-combi-section-tag[data-is-nude="1"]').length,r=$('.fcx-sections .fcx-combi-section-tag[data-is-nude="0"]').length;$(".fcx-drilldown__container").toggleClass("fcx-drilldown__container--nude",0<a&&0===r).toggleClass("fcx-drilldown__container--non-nude",0<r&&0===a);var l=!1,c=!1;if(e){var d=this.imageDropper.getSelectedImagesCumulatedMetaData("sections",""),p=this.getLastSectionFromCommaSeparatedSectionString(d);null!==p&&(1===p.nude&&(l=!0),"root"===p.parent_id&&(c=!0))}l?this.nudeAlertBox.show():this.nudeAlertBox.hideWithoutCookie(),c?this.sectionsAlertBox.show():this.sectionsAlertBox.hideWithoutCookie();var h=this.imageDropper.numberOfPublishedImages,u=this.imageDropper.numberOfImages-h;$(".fcx-upload-info-public").html(h),$(".fcx-upload-info-private").html(u)},this),200)},c.prototype.getLastSectionFromCommaSeparatedSectionString=function(t){var e=null;if(void 0===t)return e;if(""!==t){var i=t.split(",");0<i.length&&(e=this.sectionProvider.getById(i[i.length-1]))}return e},c.prototype.setPublishLimitText=function(t,e){var i="",o=e-t,n=$(".fcx-remaining_current_week-exceeded");switch(!0){case o<0:var s=$(".fcx-rcw-delete-info"),a=s.data("rcw-delete-info").replace("%delete%",t-e);i=n.data("rcw-over-limit").replace("%publish%",t),s.text(a).removeClass("hidden");break;case 0==o:i=n.data("rcw-single");break;case 1==o:i=n.data("rcw-one");break;default:i=n.data("rcw-multiple").replace("%count%",o)}$(".fcx-rcw-info strong").text(i)},c.prototype.onPublishStateChanged=function(){var t=$('input[name="publish"]'),e=t.is(":checked"),i=t.attr("data-is-checked-"+(e?"1":"0"));t.siblings("span").html(i),this.imageDropper.getSelectedImages().attr("data-publish",e?1:0),this.drilldown.fillWithMainSections()},c.prototype.onDataChanged=function(){this.validate(),this.markSelectedErrorImages(),this.showErrors()},c.prototype.onStep1Failed=function(){this.markSelectedErrorImages(),this.showErrors()},c.prototype.onSelectPickerChange=function(t,e){$(e.currentTarget).siblings(".bootstrap-select").find("button").blur(),this.imageDropper.setSelectedImagesMetaData(t,$(e.currentTarget).find("option:selected").val()),"license"===t&&("7"===$(e.currentTarget).find("option:selected").val()?$('input[name="partner_license"]',this.$settings).prop("checked","checked"):$('input[name="partner_license"]',this.$settings).prop("checked","")),$(document).trigger("fcx:upload-settings:data-changed")},c.prototype.onCheckboxChange=function(t,e){this.imageDropper.setSelectedImagesMetaData(t,$(e.currentTarget).is(":checked")?"1":"0")},c.prototype.onPartnerLicenseChange=function(t){var e="0";$(t.currentTarget).is(":checked")&&(e="7"),$('select[name="license"]',this.$settings).selectpicker("val",e).change()},c.prototype.onInputKeyup=function(t,e){this.imageDropper.setSelectedImagesMetaData(t,$(e.currentTarget).val()),$(document).trigger("fcx:upload-settings:data-changed")},c.prototype.setInputTagsOptions=function(){this.$tagsInput.tagsinput({onTagExists:$.proxy(this.onTagExists,this),tagClass:"btn btn-primary btn-sm fcx-tag"})},c.prototype.onTagExists=function(t){this.preventReloadingTags=!0;var e={item:t};this.addTag(e),this.updateContent()},c.prototype.moveTag=function(t){t.preventDefault();var e=$(t.target),i=e.text().trim();this.$tagsInput.tagsinput("add",i,{preventPost:!0}),e.remove()},c.prototype.moveLatestTag=function(t){this.preventReloadingTags=!0,this.moveTag(t),0===this.$tagsLatestContainer.children().length&&this.toggleTagLatest(!1)},c.prototype.moveSuggestionTag=function(t){var e=this.imageDropper.getSelectedImages(),s=$(t.target).text().trim();e.each($.proxy(function(t,e){var i=$(e).attr("data-suggestions-tags");if(this.isJsonString(i)){var o=JSON.parse(i),n=o.indexOf(s);-1<n&&o.splice(n,1),$(e).attr("data-suggestions-tags",JSON.stringify(o))}},this)),this.preventReloadingTags=!0,this.moveTag(t),0===this.$tagsSuggestionContainer.children().length&&(this.toggleTagSuggestions(!1),this.loadTagSuggestions())},c.prototype.sanitizeTag=function(t){var e=t.item;t.options&&t.options.preventPost||$.ajax(this.tagSanitizeUrl,{type:"POST",data:{tag:e}}).done($.proxy(function(t){this.$tagsInput.tagsinput("remove",e,{preventPost:!0}),""!==t.tag&&this.$tagsInput.tagsinput("add",t.tag,{preventPost:!0})},this))},c.prototype.addTag=function(e){var t=this.imageDropper.getSelectedImages();e.options&&e.options.preventDataUpdate||(t.each(function(){var t="["+e.item+"]";$(this).attr("data-tags").indexOf(t)<0&&$(this).attr("data-tags",$(this).attr("data-tags")+t)}),!1===this.preventReloadingTags&&this.loadTagSuggestions(),this.preventReloadingTags=!1),$(document).trigger("fcx:upload-settings:data-changed")},c.prototype.removeTag=function(t){this.imageDropper.getSelectedImages().each(function(){$(this).attr("data-tags",$(this).attr("data-tags").replace("["+t.item+"]",""))}),$(document).trigger("fcx:upload-settings:data-changed")},c.prototype.loadLatestTags=function(){this.checkXhrState(),this.xhrState=$.ajax(this.tagsSuggestionsUrl,{type:"GET",context:this}).done(function(t){""!==t&&t.success&&(this.latestUserTags=t.tagSuggestions,this.toggleTagLatest(!0),this.displayTags(this.$tagsLatestContainer,t.tagSuggestions))})},c.prototype.loadTagSuggestions=function(){var e=this.imageDropper.getSelectedImages();this.checkXhrState();var o=[];$(".fcx-sections .fcx-combi-section-tag").each($.proxy(function(t,e){var i=this.sectionProvider.getCategorySectionById($(e).attr("data-id"));null!==i&&o.push(i)},this)),this.xhrState=$.ajax(this.tagsSuggestionsUrl+"?"+this.$tagsInput.serialize(),{type:"GET",context:this,data:{sections:JSON.stringify(o)}}).done(function(t){""!==t&&t.success&&(e.attr("data-suggestions-tags",JSON.stringify(t.tagSuggestions)),this.toggleTagSuggestions(!0),this.displayTags(this.$tagsSuggestionContainer,t.tagSuggestions,!0))})},c.prototype.displayTags=function(o,t,e){arguments.length<=2||void 0===e||!e||o.html(""),$(t).each($.proxy(function(t,e){var i=$("<label/>").addClass("btn btn-primary btn-sm fcx-tag").append("<input/>").prop("type","checkbox").prop("checked",!0).text(e);o.append(i)},this))},c.prototype.checkXhrState=function(){this.xhrState&&(this.xhrState.abort(),this.xhrState=null)},c.prototype.toggleTagSuggestions=function(t){this.$tagsSuggestionTitle.toggle(t),this.$tagsSuggestionContainer.toggle(t)},c.prototype.toggleTagLatest=function(t){this.$tagsLatestTitle.toggle(t),this.$tagsLatestContainer.toggle(t)},c.prototype.updateContent=function(){var i={},o=null,n=[];$('input[name="title"]',this.$settings).val(this.imageDropper.getSelectedImagesCumulatedMetaTitle()),$('textarea[name="description"]',this.$settings).val(this.imageDropper.getSelectedImagesCumulatedMetaData("description","")),$('select[name="folder"]',"#fileupload").selectpicker("val",this.imageDropper.getSelectedImagesCumulatedMetaData("folder","")),$('input[name="publish"]',this.$settings).prop("checked","1"===this.imageDropper.getSelectedImagesCumulatedMetaData("publish",0)),$('input[name="partner_license"]',this.$settings).prop("checked","7"===this.imageDropper.getSelectedImagesCumulatedMetaData("license",null)),$('select[name="license"]',this.$settings).selectpicker("val",this.imageDropper.getSelectedImagesCumulatedMetaData("license",null)),$('select[name="sale"]',this.$settings).selectpicker("val",this.imageDropper.getSelectedImagesCumulatedMetaData("sale",null));var t=this.imageDropper.getSelectedImagesCumulatedMetaData("sections","").split(",");$(".fcx-sections").empty();var e=t,s=Array.isArray(e),a=0;for(e=s?e:e[Symbol.iterator]();;){var r;if(s){if(a>=e.length)break;r=e[a++]}else{if((a=e.next()).done)break;r=a.value}var l=r,c=this.sectionProvider.getById(l);null!==c&&this.onDrilldownItemSelected(c)}this.setCheckboxState($('input[name="exif_allowed"]',this.$settings),"exif-allowed"),this.setCheckboxState($('input[name="location_allowed"]',this.$settings),"location-allowed"),this.setCheckboxState($('input[name="feedback_welcome"]',this.$settings),"feedback-welcome"),this.imageDropper.getSelectedImages().each(function(t,e){null!==(o=$(e).attr("data-tags").match(/([^\[\]]+)/g))&&$(o).each(function(t,e){i.hasOwnProperty(e)||(i[e]=0),i[e]+=1})}),this.$tagsInput.tagsinput("removeAll"),$.each(i,$.proxy(function(t,e){this.$tagsInput.tagsinput("add",t,{preventDataUpdate:!0,preventPost:!0}),e!==this.imageDropper.numberOfSelectedImages&&($(".fcx-add-tag-filter .tag",this.$settings).filter(function(){return $(this).text()===t}).addClass("partial"),n.push(t))},this)),this.renderTagsBySelectedImages(n)},c.prototype.setCheckboxState=function(t,e){var i=this.imageDropper.getSelectedImagesCumulatedMetaData(e,"mixed");t.prop("checked","1"===i).prop("indeterminate","mixed"===i)},c.prototype.showErrors=function(){this.resetErrors(),this.imageDropper.getSelectedImages().filter('[data-has-meta-error="1"]').filter('[data-touched="1"]').filter(".dz-meta-error").each($.proxy(function(t,e){var i=$(e).attr("data-meta-errors");if(""!==i){var o=$.parseJSON(i);void 0!==o.errors&&$.each(o.errors,$.proxy(function(t,e){var i=$("#fcx-settings-form .fcx-settings-field").filter('[data-field="'+t+'"]'),o=e.split("~");o.length<2&&o.push(o[0]),1<this.imageDropper.numberOfSelectedImages?i.find(".fcx-settings-errormessage span.fcx-message").text(o[1]):i.find(".fcx-settings-errormessage span.fcx-message").text(o[0]),i.addClass("fcx-settings-error")},this))}},this))},c.prototype.markSelectedErrorImages=function(){this.imageDropper.getSelectedImages().removeClass("dz-meta-error").filter('[data-has-meta-error="1"]').addClass("dz-meta-error")},c.prototype.resetErrors=function(){$("#fcx-settings-form .fcx-settings-field").removeClass("fcx-settings-error")},c.prototype.validate=function(){this.imageDropper.getImages().attr("data-has-meta-error","0").attr("data-meta-errors",""),this.imageDropper.getImages().each($.proxy(function(t,e){var i=$(e).attr("data-uuid"),o=$(e);if(o.attr("data-has-meta-error","0").attr("data-meta-errors",""),36===i.length){var n=this.uploadCompleter.getImageMetaData(o);this.uploadCompleter.validateImageClientSide(n,i).fail($.proxy(function(t){o.attr("data-has-meta-error","1"),void 0!==t.responseJSON&&o.attr("data-meta-errors",JSON.stringify(t.responseJSON))},this))}},this))},c.prototype.clearContent=function(){this.$tagsInput.tagsinput("removeAll"),this.$settingsForm.trigger("reset"),$('input[name="title"]',this.$settings).attr("placeholder","Titel"),$(".btn-group label",this.$settingsForm).removeClass("active"),$(".selectpicker",this.$settingsForm).val(null).selectpicker("refresh")},c.prototype.toggleAngleIcon=function(t){$(t.target).parent().find('a[data-toggle="collapse"] i.icon').toggleClass("fas fa-caret-right fas fa-caret-down")},c.prototype.disableContent=function(){this.resetErrors(),this.$settingsOverlay.removeClass("hidden"),this.$settingsForm.addClass("hidden"),this.toggleTagSuggestions(!1),this.toggleTagLatest(!1)},c.prototype.enableContent=function(){this.showErrors(),this.$settingsForm.removeClass("hidden"),this.$settingsOverlay.addClass("hidden"),this.toggleTagSuggestions(!0),this.toggleTagLatest(!0)},c.prototype.renderTagsBySelectedImages=function(t){var i=arguments.length<=0||void 0===t?[]:t,e=this.imageDropper.getSelectedImages(),o=this.$tagsInput.tagsinput("items"),n=[];if(1===e.length){var s=e.attr("data-suggestions-tags");this.isJsonString(s)?this.displayTags(this.$tagsSuggestionContainer,JSON.parse(s),!0):this.toggleTagSuggestions(!1)}else{var a=[],r=[];e.each($.proxy(function(t,e){var i=$(e).attr("data-suggestions-tags");this.isJsonString(i)&&(i=JSON.parse(i),$(i).each($.proxy(function(t,e){-1===$.inArray(e,a)?a.push(e):-1===$.inArray(e,r)&&r.push(e)},this)))},this)),$(i).each($.proxy(function(t,e){-1===$.inArray(e,r)&&-1===$.inArray(e,this.latestUserTags)&&r.length<=15&&r.push(e)},this)),0<r.length?this.displayTags(this.$tagsSuggestionContainer,r,!0):this.toggleTagSuggestions(!1)}$(this.latestUserTags).each($.proxy(function(t,e){(-1<$.inArray(e,i)||-1===$.inArray(e,o))&&n.push(e)},this)),0<n.length?this.displayTags(this.$tagsLatestContainer,n,!0):this.toggleTagLatest(!1)},c.prototype.isJsonString=function(t){try{JSON.parse(t)}catch(t){return!1}return!0},c);function c(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.$container=t,this.MAX_FILES_PER_UPLOAD=10,this.init(),this.bindEvents()}i.default=l,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.UploadSettings=l,e.exports=i.default},{"../AlertBox":3,"../SectionProvider/SectionProvider":124,"../SectionTagBuilder/SectionTagBuilder":126,"./UploadDrilldown":147}],149:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("../ProgressBar.js"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.init=function(){setInterval($.proxy(this.update,this),100)},l.prototype.setQuota=function(t){var e=t.quota;this.remainingCurrentWeek=e.remaining_current_week,this.setValue("published",e.published_overall),this.setCaption("published",e.published_overall),this.setTooltipViaTemplate("published",{"%period_end_date%":t.period_end_date});var i='<span class="unlimited">&infin;</span>';"unlimited"!==e.remaining_overall&&(i=parseInt(e.remaining_overall,10));var o='<span class="unlimited">&infin;</span>';"unlimited"!==e.percent_overall&&(o=parseInt(e.percent_overall,10)+"%"),this.setCaption("info",o),this.setTooltipViaDataKeyName("info","remaining_overall",i),this.setTooltipViaDataKeyName("info","uploads_overall",e.uploads_overall),this.setTooltipViaDataKeyName("info","published_overall",e.published_overall),this.setTooltipViaDataKeyName("info","unpublished_overall",e.unpublished_overall),this.refresh()},l.prototype.update=function(){var t=this.imageDropper.numberOfImages,e=this.remainingCurrentWeek-this.imageDropper.numberOfPublishedImages;this.items.hasOwnProperty("dropzone")&&(this.setValue("dropzone",t),this.setCaption("dropzone",t),this.setTooltipViaTemplate("dropzone",{"%count%":t})),this.items.hasOwnProperty("published")&&(this.setValue("published",e),this.setCaption("published",e)),this.refresh()},l.prototype.setupInfoTooltip=function(){var e,i=this.$container.find('[data-keyname="info"]'),o=i.position();this.$container.on("mouseenter",'[data-keyname="info"], [data-keyname="info"] + .tooltip',function(t){t.stopPropagation(),clearTimeout(e),0===i.next(".tooltip").length&&(i.tooltip("show"),i.next(".tooltip").css({left:o.left+"px"}))}).on("mouseleave",'[data-keyname="info"], [data-keyname="info"] + .tooltip',function(t){t.stopPropagation(),e=setTimeout(function(){i.tooltip("hide")},100)})},l);function l(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.call(this,t),this.imageDropper=e,this.remainingCurrentWeek=i,this.init()}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.UsageBar=r,e.exports=i.default},{"../ProgressBar.js":108}],150:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n,s=o(t("../ProgressBar.js")),a=o(t("../SectionProvider/SectionProvider")),r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=s.default),l.prototype.init=function(){this.sectionProvider=new a.default,this.sectionProvider.getPromise().done($.proxy(this.setup,this)),this.maxVisibilityValue=(this.VISIBILITY_WEIGHT_CATEGORY+this.VISIBILITY_WEIGHT_SECTION)*this.maxSections+this.VISIBILITY_WEIGHT_TITLE+this.VISIBILITY_WEIGHT_DESC+this.VISIBILITY_WEIGHT_TAGS[this.VISIBILITY_WEIGHT_TAGS.length-1]},l.prototype.bindEvents=function(){$(document).on("fcx:upload-settings:data-changed",$.proxy(this.update,this))},l.prototype.setup=function(){this.update(),setInterval($.proxy(this.update,this),200)},l.prototype.update=function(){var l,t=this.imageDropper.getSelectedImages(),c=0;0<this.imageDropper.numberOfSelectedImages&&(t.each($.proxy(function(t,e){if("1"===$(e).attr("data-publish")){var i=$(e).attr("data-sections").split(","),o=Array.isArray(i),n=0;for(i=o?i:i[Symbol.iterator]();;){var s;if(o){if(n>=i.length)break;s=i[n++]}else{if((n=i.next()).done)break;s=n.value}var a=s,r=this.sectionProvider.getById(a);null!==r&&(c+=this.VISIBILITY_WEIGHT_CATEGORY,"root"!==r.parent_id&&(c+=this.VISIBILITY_WEIGHT_SECTION))}}""!==$(e).find(".title").html()&&(c+=this.VISIBILITY_WEIGHT_TITLE),""!==$(e).attr("data-description")&&(c+=this.VISIBILITY_WEIGHT_DESC),null!==(l=$(e).attr("data-tags").match(/([\w\s]+)/g))&&(l.length<this.VISIBILITY_WEIGHT_TAGS.length?c+=this.VISIBILITY_WEIGHT_TAGS[l.length]:c+=Math.max.apply(null,this.VISIBILITY_WEIGHT_TAGS))},this)),c=(c=(c/=this.imageDropper.numberOfSelectedImages)/this.maxVisibilityValue*100)*this.maxPercent/100,c=Math.max(0,Math.min(100,Math.round(c)))),this.setValue("visibility",c),this.setCaption("visibility",c+"%"),this.refresh()},l.prototype.getById=function(t){return this.isset(t)?this.sections[t]:null},l);function l(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.call(this,t),this.imageDropper=e,this.maxPercent=t.data("max-percent"),this.maxSections=t.data("max-sections"),this.VISIBILITY_WEIGHT_CATEGORY=10,this.VISIBILITY_WEIGHT_SECTION=10,this.VISIBILITY_WEIGHT_TITLE=10,this.VISIBILITY_WEIGHT_DESC=10,this.VISIBILITY_WEIGHT_TAGS=[0,15,30,40,45,50,55,60],this.init(),this.bindEvents()}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.VisibilityBar=r,e.exports=i.default},{"../ProgressBar.js":108,"../SectionProvider/SectionProvider":124}],151:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.params=this.getParamsFromUrl()},n.prototype.getParamsFromUrl=function(){var t={};if(this.url.indexOf("?")<0)return t;for(var e=this.url.substring(this.url.indexOf("?")+1).split("&"),i=0;i<e.length;i++)if(e[i]){var o=e[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t},n.prototype.getParamValueFromUrl=function(i){var o="";return $.each(this.params,function(t,e){t===i&&(o=e)}),o},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.url=t,this.init()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.UrlHandler=o,e.exports=i.default},{}],152:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.url=[]},n.prototype.persist=function(t){var i=arguments.length<=0||void 0===t?{}:t,o=!0;$.each(this.url,$.proxy(function(t,e){e.name===i.name&&(e.value=i.value,o=!1)},this)),(this.url.length<=0||o)&&this.url.push(i)},n.prototype.get=function(){return this.location+this.getSearch()},n.prototype.getSearch=function(){var i="",o="?";return $.each(this.url,$.proxy(function(t,e){0<e.value.length&&(i+=o+e.value,o="&")},this)),i},n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.location=t,this.init()}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.UrlPersister=o,e.exports=i.default},{}],153:[function(t,e,i){"use strict";i.__esModule=!0;var o,n,s=t("../InputTypes/Select"),a=(o=s)&&o.__esModule?o:{default:o},r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.getValue=function(){var n={};return $.each($(this.$container),$.proxy(function(t,e){var i=$(e).find("option:selected").data("id"),o=$(e).find("option:selected").data("filter");n={id:i,filter:o}},this)),n},l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n.apply(this,arguments)}i.default=r,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.FolderSelect=r,e.exports=i.default},{"../InputTypes/Select":43}],154:[function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var n,s=o(t("../PhotoList/PhotoSearch")),a=o(t("../InputTypes/Select")),r=o(t("./FolderSelect.js")),l=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,n=s.default),c.prototype.init=function(){n.prototype.init.call(this),this.persistUrl()},c.prototype.addElements=function(){this.folder=new r.default('form.user-folder-form select[name="folders[]"]',{$parent:this.$container,name:"folder",event:"change",onEvent:$.proxy(this.onFormChange,this)}),this.sort=new a.default('form.user-folder-form select[name="sort[]"]',{$parent:this.$container,name:"sort",event:"change",onEvent:$.proxy(this.onFormChange,this)}),this.elements=[this.folder,this.sort]},c.prototype.onFormChange=function(){this.persistUrl(),$(document).trigger("fcx:pagination:reset"),this.onChange()},c.prototype.persistUrl=function(){this.urlPersister.persist({name:"form",value:this.getUrl()})},c.prototype.getUrl=function(){var t=this.folder.getValue(),e=t.id,i=t.filter,o="";return void 0!==e&&$.isNumeric(e)?o="&folder_id="+t.id:void 0!==i&&0<i.length&&(o="&filter="+t.filter),"sort="+this.sort.getValue()+o},c);function c(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),n.apply(this,arguments)}i.default=l,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.UserPhotosForm=l,e.exports=i.default},{"../InputTypes/Select":43,"../PhotoList/PhotoSearch":103,"./FolderSelect.js":153}],155:[function(t,e,i){"use strict";i.__esModule=!0;var o=(n.prototype.init=function(){this.bindEvents()},n.prototype.bindEvents=function(){this.$container.off("click",".js-btn-action"),this.$container.on("click",".js-btn-action",$.proxy(this.onButtonClick,this))},n.prototype.onButtonClick=function(t){t.preventDefault();var e=$(t.currentTarget).attr("href");e.length<2||(this.templateLoader.setOptions({template:e,name:"user-relation",type:"POST",retry:!1,target:$(".js-user-relation")}),this.templateLoader.load())},n);function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.$container=t,this.templateLoader=e}i.default=o,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.UserRelation=o,e.exports=i.default},{}],156:[function(t,e,i){"use strict";i.__esModule=!0;var o,n=t("../../../../../legacy/assets/vendor/js/credit-card-type/index"),s=(o=n)&&o.__esModule?o:{default:o};i.default=s.default,window.FOTOCOMMUNITY=window.FOTOCOMMUNITY||{},window.FOTOCOMMUNITY.creditCardType=s.default,e.exports=i.default},{"../../../../../legacy/assets/vendor/js/credit-card-type/index":158}],157:[function(t,e,i){"use strict";t("./AdjustableScrollState.js"),t("./AlertBox.js"),t("./AutoSize.js"),t("./BrowserExitAlert.js"),t("./BrowserNavigation.js"),t("./CardCarousel/CardCarousel.js"),t("./Category.js"),t("./CategoryDrilldown.js"),t("./CategoryViewToggler.js"),t("./Contacts.js"),t("./ContestUpload/ContestUpload.js"),t("./ContestUpload/ContestUploadCompleter.js"),t("./ContestUpload/ContestUploadSettings.js"),t("./CustomScrollBar.js"),t("./DatePicker.js"),t("./Datepicker/SingleDatePicker.js"),t("./DescriptionToggler.js"),t("./Discussion/DiscussionPhotosForm.js"),t("./DocumentEvent.js"),t("./Drilldown/Drilldown.js"),t("./Dropdown/Dropdown.js"),t("./EditableText.js"),t("./EndlessScrolling.js"),t("./EndlessScrollingModal.js"),t("./FallbackImage.js"),t("./Favorites/FavoritesPhotosForm.js"),t("./Flashmessages.js"),t("./FlashmessageSignup.js"),t("./FlexGallery.js"),t("./Form/AbstractFormHelper.js"),t("./Form/FormHelper.js"),t("./Form/FormValidationHelper.js"),t("./FormSerializer.js"),t("./Google/Autocomplete.js"),t("./Google/Geocoding.js"),t("./HistoryFallback.js"),t("./HistoryState.js"),t("./ImageDropper.js"),t("./InputTypes/Button.js"),t("./InputTypes/Checkbox.js"),t("./InputTypes/Input.js"),t("./InputTypes/Select.js"),t("./InputTypes/Text.js"),t("./KeyboardHandler.js"),t("./LazyElement.js"),t("./LightboxImage.js"),t("./LoadState.js"),t("./Login/FacebookLogin.js"),t("./Login/GoogleLogin.js"),t("./Login/Login.js"),t("./Login/SocialLogin.js"),t("./Mention.js"),t("./MetaInformationUpdater.js"),t("./ModalFormResetter.js"),t("./Onboarding.js"),t("./OnboardingUsername.js"),t("./PaginationPicker.js"),t("./PasswordLengthChecker.js"),t("./PasswordVisibilityToggler.js"),t("./Payment/CreditCard.js"),t("./Payment/GeoTrust.js"),t("./Payment/Iban.js"),t("./Payment/InvoiceAddress.js"),t("./Payment/Payment.js"),t("./Payment/PaymentAddress.js"),t("./Payment/PaymentCreditCard.js"),t("./Payment/PaymentDirectDebit.js"),t("./Payment/PaymentIndex.js"),t("./Payment/ProductSelector.js"),t("./Peepshow/Peepshow.js"),t("./PhotoComment/PhotoComment.js"),t("./PhotoComment/PhotoCommentCount.js"),t("./PhotoComment/PhotoCommentEdit.js"),t("./PhotoComment/PhotoCommentForm.js"),t("./PhotoComment/PhotoCommentLike.js"),t("./PhotoComment/PhotoCommentList.js"),t("./PhotoComment/PhotoCommentRemover.js"),t("./PhotoComment/PhotoCommentReply.js"),t("./PhotoComment/PhotoCommentReplyLoader.js"),t("./PhotoComment/PhotoCommentReport.js"),t("./PhotoComment/PhotoCommentSortDirection.js"),t("./PhotoComment/PhotoCommentVisibilityToggler.js"),t("./PhotoComment/PhotoReplyCount.js"),t("./PhotoEdit/PhotoEdit.js"),t("./PhotoEdit/PhotoEditCompleter.js"),t("./PhotoEdit/PhotoEditDrilldown.js"),t("./PhotoEdit/PhotoEditPage.js"),t("./PhotoEdit/PhotoEditSettings.js"),t("./PhotoFilter/PhotoFilter.js"),t("./PhotoInfos/PhotoInfos.js"),t("./PhotoInfos/PhotoInfosDrilldown.js"),t("./PhotoList/PhotoItem.js"),t("./PhotoList/PhotoItemUpdater.js"),t("./PhotoList/PhotoList.js"),t("./PhotoList/PhotoListBrowserNavigation.js"),t("./PhotoList/PhotoListPage.js"),t("./PhotoList/PhotoListPagination.js"),t("./PhotoList/PhotoListPaginationHandler.js"),t("./PhotoList/PhotoPage.js"),t("./PhotoList/PhotoPageMeta.js"),t("./PhotoList/PhotoPageNavigation.js"),t("./PhotoList/PhotoSearch.js"),t("./PhotoList/ScrollToPhotoList.js"),t("./PhotoRightClickBarrier.js"),t("./Premium/Premium.js"),t("./ProfilePhotoUpload.js"),t("./ProgressBar.js"),t("./Recaptcha.js"),t("./Resetter.js"),t("./ScrollState.js"),t("./Search/Photo/PhotoHeaderSearch.js"),t("./Search/Photo/PhotoSearchAnalytics.js"),t("./Search/Photo/PhotoSearchDatepicker.js"),t("./Search/Photo/PhotoSearchDrilldown.js"),t("./Search/Photo/PhotoSearchForm.js"),t("./Search/Photo/PhotoSearchReset.js"),t("./Search/Photo/PhotoSearchSection.js"),t("./Search/Photo/PhotoSearchTags.js"),t("./Search/Photo/UserSearchLink.js"),t("./Search/User/UserSearch.js"),t("./Section/SectionPhotosForm.js"),t("./SectionPicker/SectionPicker.js"),t("./SectionProvider/SectionProvider.js"),t("./SectionSubscription/SectionSubscriptionManager.js"),t("./SectionTagBuilder/SectionTagBuilder.js"),t("./Settings/EmailChangeForm.js"),t("./Settings/ModalFormHandler.js"),t("./Settings/NotificationsForm.js"),t("./Settings/PasswordChangeForm.js"),t("./Settings/PrivacyForm.js"),t("./Settings/Settings.js"),t("./Settings/SettingsForm.js"),t("./Settings/SettingsFunctions.js"),t("./Settings/SettingsProfile.js"),t("./Settings/VotingSettingsForm.js"),t("./Sluggifier.js"),t("./StickyElement.js"),t("./StickyHeader.js"),t("./SubscribeSection.js"),t("./TabbedNavigation.js"),t("./TemplateLoader.js"),t("./ToggleButtons/ToggleButtons.js"),t("./UniversalAnalyticsEvents.js"),t("./Upload/Upload.js"),t("./Upload/UploadCompleter.js"),t("./Upload/UploadDrilldown.js"),t("./Upload/UploadSettings.js"),t("./Upload/UsageBar.js"),t("./Upload/VisibilityBar.js"),t("./UrlHandler.js"),t("./UrlPersister.js"),t("./UserPhotos/FolderSelect.js"),t("./UserPhotos/UserPhotosForm.js"),t("./UserRelation.js"),t("./Vendor.js")},{"./AdjustableScrollState.js":1,"./AlertBox.js":3,"./AutoSize.js":4,"./BrowserExitAlert.js":5,"./BrowserNavigation.js":6,"./CardCarousel/CardCarousel.js":7,"./Category.js":8,"./CategoryDrilldown.js":9,"./CategoryViewToggler.js":10,"./Contacts.js":11,"./ContestUpload/ContestUpload.js":12,"./ContestUpload/ContestUploadCompleter.js":13,"./ContestUpload/ContestUploadSettings.js":14,"./CustomScrollBar.js":15,"./DatePicker.js":16,"./Datepicker/SingleDatePicker.js":17,"./DescriptionToggler.js":18,"./Discussion/DiscussionPhotosForm.js":19,"./DocumentEvent.js":20,"./Drilldown/Drilldown.js":21,"./Dropdown/Dropdown.js":22,"./EditableText.js":23,"./EndlessScrolling.js":24,"./EndlessScrollingModal.js":25,"./FallbackImage.js":26,"./Favorites/FavoritesPhotosForm.js":27,"./FlashmessageSignup.js":28,"./Flashmessages.js":29,"./FlexGallery.js":30,"./Form/AbstractFormHelper.js":31,"./Form/FormHelper.js":32,"./Form/FormValidationHelper.js":33,"./FormSerializer.js":34,"./Google/Autocomplete.js":35,"./Google/Geocoding.js":36,"./HistoryFallback.js":37,"./HistoryState.js":38,"./ImageDropper.js":39,"./InputTypes/Button.js":40,"./InputTypes/Checkbox.js":41,"./InputTypes/Input.js":42,"./InputTypes/Select.js":43,"./InputTypes/Text.js":44,"./KeyboardHandler.js":45,"./LazyElement.js":46,"./LightboxImage.js":47,"./LoadState.js":48,"./Login/FacebookLogin.js":49,"./Login/GoogleLogin.js":50,"./Login/Login.js":51,"./Login/SocialLogin.js":52,"./Mention.js":53,"./MetaInformationUpdater.js":54,"./ModalFormResetter.js":55,"./Onboarding.js":56,"./OnboardingUsername.js":57,"./PaginationPicker.js":58,"./PasswordLengthChecker.js":59,"./PasswordVisibilityToggler.js":60,"./Payment/CreditCard.js":61,"./Payment/GeoTrust.js":62,"./Payment/Iban.js":63,"./Payment/InvoiceAddress.js":64,"./Payment/Payment.js":65,"./Payment/PaymentAddress.js":66,"./Payment/PaymentCreditCard.js":67,"./Payment/PaymentDirectDebit.js":68,"./Payment/PaymentIndex.js":69,"./Payment/ProductSelector.js":70,"./Peepshow/Peepshow.js":71,"./PhotoComment/PhotoComment.js":72,"./PhotoComment/PhotoCommentCount.js":73,"./PhotoComment/PhotoCommentEdit.js":74,"./PhotoComment/PhotoCommentForm.js":75,"./PhotoComment/PhotoCommentLike.js":76,"./PhotoComment/PhotoCommentList.js":77,"./PhotoComment/PhotoCommentRemover.js":78,"./PhotoComment/PhotoCommentReply.js":79,"./PhotoComment/PhotoCommentReplyLoader.js":80,"./PhotoComment/PhotoCommentReport.js":81,"./PhotoComment/PhotoCommentSortDirection.js":82,"./PhotoComment/PhotoCommentVisibilityToggler.js":83,"./PhotoComment/PhotoReplyCount.js":84,"./PhotoEdit/PhotoEdit.js":85,"./PhotoEdit/PhotoEditCompleter.js":86,"./PhotoEdit/PhotoEditDrilldown.js":87,"./PhotoEdit/PhotoEditPage.js":88,"./PhotoEdit/PhotoEditSettings.js":89,"./PhotoFilter/PhotoFilter.js":90,"./PhotoInfos/PhotoInfos.js":91,"./PhotoInfos/PhotoInfosDrilldown.js":92,"./PhotoList/PhotoItem.js":93,"./PhotoList/PhotoItemUpdater.js":94,"./PhotoList/PhotoList.js":95,"./PhotoList/PhotoListBrowserNavigation.js":96,"./PhotoList/PhotoListPage.js":97,"./PhotoList/PhotoListPagination.js":98,"./PhotoList/PhotoListPaginationHandler.js":99,"./PhotoList/PhotoPage.js":100,"./PhotoList/PhotoPageMeta.js":101,"./PhotoList/PhotoPageNavigation.js":102,"./PhotoList/PhotoSearch.js":103,"./PhotoList/ScrollToPhotoList.js":104,"./PhotoRightClickBarrier.js":105,"./Premium/Premium.js":106,"./ProfilePhotoUpload.js":107,"./ProgressBar.js":108,"./Recaptcha.js":109,"./Resetter.js":110,"./ScrollState.js":111,"./Search/Photo/PhotoHeaderSearch.js":112,"./Search/Photo/PhotoSearchAnalytics.js":113,"./Search/Photo/PhotoSearchDatepicker.js":114,"./Search/Photo/PhotoSearchDrilldown.js":115,"./Search/Photo/PhotoSearchForm.js":116,"./Search/Photo/PhotoSearchReset.js":117,"./Search/Photo/PhotoSearchSection.js":118,"./Search/Photo/PhotoSearchTags.js":119,"./Search/Photo/UserSearchLink.js":120,"./Search/User/UserSearch.js":121,"./Section/SectionPhotosForm.js":122,"./SectionPicker/SectionPicker.js":123,"./SectionProvider/SectionProvider.js":124,"./SectionSubscription/SectionSubscriptionManager.js":125,"./SectionTagBuilder/SectionTagBuilder.js":126,"./Settings/EmailChangeForm.js":127,"./Settings/ModalFormHandler.js":128,"./Settings/NotificationsForm.js":129,"./Settings/PasswordChangeForm.js":130,"./Settings/PrivacyForm.js":131,"./Settings/Settings.js":132,"./Settings/SettingsForm.js":133,"./Settings/SettingsFunctions.js":134,"./Settings/SettingsProfile.js":135,"./Settings/VotingSettingsForm.js":136,"./Sluggifier.js":137,"./StickyElement.js":138,"./StickyHeader.js":139,"./SubscribeSection.js":140,"./TabbedNavigation.js":141,"./TemplateLoader.js":142,"./ToggleButtons/ToggleButtons.js":143,"./UniversalAnalyticsEvents.js":144,"./Upload/Upload.js":145,"./Upload/UploadCompleter.js":146,"./Upload/UploadDrilldown.js":147,"./Upload/UploadSettings.js":148,"./Upload/UsageBar.js":149,"./Upload/VisibilityBar.js":150,"./UrlHandler.js":151,"./UrlPersister.js":152,"./UserPhotos/FolderSelect.js":153,"./UserPhotos/UserPhotosForm.js":154,"./UserRelation.js":155,"./Vendor.js":156}],158:[function(t,e,i){"use strict";var s={},o="visa",n="master-card",a="american-express",r="diners-club",l="discover",c="unionpay",d="maestro",p=[o,n,a,r,l,"jcb",c,d];function h(t){var e,i,o;return t?(e=t.prefixPattern.source,i=t.exactPattern.source,(o=JSON.parse(JSON.stringify(t))).prefixPattern=e,o.exactPattern=i,o):null}function u(t){var e,i,o=[],n=[];if(!("string"==typeof t||t instanceof String))return[];for(i=0;i<p.length;i++)e=s[p[i]],0!==t.length?e.exactPattern.test(t)?n.push(h(e)):e.prefixPattern.test(t)&&o.push(h(e)):o.push(h(e));return n.length?n:o}s.visa={niceType:"Visa",type:o,prefixPattern:/^4$/,exactPattern:/^4\d*$/,gaps:[4,8,12],lengths:[16,18,19],code:{name:"CVV",size:3}},s[n]={niceType:"MasterCard",type:n,prefixPattern:/^(5|5[1-5]|2|22|222|222[1-9]|2[3-6]|27|27[0-2]|2720)$/,exactPattern:/^(5[1-5]|222[1-9]|2[3-6]|27[0-1]|2720)\d*$/,gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},s[a]={niceType:"American Express",type:a,prefixPattern:/^(3|34|37)$/,exactPattern:/^3[47]\d*$/,isAmex:!0,gaps:[4,10],lengths:[15],code:{name:"CID",size:4}},s[r]={niceType:"Diners Club",type:r,prefixPattern:/^(3|3[0689]|30[0-5])$/,exactPattern:/^3(0[0-5]|[689])\d*$/,gaps:[4,10],lengths:[14,16,19],code:{name:"CVV",size:3}},s[l]={niceType:"Discover",type:l,prefixPattern:/^(6|60|601|6011|65|64|64[4-9])$/,exactPattern:/^(6011|65|64[4-9])\d*$/,gaps:[4,8,12],lengths:[16,19],code:{name:"CID",size:3}},s.jcb={niceType:"JCB",type:"jcb",prefixPattern:/^(2|21|213|2131|1|18|180|1800|3|35)$/,exactPattern:/^(2131|1800|35)\d*$/,gaps:[4,8,12],lengths:[16],code:{name:"CVV",size:3}},s[c]={niceType:"UnionPay",type:c,prefixPattern:/^((6|62|62\d|(621(?!83|88|98|99))|622(?!06)|627[02,06,07]|628(?!0|1)|629[1,2])|622018)$/,exactPattern:/^(((620|(621(?!83|88|98|99))|622(?!06|018)|62[3-6]|627[02,06,07]|628(?!0|1)|629[1,2]))\d*|622018\d{12})$/,gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVN",size:3}},s[d]={niceType:"Maestro",type:d,prefixPattern:/^(5|5[06-9]|6\d*)$/,exactPattern:/^(5[06-9]|6[37])\d*$/,gaps:[4,8,12],lengths:[12,13,14,15,16,17,18,19],code:{name:"CVC",size:3}},u.getTypeInfo=function(t){return h(s[t])},u.types={VISA:o,MASTERCARD:n,AMERICAN_EXPRESS:a,DINERS_CLUB:r,DISCOVER:l,JCB:"jcb",UNIONPAY:c,MAESTRO:d},e.exports=u},{}]},{},[157]);